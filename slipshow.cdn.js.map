{"version":3,"file":"slipshow.cdn.js","sources":["../src/modules/slip-figure.mjs","../src/modules/util.mjs","../src/modules/controller.mjs","../src/modules/slip.mjs","../src/modules/engine.mjs","../src/slip-lib.js"],"sourcesContent":["class SlipFigure extends HTMLImageElement {\n    // Pour spécifier les attributs qui, changés, appellent \"attributeChangedCallback\"\n    static get observedAttributes() {return ['figure-name']; };\n\n    constructor() {\n\t// Toujours appeler \"super\" d'abord dans le constructeur\n\tsuper();\n\tif (typeof(this.internalStep) == \"undefined\") {\n \t    this.internalStep = 0;   \n\t}\n\tthis.img = [];\n\tthis.maxStep = 0;\n\tthis.figureName = this.getAttribute(\"figure-name\");\n\tthis.promise = this.preloadImages(0).then(() => {\n\t    this.updateSRC();\n\t});\n    }\n    preloadImage(i) {\n\treturn new Promise((resolve, reject) => {\n\t    this.img[i] = new Image();\n\t    this.img[i].onload = () => resolve();\n\t    this.img[i].onerror = reject;\n\t    this.img[i].src = this.getURL(i);\n\t});\n    }\n    preloadImages(i) {\n\treturn new Promise((resolve, reject) => {\n\t    this.preloadImage(i).then(()=> {\n\t\tthis.preloadImages(i+1).then(() => { resolve(); });\n\t    }).catch(() => {\n\t\tthis.maxStep = i-1;\n\t\tresolve();\n\t    });\t    \n\t});\n    }\n    connectedCallback() {\n    }\n\n    getURL(i) {\n\treturn \"figures/\"+this.figureName+\"/\"+this.figureName+\"_\"+i+\".svg\";\n    }\n    updateSRC() {\n\tthis.src = this.getURL(this.figureStep);\n    }\n    \n    set figureStep(step) {\n\tthis.promise = this.promise.then(() => {\n\t    if(step > this.maxStep)\n\t\tthis.internalStep = this.maxStep;\n\t    else if (step < 0)\n\t\tthis.internalStep = 0;\n\t    else\n\t\tthis.internalStep=step;\n\t    this.updateSRC();\n\t});\n    }\n    get figureStep() {\n\treturn this.internalStep;\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n\tif(name == \"figure-name\") {\n\t    this.figureName = newValue;\n\t    this.promise = this.promise.then(() => {\n\t\tthis.preloadImages(0).then(() => {\n\t\t    this.updateSRC();\n\t\t});\n\t    });\n\t}\n    }\n    nextFigure() {\n\tthis.figuresStep++;\n    }\n}\n\ncustomElements.define('slip-figure', SlipFigure, { extends: \"img\" });\n","export let myQueryAll = (root, selector, avoid) => {\n    avoid = avoid || \"slip-slip\";\n    if (!root.id)\n\troot.id = '_' + Math.random().toString(36).substr(2, 15);;\n    let allElem = Array.from(root.querySelectorAll(selector));\n    let separatedSelector = selector.split(\",\").map(selec => \"#\"+root.id+\" \" + avoid + \" \" + selec).join();\n    // console.log(\"debug myQueryAll\", selector, \"VS\",  separatedSelector);\n    let other = Array.from(root.querySelectorAll(separatedSelector));\n    // let other = Array.from(root.querySelectorAll(\"#\"+root.id+\" \" + avoid + \" \" + separatedSelector));\n    return allElem.filter(value => !other.includes(value));\n};\nwindow.myQueryAll = myQueryAll;\n\nexport function cloneNoSubslip (elem) {\n    let newElem = elem.cloneNode(false);\n    elem.childNodes.forEach((child) => {\n\tif(child.tagName && child.tagName == \"SLIP-SLIP\"){\n\t    let placeholder = document.createElement(child.tagName);\n\t    placeholder.classList.add(\"toReplace\");\n\t    newElem.appendChild(placeholder);\n\t}\n\telse\n\t    newElem.appendChild(cloneNoSubslip(child));\n    });\n    return newElem;\n}\nexport function replaceSubslips(clone, subslips) {\n    let placeholders = myQueryAll(clone, \".toReplace\");\n    subslips.forEach((subslip, index) => {\n\tplaceholders[index].replaceWith(subslip);\n    });\n}\n","// import Hammer from 'hammerjs';\n\nexport default function (ng) {\n    let engine = ng;\n    this.getEngine = () => this.engine;\n    this.setEngine = (ng) => this.engine = ng;\n\n    let activated = true;\n    this.activate = () => {\n\tactivated = true;\n    };\n    this.deactivate = () => {\n\tactivated = false;\n    };\n    \n    let left_keys = [\"k\"],\n\tright_keys = [\"m\"],\n\tup_keys = [\"o\"],\n\tdown_keys = [\"l\"],\n\trotate_keys = [\"i\"],\n\tunrotate_keys = [\"p\"],\n\tzoom_keys = [\"z\"],\n\tunzoom_keys = [\"Z\"],\n\tshow_toc_keys = [\"T\"],\n\tshow_toc2_keys = [\"t\"],\n\tnext_keys = [\"ArrowRight\", \"ArrowDown\"],\n\tprevious_keys = [\"ArrowLeft\", \"ArrowUp\"],\n\trefresh_keys = [\"r\"],\n\tchange_speed_keys = [\"f\"],\n\tup_slip_keys = [\"ArrowUp\"],\n\tbackground_canvas_keys = [\"#\"];\n\n    // let mainSlip = mainS;\n    // this.getMainSlip = () => mainSlip;\n    // this.setMainSlip = (slip) => mainSlip = slip;\n\n    // let mc = new Hammer(document.body);\n    // mc.on(\"swipe\", (ev) => {\n    // \tif (ev.direction == 2) {\n    // \t    engine.next();\n    // \t}\n    // \tif (ev.direction == 4) {\n    // \t    engine.previous();\n    // \t}\n    // });\n    let speedMove=1;\n    document.addEventListener(\"keypress\", (ev) => {\n\tif(change_speed_keys.includes(ev.key) && activated) { speedMove = (speedMove + 4)%30+1; }    \n\tif(refresh_keys.includes(ev.key) && activated) { engine.getCurrentSlip().refresh(); }    \n\tif(background_canvas_keys.includes(ev.key) && activated) {\n\t    document.querySelectorAll(\"slip-slip\").forEach((slip) => {slip.style.zIndex = \"-1\";});\n\t    document.querySelectorAll(\".background-canvas\").forEach((canvas) => {canvas.style.zIndex = \"1\";});\n\t}    \n    });\n    document.addEventListener(\"keydown\", (ev) => {\n\tlet openWindowHeight = engine.getOpenWindowHeight();\n\tlet openWindowWidth = engine.getOpenWindowWidth();\n\tif(down_keys.includes(ev.key) && activated) { engine.moveWindowRelative( 0                          ,  (speedMove)/openWindowHeight, 0, 0, 0.1); }   // Bas\n\tif(up_keys.includes(ev.key) && activated) { engine.moveWindowRelative( 0                          , -(speedMove)/openWindowHeight, 0, 0, 0.1); }  // Haut\n\tif(left_keys.includes(ev.key) && activated) { engine.moveWindowRelative(-(speedMove)/openWindowWidth,  0                           , 0, 0, 0.1); }   // Gauche\n\tif(right_keys.includes(ev.key) && activated) { engine.moveWindowRelative( (speedMove)/openWindowWidth,  0                           , 0, 0, 0.1); }   // Droite\n\tif(rotate_keys.includes(ev.key) && activated) { engine.moveWindowRelative(0, 0,  0   ,  1, 0.1); }                             // Rotate \n\tif(unrotate_keys.includes(ev.key) && activated) { engine.moveWindowRelative(0, 0,  0   , -1, 0.1); }                             // Unrotate\n\tif(zoom_keys.includes(ev.key) && activated) { engine.moveWindowRelative(0, 0,  0.01,  0, 0.1); }                          // Zoom\n\tif(unzoom_keys.includes(ev.key) && activated) { engine.moveWindowRelative(0, 0, -0.01,  0, 0.1); }                          // Unzoom\n\tif(show_toc_keys.includes(ev.key) && activated) {\n\t    engine.showToC();\n\t    // document.querySelector(\".toc-slip\").style.display = document.querySelector(\".toc-slip\").style.display == \"none\" ? \"block\" : \"none\"; \n\t}   \n\tif(show_toc2_keys.includes(ev.key) && activated) {\n\t    // engine.showToC();\n\t    document.querySelector(\".toc-slip\").style.display = document.querySelector(\".toc-slip\").style.display == \"none\" ? \"block\" : \"none\"; \n\t}   \n\tif(next_keys.includes(ev.key) && activated) {\n\t    console.log(ev);\n\t    if(ev.shiftKey)\n\t\tengine.nextSlip();\n\t    else    \n\t\tengine.next();\n\t}\n\telse if (previous_keys.includes(ev.key) && activated) {\n\t    if(ev.shiftKey)\n\t\tengine.previousSlip();\n\t    else    \n\t\tengine.previous();\n\t}\n\telse if (up_slip_keys.includes(ev.key) && activated) {\n\t    engine.pop();\n\t}\n    });    \n};\n","import { cloneNoSubslip, myQueryAll, replaceSubslips } from './util'\n\nexport default function Slip(name, fullName, actionL, ng, options) {\n\n    // ******************************\n    // Action List\n    // ******************************\n\n    this.generateActionList = function() {\n\tconsole.log(\"debug generateactionlist\", this.name);\n\tlet newActionList = [];\n\tthis.queryAll(\"slip-slip[enter-at]\").forEach((slip) => {\n\t    console.log(\"new slip with \", slip, null, null, ng, {});\n\t    newActionList[slip.getAttribute(\"enter-at\")] = new Slip(slip, \"\", [], ng, {});\n\t});\n\treturn newActionList;\n    };\n    this.addSubSlips = function() {\n\tconsole.log(\"debug generateactionlist\", this.name);\n\tlet newActionList = [];\n\tthis.queryAll(\"slip-slip[enter-at]\").forEach((slip) => {\n\t    console.log(\"new slip with \", slip, null, null, ng, {});\n\t    this.setNthAction(slip.getAttribute(\"enter-at\"), new Slip(slip, \"\", [], ng, {}));\n\t});\n\treturn newActionList;\n    };\n    let actionList = actionL;// || this.generateActionList();\n    this.setAction = (actionL) => {actionList = actionL;};\n    this.getActionList = () => {\n\tlet ret = [];\n\tfor(let i = 0;i <= this.getMaxNext(); i++) {\n\t    if(this.pauseSlipList[i] instanceof Slip)\n\t\tret[i] = this.pauseSlipList[i];\n\t    else if(typeof actionList[i] == \"function\" || actionList[i] instanceof Slip)\n\t\tret[i] = actionList[i];\n\t    else\n\t\tret[i] = () => {};\n\t}\n\treturn ret;\n    };\n    this.setNthAction = (n,action) => {actionList[n] = action;};\n    this.getCurrentSubSlip = () => {\n\tif(actionList[this.getActionIndex()] instanceof Slip)\n\t    return actionList[this.getActionIndex()];\n\tif(this.pauseSlipList[this.getActionIndex()] instanceof Slip)\n\t    return this.pauseSlipList[this.getActionIndex()];\n\treturn false;\n    };\n    this.nextStageNeedGoto = () => {\n\tif(actionList[this.getActionIndex()+1] instanceof Slip)\n\t    return false;\n\tif(this.pauseSlipList[this.getActionIndex()+1] instanceof Slip)\n\t    return false;\n\tif(this.getActionIndex() >= this.getMaxNext())\n\t    return false;\n\treturn true;\n    };\n    this.getSubSlipList = function () {\n\treturn this.getActionList().filter((action) => action instanceof Slip);\n    };\n\n    // ******************************\n    // Action Index\n    // ******************************\n    let actionIndex = -1;\n    this.setActionIndex = (actionI) => actionIndex = actionI;\n    this.getActionIndex = () => actionIndex;\n    this.getMaxNext = () => {\n\tif(this.maxNext)\n\t    return this.maxNext;\n\tlet maxTemp = actionList.length;\n\t[\"mk-visible-at\",\n\t \"mk-hidden-at\",\n\t \"mk-emphasize-at\",\n\t \"mk-unemphasize-at\",\n\t \"emphasize-at\",\n\t \"chg-visib-at\",\n\t \"up-at\",\n\t \"down-at\",\n\t \"center-at\",\n\t \"static-at\",\n\t \"exec-at\",\n\t \"enter-at\",\n\t \"focus-at\",\n\t \"unfocus-at\",\n\t \"figure-next-at\",\n\t \"figure-previous-at\",\n\t].forEach((attr) => {\n\t    this.queryAll(\"*[\"+attr+\"]\").forEach((elem) => {\n\t\telem.getAttribute(attr).split(\" \").forEach((strMax) => {\n\t\t    maxTemp = Math.max(Math.abs(parseInt(strMax)),maxTemp);\n\t\t});\n\t    });\n\t});\n\tlet sumArray = this.queryAll(\"[pause], [step], [auto-enter], [immediate-enter]\").map((elem) => {\n\t    if(elem.hasAttribute(\"pause\") && elem.getAttribute(\"pause\") != \"\")\n\t\treturn parseInt(elem.getAttribute(\"pause\"));\n\t    if(elem.hasAttribute(\"step\") && elem.getAttribute(\"step\") != \"\")\n\t\treturn parseInt(elem.getAttribute(\"step\"));\n\t    return 1; });\n\tmaxTemp = Math.max(maxTemp, sumArray.reduce((a,b) => a+b, 0));\n\tthis.maxNext = maxTemp;\n\treturn maxTemp;\t\n    };\n    \n    // ******************************\n    // Queries\n    // ******************************\n    this.queryAll = (quer) => {\n\treturn myQueryAll(this.element, quer);\n\t// let allElem = Array.from(this.element.querySelectorAll(quer));\n\t// let other = Array.from(this.element.querySelectorAll(\"#\"+this.name+\" slip \"+quer));\n\t// return allElem.filter(value => !other.includes(value));\n    };\n    this.query = (quer) => {\n\tif(typeof quer != \"string\") return quer;\n\treturn this.queryAll(quer)[0];\n    };\n    this.findSubslipByID = (id) => {\n\tlet goodSubslip = this.getSubSlipList().find((subslip) => {\n\t    if(subslip.name == id)\n\t\treturn 1;\n\t    return subslip.findSubslipByID(id);\n\t});\n\tif(!goodSubslip)\n\t    return false;\n\tif (goodSubslip.name == id) \n\t    return goodSubslip;\n\treturn goodSubslip.findSubslipByID(id);\n    };\n    \n    // ******************************\n    // Coordinates\n    // ******************************\n    this.findSlipCoordinate = () => { // rename to getCoordInUniverse\n\tlet coord = engine.getCoordinateInUniverse(this.element);\n\tconsole.log(\"debug findslipcoordinate\", coord);\n\tcoord.scale *= this.scale;\n\tcoord.y = coord.y + 0.5*coord.scale;\n\tcoord.x = coord.centerX;\n\tconsole.log(\"debug findslipcoordinate\", coord);\n\treturn coord;\n    };\n\n\n    // ******************************\n    // Pause functions\n    // ******************************\n    this.updatePauseAncestors = () => {\n\tthis.queryAll(\".pauseAncestor\").forEach((elem) => {elem.classList.remove(\"pauseAncestor\");});\n\tlet pause = this.query(\"[pause]\");\n\twhile(pause && pause.tagName != \"SLIP-SLIP\") {\n\t    pause.classList.add(\"pauseAncestor\");\n\t    pause = pause.parentElement;\n\t};\n    };\n    this.unpause = (pause) => {\n\tif(pause.hasAttribute(\"static-at-unpause\")) {\n\t    if(pause.getAttribute(\"static-at-unpause\") == \"\")\n\t\tthis.makeStatic(pause);\n\t    else\n\t\tpause.getAttribute(\"static-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.makeStatic(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"unstatic-at-unpause\")) {\n\t    if(pause.getAttribute(\"unstatic-at-unpause\") == \"\")\n\t\tthis.makeUnStatic(pause);\n\t    else\n\t\tpause.getAttribute(\"unstatic-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.makeUnStatic(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"down-at-unpause\")) {\n\t    if(pause.getAttribute(\"down-at-unpause\") == \"\")\n\t\tthis.moveDownTo(pause, 1);\n\t    else\n\t\tthis.moveDownTo(\"#\"+pause.getAttribute(\"down-at-unpause\"), 1);\t\t\t\n\t}\n\tif(pause.hasAttribute(\"up-at-unpause\")) {\n\t    if(pause.getAttribute(\"up-at-unpause\") == \"\")\n\t\tthis.moveUpTo(pause, 1);\n\t    else\n\t\tthis.moveUpTo(\"#\"+pause.getAttribute(\"up-at-unpause\"), 1);\n\t}\n\tif(pause.hasAttribute(\"center-at-unpause\")) {\n\t    if(pause.getAttribute(\"center-at-unpause\") == \"\")\n\t\tthis.moveCenterTo(pause, 1);\n\t    else\n\t\tthis.moveCenterTo(\"#\"+pause.getAttribute(\"center-at-unpause\"), 1);\n\t}\n\tif(pause.hasAttribute(\"exec-at-unpause\")) {\n\t    if(pause.getAttribute(\"exec-at-unpause\") == \"\")\n\t\tthis.executeScript(pause);\n\t    else\n\t\tpause.getAttribute(\"exec-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.executeScript(\"#\"+strID);\t\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"reveal-at-unpause\")) {\n\t    if(pause.getAttribute(\"reveal-at-unpause\") == \"\")\n\t\tthis.reveal(pause);\n\t    else\n\t\tpause.getAttribute(\"reveal-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.reveal(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"hide-at-unpause\")) {\n\t    if(pause.getAttribute(\"hide-at-unpause\") == \"\")\n\t\tthis.hide(pause);\n\t    else\n\t\tpause.getAttribute(\"hide-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.hide(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"figure-set-at-unpause\")) {\n\t    let [figureID, figureStep] = pause.getAttribute(\"figure-set-at-unpause\").split(\" \");\n\t    this.query(\"#\"+figureID).figureStep = figureStep;\n\t}\n\tif(pause.hasAttribute(\"figure-next-at-unpause\")) {\n\t    pause.getAttribute(\"figure-next-at-unpause\").split(\" \").map((figureID) => {\n\t\tthis.query(\"#\"+figureID).figureStep++;\n\t    });\n\t}\n\tif(pause.hasAttribute(\"figure-previous-at-unpause\")) {\n\t    pause.getAttribute(\"figure-previous-at-unpause\").split(\" \").map((figureID) => {\n\t\tthis.query(\"#\"+figureID).figureStep--;\n\t    });\n\t}\n\tif(pause.hasAttribute(\"focus-at-unpause\")) {\n\t    if(pause.getAttribute(\"focus-at-unpause\") == \"\")\n\t\tthis.focus(pause);\n\t    else\n\t\tthis.focus(\"#\"+pause.getAttribute(\"focus-at-unpause\"));\n\t}\n\tif(pause.hasAttribute(\"unfocus-at-unpause\")){\n\t    if(pause.getAttribute(\"unfocus-at-unpause\") == \"\")\n\t\tthis.unfocus(pause);\n\t    else\n\t\tthis.unfocus(\"#\"+pause.getAttribute(\"unfocus-at-unpause\"));\n\t}\n    };\n    this.incrPause = () => {\n\tlet pause = this.query(\"[pause], [auto-enter]:not([auto-enter=\\\"0\\\"]), [immediate-enter]:not([immediate-enter=\\\"0\\\"]), [step]\");\n\t// let pause = this.query(\"[pause]\");\n\tif(pause) {\n\t    console.log(\"pause is\", this.name, pause);\n\t    if(pause.hasAttribute(\"step\")) {\n\t\tif(!pause.getAttribute(\"step\")) \n\t\t    pause.setAttribute(\"step\", 1);\n\t\tlet d = pause.getAttribute(\"step\");\n\t\tif (d <= 1){\n\t\t    pause.removeAttribute(\"step\");\n\t\t    this.unpause(pause);\n\t\t} else\n\t\t    pause.setAttribute(\"step\", d-1);\n\t    }\n\t    if(pause.hasAttribute(\"auto-enter\")) {\n\t\tpause.setAttribute(\"auto-enter\", 0);\n\t\tthis.unpause(pause);\n\t    }\n\t    if(pause.hasAttribute(\"immediate-enter\")) {\n\t\tpause.setAttribute(\"immediate-enter\", 0);\n\t\tthis.unpause(pause);\n\t    }\n\t    if(pause.hasAttribute(\"pause\")) {\n\t\tif(!pause.getAttribute(\"pause\")) \n\t\t    pause.setAttribute(\"pause\", 1);\n\t\tlet d = pause.getAttribute(\"pause\");\n\t\tif (d <= 1){\n\t\t    pause.removeAttribute(\"pause\");\n\t\t    this.unpause(pause);\n\t\t} else\n\t\t    pause.setAttribute(\"pause\", d-1);\n\t\tthis.updatePauseAncestors();\n\t    }\n\t}\n    };\n\n    // ******************************\n    // Next functions\n    // ******************************\n    this.doAttributes = () => {\n\tthis.queryAll(\"*[mk-hidden-at]\").forEach((elem) => {\n\t    let hiddenAt = elem.getAttribute(\"mk-hidden-at\").split(\" \").map((str) => parseInt(str));\n\t    if(hiddenAt.includes(actionIndex))\n\t\telem.style.opacity = \"0\";});\t\n\tthis.queryAll(\"*[mk-visible-at]\").forEach((elem) => {\n\t    let visibleAt = elem.getAttribute(\"mk-visible-at\").split(\" \").map((str) => parseInt(str));\n\t    if(visibleAt.includes(actionIndex))\n\t\telem.style.opacity = \"1\";});\t\n\tthis.queryAll(\"*[mk-emphasize-at]\").forEach((elem) => {\n\t    let emphAt = elem.getAttribute(\"mk-emphasize-at\").split(\" \").map((str) => parseInt(str));\n\t    if(emphAt.includes(actionIndex))\n\t\telem.classList.add(\"emphasize\");});\t\n\tthis.queryAll(\"*[mk-unemphasize-at]\").forEach((elem) => {\n\t    let unemphAt = elem.getAttribute(\"mk-unemphasize-at\").split(\" \").map((str) => parseInt(str));\n\t    if(unemphAt.includes(actionIndex))\n\t\telem.classList.remove(\"emphasize\");});\t\n\tthis.queryAll(\"*[emphasize-at]\").forEach((elem) => {\n\t    let emphAt = elem.getAttribute(\"emphasize-at\").split(\" \").map((str) => parseInt(str));\n\t    if(emphAt.includes(actionIndex))\n\t\telem.classList.add(\"emphasize\");\n\t    else\n\t\telem.classList.remove(\"emphasize\");\n\t});\t\n\tthis.queryAll(\"*[chg-visib-at]\").forEach((elem) => {\n\t    let visibAt = elem.getAttribute(\"chg-visib-at\").split(\" \").map((str) => parseInt(str));\n\t    if(visibAt.includes(actionIndex))\n\t\telem.style.opacity = \"1\";\n\t    if(visibAt.includes(-actionIndex))\n\t\telem.style.opacity = \"0\";\n\t});\t\n\tthis.queryAll(\"*[static-at]\").forEach((elem) => {\n\t    let staticAt = elem.getAttribute(\"static-at\").split(\" \").map((str) => parseInt(str));\n\t    if(actionIndex < 0) return;\n\t    if(staticAt.includes(-actionIndex)){\n\t\tconsole.log(\"make unstatic actionIndex elem\", actionIndex, elem);\n\t\tthis.makeUnStatic(elem);\n\t\t// elem.style.position = \"absolute\";\n\t\t// elem.style.visibility = \"hidden\";\n\t    }\n\t    else if(staticAt.includes(actionIndex)) {\n\t\tthis.makeStatic(elem);\n\t\t// elem.style.position = \"static\";\n\t\t// elem.style.visibility = \"visible\";\n\t    }\n\t});\t    \n\tthis.queryAll(\"*[down-at]\").forEach((elem) => {\n\t    let goDownTo = elem.getAttribute(\"down-at\").split(\" \").map((str) => parseInt(str));\n\t    if(goDownTo.includes(actionIndex))\n\t\tthis.moveDownTo(elem, 1);\n\t});\n\tthis.queryAll(\"*[up-at]\").forEach((elem) => {\n\t    let goTo = elem.getAttribute(\"up-at\").split(\" \").map((str) => parseInt(str));\n\t    if(goTo.includes(actionIndex))\n\t\tthis.moveUpTo(elem, 1);});\n\tthis.queryAll(\"*[center-at]\").forEach((elem) => {\n\t    let goDownTo = elem.getAttribute(\"center-at\").split(\" \").map((str) => parseInt(str));\n\t    if(goDownTo.includes(actionIndex))\n\t\tthis.moveCenterTo(elem, 1);});\t\n\tthis.queryAll(\"*[focus-at]\").forEach((elem) => {\n\t    let focus = elem.getAttribute(\"focus-at\").split(\" \").map((str) => parseInt(str));\n\t    if(focus.includes(actionIndex))\n\t\tthis.focus(elem, 1);});\t\n\tthis.queryAll(\"*[unfocus-at]\").forEach((elem) => {\n\t    let focus = elem.getAttribute(\"unfocus-at\").split(\" \").map((str) => parseInt(str));\n\t    if(focus.includes(actionIndex))\n\t\tthis.unfocus(elem, 1);});\t\n\tthis.queryAll(\"*[exec-at]\").forEach((elem) => {\n\t    let toExec = elem.getAttribute(\"exec-at\").split(\" \").map((str) => parseInt(str));\n\t    if(toExec.includes(actionIndex))\n\t\tthis.executeScript(elem);});\t\n\tthis.queryAll(\"*[figure-next-at]\").forEach((elem) => {\n\t    let toFigureNext = elem.getAttribute(\"figure-next-at\").split(\" \").map((str) => parseInt(str));\n\t    if(toFigureNext.includes(actionIndex))\n\t\telem.figureStep++;});\t\n\tthis.queryAll(\"*[figure-previous-at]\").forEach((elem) => {\n\t    let toFigureNext = elem.getAttribute(\"figure-previous-at\").split(\" \").map((str) => parseInt(str));\n\t    if(toFigureNext.includes(actionIndex))\n\t\telem.figureStep--;});\t\n    };\n    this.incrIndex = () => {\n\tconsole.log(\"incrIndex\", this.name);\n\tactionIndex = actionIndex+1;\n\tthis.doAttributes();\n\tif(actionIndex>0)\n\t    this.incrPause();\n\tthis.updateToC();\n    };\n    this.next = function () {\n\tif(actionIndex >= this.getMaxNext())\n\t    return false;\n\tthis.incrIndex();\n\tif(typeof actionList[actionIndex] == \"function\") {\n\t    actionList[actionIndex](this);\n\t}\n\tif(actionList[actionIndex] instanceof Slip){\n\t    return actionList[actionIndex];\n\t}\n\tif(this.pauseSlipList[actionIndex] instanceof Slip)\n\t    return this.pauseSlipList[actionIndex];\n\t// let nextSlip = this.query(\"[pause], [auto-enter]\");\n\t// if(nextSlip.hasAttribute(\"auto-enter\"))\n\t//     return \n\treturn true;\n    };\n    this.previous = () => {\n\tlet savedActionIndex = this.getActionIndex();\n\tlet savedDelay = this.currentDelay;\n\tthis.getEngine().setDoNotMove(true);\n\tconsole.log(\"gotoslip: we call doRefresh\",this.doRefresh());\n\tif(savedActionIndex == -1)\n\t    return false;\n \tlet toReturn;\n\twhile(this.getActionIndex()<savedActionIndex-1){\n\t    console.log(\"previous is ca we do next\", this.getEngine().getDoNotMove());\n\t    console.log(\"(figure) actionIndex is\", actionIndex);\n\t    toReturn = this.next();\n\t}\n\t// if(!this.nextStageNeedGoto())\n\t//     this.getEngine().setDoNotMove(false);\n\t// while(this.getActionIndex()<savedActionIndex-1)\n\t//     toReturn = this.next();\n\tsetTimeout(() => {this.getEngine().setDoNotMove(false);},0);\n\tthis.getEngine().gotoSlip(this, {delay:savedDelay});\n\treturn toReturn;\n\n\t// return this.next;\n    };\n\n    // ******************************\n    // ToC functions\n    // ******************************\n    this.setTocElem = (tocElem) => {this.tocElem = tocElem;};\n    this.updateToC = () => {\n\tif(!this.tocElem)\n\t    return;\n\tif(!this.ToCList)\n\t    this.ToCList = myQueryAll(this.tocElem, \"li\", \"li\");\n\tlet i;\n\tfor(i=0;i<this.getActionIndex(); i++) {\n\t    this.ToCList[i].classList.remove(\"before\", \"after\", \"current\");\n\t    this.ToCList[i].classList.add(\"before\");\t    \n\t}\n\tif(i<=this.getActionIndex()) {\n\t    this.ToCList[i].classList.remove(\"before\", \"after\", \"current\");\n\t    this.ToCList[i].classList.add(\"current\");\n\t    i++;\n\t}\n\tfor(i;i<=this.getMaxNext(); i++) {\n\t    this.ToCList[i].classList.remove(\"before\", \"after\", \"current\");\n\t    this.ToCList[i].classList.add(\"after\");\n\t}\t\n    };\n    this.firstVisit = () => {\n\tthis.updateToC();\n\tif(options.firstVisit)\n\t    options.firstVisit(this);\n    };\n    this.init = () => {\n\tthis.queryAll(\"*[chg-visib-at]\").forEach((elem) => {\n\t    elem.style.opacity = \"0\";\n\t});\t\n\t// this.queryAll(\"*[static-at]\").forEach((elem) => {\n\t//     elem.style.position = \"absolute\";\n\t//     elem.style.visibility = \"hidden\";\n\t// });\t\n//\tthis.doAttributes();\n\tthis.updatePauseAncestors();\n\tif(options.init)\n\t    options.init(this);\n    };\n\n    // ******************************\n    // Refreshes\n    // ******************************\n    this.refresh = () => {\n\tif(actionList[actionIndex] instanceof Slip)\n\t    actionList[actionIndex].refresh();\n\telse\n\t    this.doRefresh();\n    };\n    this.refreshAll = () => {\n\tactionList.filter((elem) => elem instanceof Slip).forEach((subslip) => { subslip.refreshAll();});\n\tthis.pauseSlipList.filter((elem) => elem instanceof Slip).forEach((subslip) => { subslip.refreshAll();});\n\tthis.doRefresh();\n    };\n    this.doRefresh = () => {\n\tconsole.log(\"gotoslip: doRefresh has been called\");\n\tthis.setActionIndex(-1);\n\tlet subSlipList = myQueryAll(this.element, \"slip-slip\");\n\tconsole.log(\"mmdebug\", clonedElement);\n\tlet clone = clonedElement.cloneNode(true);\n\treplaceSubslips(clone, subSlipList);\n\tthis.element.replaceWith(clone);\n\tthis.element = clone;\n\tthis.init();\n\tthis.firstVisit();\n\tdelete(this.currentX);\n\tdelete(this.currentY);\n\tdelete(this.currentDelay);\n\tconsole.log(\"previous is ca GOTOSLIP FROM 3\", options, this.getEngine().getDoNotMove());\n\tthis.getEngine().gotoSlip(this);\n    };\n\n    // ******************************\n    // Movement, execution and hide/show\n    // ******************************\n    this.makeUnStatic = (selector, delay, opacity) => {\n\tlet elem = this.query(selector);\n\t// setTimeout(() => {\n\t//     elem.style.overflow = \"hidden\"; \n\t//     setTimeout(() => {\n\t// \telem.style.transition = \"height \"+ (typeof(delay) == \"undefined\" ? \"1s\" : (delay+\"s\"));\n\t// \tif(opacity)\n\t// \t    elem.style.transition += \", opacity \"+ (typeof(delay) == \"undefined\" ? \"1s\" : (delay+\"s\"));\n\t// \telem.style.height = (elem.offsetHeight+\"px\");\n\t// \tif(opacity)\n\t// \t    elem.style.opacity = \"1\";\n\t// \tsetTimeout(() => {\n\t// \t    if(opacity)\n\t// \t    \telem.style.opacity = \"0\"; \n\t// \t    elem.style.height = (\"0px\");}, 10);\n\t//     }, 0);\n\t// },0);\n\telem.style.position = \"absolute\";\n\telem.style.visibility = \"hidden\";\n    };\n    this.makeStatic = (selector) => {\n\tlet elem = this.query(selector);\n\telem.style.position = \"static\";\n\telem.style.visibility = \"visible\";\n    };\n    this.unfocus = (selector) => {\n\tthis.getEngine().gotoSlip(this, { delay: 1});\n    };\n    this.focus = (selector) => {\n\tlet elem = this.query(selector);\n\tthis.getEngine().moveToElement(elem, {});\n    };\n\n    this.executeScript = (selector) => {\n\tlet elem;\n\tif(typeof selector == \"string\") elem = this.query(selector);\n\telse elem = selector;\n\t(new Function(\"slip\",elem.innerHTML))(this);\n    };\n    this.moveUpTo = (selector, delay,  offset) => {\n\tsetTimeout(() => {\n\t    let elem;\n\t    if(typeof selector == \"string\") elem = this.query(selector);\n\t    else elem = selector;\n\t    if (typeof offset == \"undefined\") offset = 0.0125;\n\t    let coord = this.findSlipCoordinate();\n\t    let d = ((elem.offsetTop)/1080-offset)*coord.scale;\n\t    this.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t    // this.currentX = coord.x;\n\t    // this.currentY = coord.y+d;\n\t    // this.currentDelay = delay;\n\t    // engine.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t},0);\n    };\n    this.moveDownTo = (selector, delay, offset) => {\n\tsetTimeout(() => {\n\t    let elem;\n\t    if(typeof selector == \"string\") elem = this.query(selector);\n\t    else elem = selector;\n\t    if (typeof offset == \"undefined\") offset = 0.0125;\n\t    let coord = this.findSlipCoordinate();\n\t    let d = ((elem.offsetTop+elem.offsetHeight)/1080 - 1 + offset)*coord.scale;\n\t    this.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t    // this.currentX = coord.x;\n\t    // this.currentY = coord.y+d;\n\t    // this.currentDelay = delay;\n\t    // engine.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t},0);\n    };\n    this.moveCenterTo = (selector, delay, offset) => {\n\tsetTimeout(() => {\n\t    let elem;\n\t    if(typeof selector == \"string\") elem = this.query(selector);\n\t    else elem = selector;\n\t    if (typeof offset == \"undefined\") offset = 0;\n\t    let coord = this.findSlipCoordinate();\n\t    let d = ((elem.offsetTop+elem.offsetHeight/2)/1080-1/2+offset)*coord.scale;\n\t    this.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t    // this.currentX = coord.x;\n\t    // this.currentY = coord.y+d;\n\t    // this.currentDelay = delay;\n\t    // engine.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t},0);\n    };\n    this.restoreWindow = () => {\n\tthis.getEngine\n    };\n    this.moveWindow = (x,y,scale,rotate, delay) => {\n\tthis.currentX = x;\n\tthis.currentY = y;\n\tthis.currentDelay = delay;\n\tconsole.log(\"previous is ca we try to move win\", this.getEngine().getDoNotMove());\n\tconsole.log(\"previous is ca ORIGIN 3\", x, y, this.getEngine().getDoNotMove());\n//\tsetTimeout(() => {\n\t    this.getEngine().moveWindow(x, y, scale, rotate, delay);\n//\t}, 0);\n    };\n    this.reveal = (selector) => {\n\tlet elem;\n\tif(typeof selector == \"string\") elem = this.query(selector);\n\telse elem = selector;\n\telem.style.opacity = \"1\";\n    };\n    this.revealAll = (selector) => {\n\tthis.queryAll(selector).forEach((elem) => { elem.style.opacity = \"1\";});\n    };\n    this.hide = (selector) => {\n\tthis.query(selector).style.opacity = \"0\";\n    };\n    this.hideAll = (selector) => {\n\tthis.queryAll(selector).forEach((elem) => { elem.style.opacity = \"0\";});\n    };\n\n    // ******************************\n    // Initialisation of the object\n    // ******************************\n    // engine\n    let engine = ng;\n    this.getEngine = () => engine;\n    this.setEngine = (ng) => engine = ng;\n    // element\n    this.element =\n\ttypeof name == \"string\" ?\n\tdocument.querySelector(name[0]==\"#\" ? name : (\"#\"+name)):\n\tname;\n    // names\n    this.name =\n\ttypeof name == \"string\" ?\n\tname:\n\tname.id;\n    if(typeof(fullName) == \"string\")\n\tthis.fullName = fullName ;\n    else if (this.element.hasAttribute(\"toc-title\"))\n\tthis.fullName = this.element.getAttribute(\"toc-title\");\n    else\n\tthis.fullName = this.name;\n    console.log(\"this name is \", this.name);\n    // clonedElement\n    let clonedElement;\n    if(typeof MathJax != \"undefined\")\n\tMathJax.startup.promise.then(() => {\n\t    setTimeout(() => {clonedElement = cloneNoSubslip(this.element);},0);\n\t});\n    else\n\tsetTimeout(() => {clonedElement = cloneNoSubslip(this.element);},0);\n    this.getCloned = () => clonedElement;\n    this.setCloned = (c) => clonedElement = c;\n    // scale, rotate, delay\n    this.scale = parseFloat(this.element.getAttribute(\"scale\"));\n    if(typeof this.scale == \"undefined\" || isNaN(this.scale)) this.scale = 1;\n    this.rotate = parseFloat(this.element.getAttribute(\"rotate\")) || 0;\n    this.delay = isNaN(parseFloat(this.element.getAttribute(\"delay\"))) ? 0 : (parseFloat(this.element.getAttribute(\"delay\")));\n    // coord\n    let coord = this.findSlipCoordinate();\n    console.log(coord);\n    this.x = coord.x;\n    this.y = coord.y;\n    // Preparing the slip\n    this.init(this, engine);\n    // Adding \"enter-at\" subslips\n    this.addSubSlips();\n    // Adding \"paused-flow\" subslips\n    this.generatePauseFlowSlipList = function () {\n\tlet slipList = [];\n\tlet bla = this.queryAll(\"[pause], [step], [auto-enter], [immediate-enter]\");\n\tlet step = 1;\n\tbla.forEach((elem) => {\n\t    console.log(\"debug generatePauseFlowsliplist\", elem, step);\n\t    if(elem.hasAttribute(\"auto-enter\")){\n\t\tslipList[step] = new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\tstep++;\n\t    }\n\t    if(elem.hasAttribute(\"immediate-enter\")){\n\t\t// the slip is entered before the pause\n\t\tslipList[step-1] = new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\tstep++;\n\t    }\n\t    if(elem.hasAttribute(\"step\")){\n\t\tconsole.log(\"has enter-at-unpause?\");\n\t\tif(elem.hasAttribute(\"enter-at-unpause\")) {\n\t\t    console.log(\"has enter-at-unpause\");\n\t\t    if(elem.getAttribute(\"enter-at-unpause\") != \"\") {\n\t\t\tlet s = this.query(\"#\"+elem.getAttribute(\"enter-at-unpause\"));\n\t\t\tslipList[step] = new Slip(s, s.getAttribute(\"toc-title\") || \"\", [], ng, {});\n//\t\t\tslipList[step + (parseInt(elem.getAttribute(\"step\")) || 1) - 1] = new Slip(s, s.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\t    }\n\t\t    else\n\t\t\tslipList[step + (parseInt(elem.getAttribute(\"step\")) || 1) - 1] = new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\t}\n\t\tconsole.log(\"debug generatePauseFlowsliplist1\", elem, step);\n\t\tstep += parseInt(elem.getAttribute(\"step\")) || 1 ;\n\t\tconsole.log(\"debug generatePauseFlowsliplist2\", elem, step);\n\t    }\n\t    if(elem.hasAttribute(\"pause\")){\n\t\tif(elem.hasAttribute(\"enter-at-unpause\")) {\n\t\t    if(elem.getAttribute(\"enter-at-unpause\") != \"\") {\n\t\t\tlet s = this.query(elem.getAttribute(\"enter-at-unpause\"));\n\t\t\tslipList[step + (parseInt(elem.getAttribute(\"step\")) || 1) - 1] = new Slip(s, s.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\t    }\n\t\t    else\n\t\t\tslipList[step + (parseInt(elem.getAttribute(\"step\")) || 1) - 1] = new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\t}\n\t\tconsole.log(\"debug generatePauseFlowsliplist1\", elem, step);\n\t\tstep += parseInt(elem.getAttribute(\"pause\")) || 1 ;\n\t\tconsole.log(\"debug generatePauseFlowsliplist1\", elem, step);\n\t    }\n\t});\n\treturn slipList;\n    };\n    this.pauseSlipList = this.generatePauseFlowSlipList();\n    // this.pauseSlipList = this.queryAll(\"[pause], [step], [auto-enter]\").map((elem) => {\n    // \tif(elem.hasAttribute(\"auto-enter\"))\n    // \t    return new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n    // \treturn null;\n    // });\n}\n","import { myQueryAll } from './util';\nimport Controller from './controller';\nimport Slip from './slip';\n\nexport default function (root) {\n    function prepareRoot (rootElem) {\n\tlet container = document.createElement(\"div\");\n\tcontainer.innerHTML = \n\t    '\t\\\n\t<div class=\"toc-slip\" style=\"display:none;\"></div>\\\n        <div id=\"open-window\">\\\n\t  <div class=\"cpt-slip\">0</div>\\\n\t  <div class=\"format-container\">\\\n\t    <div class=\"rotate-container\">\\\n\t\t<div class=\"scale-container\">\\\n\t\t    <div class=\"universe movable\" id=\"universe\">\\\n\t\t\t<div width=\"10000\" height=\"10000\" class=\"fog\"></div>\\\n                        <div class=\"placeHolder\"></div>\\\n\t\t    </div>\\\n\t\t</div>\\\n              </div>\\\n\t    </div>\\\n\t</div>';\n\trootElem.replaceWith(container);\n\tcontainer.querySelector(\".placeHolder\").replaceWith(rootElem);\n\trootElem.querySelectorAll(\"slip-slip\").forEach((slipElem) => {\n\t    setTimeout(() => {\n\t\tvar scaleContainer = document.createElement('div');\n\t\tvar slipContainer = document.createElement('div');\n\t\tscaleContainer.classList.add(\"slip-scale-container\");\n\t\tslipContainer.classList.add(\"slip-container\");\n\t\tlet fChild;\n\t\twhile((fChild = slipElem.firstChild)) {\n\t\t    slipContainer.appendChild(fChild);\n\t\t}\n\t\tscaleContainer.appendChild(slipContainer);\n\t\tslipElem.appendChild(scaleContainer);\n\t    },0);\n\t});\n\trootElem.style.width = \"unset\";\n\trootElem.style.height = \"unset\";\n\tdocument.querySelectorAll(\".background-canvas\").forEach((elem)=> {elem.addEventListener(\"click\", (ev) => { console.log(\"vous avez cliquez aux coordonnées : \", ev.layerX, ev.layerY); });});\t\n    }\n    if (typeof(root) == \"string\") {\n\tif(root[0] != \"#\")\n\t    root = \"#\"+root;\n\troot = document.querySelector(root);\n    }\n    else if (typeof(root) == \"undefined\")\n\troot = document.querySelector(\"slip-slipshow\");\n    prepareRoot(root);\n\n    // Constants\n    document.body.style.cursor = \"auto\";\n    let timeOutIds = [];\n    document.body.addEventListener(\"mousemove\", (ev) => {\n\ttimeOutIds.forEach((id) => { clearTimeout(id); });\n\tdocument.body.style.cursor = \"auto\";\n\ttimeOutIds.push(setTimeout(() => { document.body.style.cursor = \"none\";}, 5000));\n    });\n    let openWindow = document.querySelector(\"#open-window\");\n    let universe = document.querySelector(\"#universe\");\n    let slips = universe.querySelectorAll(\"slip-slip:not(slip-slipshow)\");\n    let browserHeight, openWindowWidth;\n    let browserWidth, openWindowHeight;\n    this.getOpenWindowHeight = () => openWindowHeight;\n    this.getOpenWindowWidth = () => openWindowWidth;\n\n    let winX, winY;\n    let currentScale, currentRotate;\n    this.getCoord = () => { return {x: winX, y: winY, scale: currentScale};};\n    let doNotMove = false;\n    this.setDoNotMove = m => doNotMove = m;\n    this.getDoNotMove = m => doNotMove;\n    this.moveWindow = function (x, y, scale, rotate, delay) {\n\tif(this.getDoNotMove()) {\n\t    console.log(\"we cannot move\");\n\t    console.log(\"previous is ca we cannot move !\");\n\t    return;\n\t}\n\tconsole.log(\"previous is ca getDoNotMove !\", x,y,scale, rotate, delay, this.getDoNotMove());\n\tconsole.log(\"move to\", x, y, \"with scale, rotate, delay\", scale, rotate, delay);\n\tcurrentScale = scale;\n\tcurrentRotate = rotate;\n\twinX = x ;\n\twinY = y;\n\tconsole.log(x,y);\n\tsetTimeout(() => {\n\t    document.querySelector(\".scale-container\").style.transitionDuration = delay+\"s\";\n\t    document.querySelector(\".rotate-container\").style.transitionDuration = delay+\"s\";\n\t    universe.style.transitionDuration = delay+\"s, \"+delay+ \"s\"; \n\t    setTimeout(() => {\n\t\tuniverse.style.left = -(x*1440 - 1440/2)+\"px\";\n\t\tuniverse.style.top = -(y*1080 - 1080/2)+\"px\";\n\t\tdocument.querySelector(\".scale-container\").style.transform = \"scale(\"+(1/scale)+\")\";\n\t\tdocument.querySelector(\".rotate-container\").style.transform = \"rotate(\"+(rotate)+\"deg)\";\n\t    },0);\n\t},0);\n\treturn;\n    };\n    this.moveWindowRelative = function(dx, dy, dscale, drotate, delay) {\n\tthis.moveWindow(winX+dx, winY+dy, currentScale+dscale, currentRotate+drotate, delay);\n    };\n    this.placeSlip = function(slip) {\n\t// console.log(\"debug Previous (slip)\", slip);\n\t// let posX = 0.5;\n\t// let posY = 0.5;\n\t// let x=parseFloat(slip.getAttribute(\"pos-x\")), y=parseFloat(slip.getAttribute(\"pos-y\"));\n\tlet scale = parseFloat(slip.getAttribute(\"scale\"));\n\t// // console.log(slip);\n\tlet slipScaleContainer = slip.querySelector(\".slip-scale-container\");\n\t// let rotate = 0;\n\tscale = isNaN(scale) ? 1 : scale ;\n\t// x = (isNaN(x) ? posX : x);\n\t// y = (isNaN(y) ? posY : y);\n\t// slip.setAttribute(\"pos-x\", x);\n\t// slip.setAttribute(\"pos-y\", y);\n\t// slip.setAttribute(\"scale\", scale);\n\t// slip.setAttribute(\"rotate\", rotate);\n\t// posX = x + 1;\n\t// posY = y;\n\t// slip.style.top = (y*1080 - 1080/2)+\"px\";\n\t// slip.style.left = (x*1440 - 1440/2)+\"px\";\n\t// if(!slip.classList.contains(\"permanent\"))\n\t// \tslip.style.zIndex = \"-1\";\n\t// slip.style.transformOrigin = \"50% 50%\";\n\tslipScaleContainer.style.transform = \"scale(\"+scale+\")\";\n\tslip.style.width = (Math.max(slipScaleContainer.offsetWidth, 1440))*scale+\"px\";\n\tslip.style.height = (Math.max(slipScaleContainer.offsetHeight, 1080))*scale+\"px\";\t\n    };\n    this.placeSlips = function () {\n\t// let posX = 0.5;\n\t// let posY = 0.5;\n\tlet depth = function (elem) {\n\t    console.log(\"debug depth (elem)\", elem);\n\t    let subslips = myQueryAll(elem, \"slip-slip\");\n\t    console.log(\"debug depth (subslips)\", elem);\n\t    return 1+subslips.map(depth).reduce((a,b) => Math.max(a,b),0);\n\t};\n\tlet rootDepth = depth(document.body);\n\tconsole.log(\"debug\", rootDepth);\n\tfor(let i= 0; i<rootDepth; i++)\n\t    slips.forEach(this.placeSlip);\t\n    };\n    setTimeout(() => {\n\tthis.placeSlips();\n    },0);\n    this.placeOpenWindow = function () {\n\tbrowserHeight = window.innerHeight;\n\tbrowserWidth = window.innerWidth;\n\tif(browserHeight/3 < browserWidth/4) {\n\t    openWindowWidth = Math.floor((browserHeight*4)/3);\n\t    openWindowHeight = browserHeight;\n\t    openWindow.style.left = ((window.innerWidth - openWindowWidth) /2)+\"px\";\n\t    openWindow.style.right = ((window.innerWidth - openWindowWidth) /2)+\"px\";\n\t    openWindow.style.width = (openWindowWidth)+\"px\";\n\t    openWindow.style.top = \"0\";\n\t    openWindow.style.bottom = \"0\";\n\t    openWindow.style.height = (openWindowHeight)+\"px\";\n\t}\n\telse {\n\t    openWindowHeight = Math.floor((browserWidth*3)/4);\n\t    openWindowWidth = browserWidth;\n\t    openWindow.style.top = ((window.innerHeight - openWindowHeight) /2)+\"px\";\n\t    openWindow.style.bottom = ((window.innerHeight - openWindowHeight) /2)+\"px\";\n\t    openWindow.style.height = (openWindowHeight)+\"px\";\n\t    openWindow.style.right = \"0\";\n\t    openWindow.style.left = \"0\";\n\t    openWindow.style.width = openWindowWidth+\"px\";\n\t}\n\tdocument.querySelector(\".scale-container\").style.transformOrigin = (1440/2)+\"px \"+(1080/2)+\"px\";\n\tdocument.querySelector(\".rotate-container\").style.transformOrigin = (1440/2)+\"px \"+(1080/2)+\"px\";\n\tdocument.querySelector(\".format-container\").style.transform = \"scale(\"+(openWindowWidth/1440)+\")\";\n\tdocument.querySelector(\".cpt-slip\").style.right =  (parseInt(openWindow.style.left)) + \"px\";\n\tdocument.querySelector(\".cpt-slip\").style.bottom =  \"0\";\n\tdocument.querySelector(\".cpt-slip\").style.zIndex =  \"10\";\n    };\n    this.placeOpenWindow();\n    window.addEventListener(\"resize\", (ev) => {\n\tthis.placeOpenWindow();\n\tthis.moveWindow(winX, winY, currentScale, currentRotate, 0);\n    });\n\n    // Taken from https://selftaughtjs.com/algorithm-sundays-converting-roman-numerals\n    // Use in showing roman numbers for slip number\n    function counterToString(num, depth) {\n\tif(depth == 1 || depth > 3)\n\t    return num.toString();\n\tlet result = '';\n\tlet decimal = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1];\n\tlet roman;\n\tif(depth == 0)\n\t    roman = [\"M\", \"CM\",\"D\",\"CD\",\"C\", \"XC\", \"L\", \"XL\", \"X\",\"IX\",\"V\",\"IV\",\"I\"];\n\telse\n\t    roman = [\"m\", \"cm\",\"d\",\"cd\",\"c\", \"xc\", \"l\", \"xl\", \"x\",\"ix\",\"v\",\"iv\",\"i\"];\n\tfor (var i = 0;i<=decimal.length;i++) {\n\t    while (num%decimal[i] < num) {     \n\t\tresult += roman[i];\n\t\tnum -= decimal[i];\n\t    }\n\t}\n\treturn result;\n    }\n    this.countersToString = (counterList) => {\n\tlet res = '';\n\tres += counterToString(counterList[0]+1, 0);\n\tfor(let i = 1; i < counterList.length; i++)\n\t    res += \".\" + counterToString(counterList[i]+1, i);\n\treturn res;\t\n    };\n    this.updateCounter = function () {\n\tlet counters = stack.map((slip) => slip.getActionIndex());\n\tdocument.querySelector(\".cpt-slip\").innerHTML = this.countersToString(counters);\t\n    };\n    this.next = () => {\n\tif(document.querySelector(\".toc-slip\").innerHTML == \"\")\n\t    this.showToC();\n\t// return true if and only if the stack changed\n\tlet currentSlide = this.getCurrentSlip();\n\tlet n = currentSlide.next();\n\tthis.updateCounter();\n\tif(n instanceof Slip) {\n\t    this.gotoSlip(n);\n\t    this.push(n);\n\t    this.next();\n\t    // this.showToC();\n\t    return true;\n\t}\n\telse if(!n) {\n\t    this.pop();\n\t    let newCurrentSlip = this.getCurrentSlip();\n\t    if(newCurrentSlip.nextStageNeedGoto())\n\t\tthis.gotoSlip(newCurrentSlip);\n\t    // newCurrentSlip.incrIndex();\n\t    if(stack.length > 1 || newCurrentSlip.getActionIndex() < newCurrentSlip.getMaxNext())\n\t\tthis.next();\n\t    else\n\t\tthis.gotoSlip(newCurrentSlip);\n\t    // this.showToC();\n\t    return true;\n\t    // console.log(stack);\n\t}\n\t// this.showToC();\n\treturn false;\n    };\n    this.nextSlip = function () {\n\t// Do this.next() untill the stack change\n\twhile(!this.next()) {}\n    };\n    this.previous = (options) => {\n\tconsole.log(\"previous is called with option\", options);\n\tlet currentSlip = this.getCurrentSlip();\n\t// setDoNotMove(true);\n\t// let stage = currentSlip.previous2();\n\t// setDoNotMove(false);\n\tlet n = currentSlip.previous();\n\t// if(stage == \"\")\n\tconsole.log(\"debug previous (currentSlip, n)\", currentSlip, n);\n\tif(n instanceof Slip) {\n\t    while(n.getCurrentSubSlip() instanceof Slip) {\n\t\tthis.push(n);\n\t\tn = n.getCurrentSubSlip();\n\t    }\n\t    this.push(n);\n\t    console.log(\"previous is ca GOTOSLIP FROM 1\", options);\n\t    \n\t    this.gotoSlip(n, options);\n\t    // this.gotoSlip(n, {delay: currentSlip.delay});\n\t\t\n\t    // this.showToC();\n\t    this.updateCounter();\n\t    return true;\n\t}\n\telse if(!n) {\n\t    this.pop();\n\t    let newCurrentSlide = this.getCurrentSlip();\n\t    // newCurrentSlide.incrIndex();\n\t    console.log(\"previous is ca currentDelay, delay\", currentSlip.currentDelay , currentSlip.delay);\n\t    \n\t    if(stack.length > 1 || newCurrentSlide.getActionIndex() > -1)\n\t\tthis.previous({delay: (currentSlip.currentDelay ? currentSlip.currentDelay : currentSlip.delay )});\n\t    else {\n\t\tthis.gotoSlip(newCurrentSlide, options);\n\t\tconsole.log(\"previous is ca GOTOSLIP FROM 2\", options);\n\t    }\n\t\t// this.gotoSlip(newCurrentSlide, {delay: currentSlip.delay});\n\t    // console.log(stack);\n\t    // this.showToC();\n\t    this.updateCounter();\n\t    return true;\n\t} else if(options){\n\t    setTimeout(() => {\n\t\tthis.gotoSlip(currentSlip, options);\n\t    },0);\n\t}\n\t// this.showToC();\n\tthis.updateCounter();\n\treturn false;\n\t// console.log(\"returned\", n);\n    };\n    this.previousSlip = function () {\n\t// Do this.previous() untill the stack change\n\twhile(!this.previous()) {}\n    };\n\n    this.getCoordinateInUniverse = function (elem) {\n\tconsole.log(\"debug getcoord elem\", elem);\n\tlet getCoordInParen = (elem) => {\n\t    return {x: elem.offsetLeft, y:elem.offsetTop};\t    \n\t};\n\tlet globalScale = 1;\n\tlet parseScale = function(transform) {\n\t    if (transform == \"none\")\n\t\treturn 1;\n\t    return parseFloat(transform.split(\"(\")[1].split(\",\")[0]);\n\t};\n\tlet getCoordIter = (elem) => {\n\t    console.log(\"debug getcoorditer elem\", elem);\n\t    let cInParent = getCoordInParen(elem);\n\t    if(!elem.offsetParent)\n\t\treturn { x: 0,\n\t\t\t y: 0,\n\t\t\t centerX: 0,\n\t\t\t centerY: 0,\n\t\t\t width: 0,\n\t\t\t height: 0,\n\t\t\t scale: 0 };\n\t    if(elem.offsetParent.classList.contains(\"universe\"))\n\t    {\n\t\tconsole.log(\"universe\", cInParent);\n\t\treturn cInParent;\n\t    }\n\t    let cParent = getCoordIter(elem.offsetParent);\n\t    let style = window.getComputedStyle(elem.offsetParent);\n\t    // console.log(style);\n\t    let scale;\n\t    // console.log(\"style\", style.transform);\n\t    // if (style.transform == \"none\")\n\t    // \tscale = 1;\n\t    // else\n\t    // \tscale = parseFloat(style.transform.split(\"(\")[1].split(\",\")[0]);\n\t    scale = parseScale(style.transform);\n\t    // console.log(style.transform);\n\t    // console.log(\"scale\", scale);\n\t    // console.log(\"globalScale\", globalScale);\n\t    globalScale *= scale;\n\t    // let scale = 1 ; // Has to parse/compute the scale, for now always 1\n\t    // console.log(\"at step\",  \"cParent.x\", cParent.x, \"cInParen.x\", cInParent.x, \"scale\", scale);\n\t    return {x:cParent.x+cInParent.x*globalScale, y:cParent.y+cInParent.y*globalScale };\n\t};\n\tlet c = getCoordIter(elem);\n\tlet style = window.getComputedStyle(elem);\n\tlet scale = parseScale(style.transform);\n\tglobalScale *= scale;\n\tconsole.log(\"getCoord\", {x:c.x/1440+0.5, y:c.y/1080+0.5}, \"globalScale\", globalScale, style.transform, scale);\n\tlet ret = { x: c.x/1440,\n\t\t    y: c.y/1080,\n\t\t    centerX:c.x/1440+0.5*elem.offsetWidth/1440*globalScale,\n\t\t    centerY:c.y/1080+0.5*elem.offsetHeight/1080*globalScale,\n\t\t    width: elem.offsetWidth/1440*globalScale,\n\t\t    height: elem.offsetHeight/1080*globalScale,\n\t\t    scale: globalScale };\n\tconsole.log(ret);\n\treturn ret;\n\t// return {x:c.x/1440+elem*globalScale*scale, y:c.y/1080+0.5*globalScale*scale, scale: globalScale*scale};\n\t// return {x: this.element.offsetLeft/1440+0.5, y:this.element.offsetTop/1080+0.5};\n    };\n    this.moveToElement = function(element, options) {\n\tlet coord = this.getCoordinateInUniverse(element);\n\tlet actualSize = {width: element.offsetWidth*coord.scale, height: element.offsetHeight*coord.scale};\n\tif(options)\n\t    this.moveWindow(coord.centerX, coord.centerY, Math.max(coord.width, coord.height)// coord.scale\n\t\t\t    , 0, options.delay ? options.delay : 1);\n    };\n    this.gotoSlip = function(slip, options) {\n\tconsole.log(\"previous is ca goto slip\", options, slip.element, this.getDoNotMove());\n\tconsole.log(\"we goto slip\", slip.element, this.getDoNotMove());\n\toptions = options ? options : {};\n\tconsole.log(\"options is \", options);\n\tif(slip.element.tagName == \"SLIP-SLIP\")\n\t{\n\t     setTimeout(() => {\n\t\tlet coord = slip.findSlipCoordinate();\n\t\tif(typeof slip.currentX != \"undefined\" && typeof slip.currentY != \"undefined\") {\n\t\t    console.log(\"previous is ca ORIGIN 1\", slip.currentX, slip.currentY, this.getDoNotMove(), options);\n\t\t    this.moveWindow(slip.currentX, slip.currentY, coord.scale, slip.rotate, typeof(options.delay)!=\"undefined\" ? options.delay : (typeof(slip.currentDelay)!=\"undefined\" ? slip.currentDelay : slip.delay));\n\t\t} else {\n\t\t    slip.currentX = coord.x; slip.currentY = coord.y; slip.currentDelay = slip.delay;\n\t\t    console.log(\"previous is ca ORIGIN 2\", coord.x, coord.y, this.getDoNotMove());\n\t\t    this.moveWindow(coord.x, coord.y, coord.scale, slip.rotate, typeof(options.delay)!=\"undefined\" ? options.delay : (typeof(slip.currentDelay)!=\"undefined\" ? slip.currentDelay : slip.delay));\n\t\t}\n\t     },0);\n\t}\n\telse {\n\t     setTimeout(() => {\n\t\tconsole.log(\"debug slip element\", slip.element);\n\t\tlet coord = this.getCoordinateInUniverse(slip.element);\n\t\t this.moveWindow(coord.centerX, coord.centerY, Math.max(coord.width, coord.height), 0, typeof(options.delay)!=\"undefined\" ? options.delay : slip.delay);\n\t     },0);\n\t}\n    };\n    let rootSlip = new Slip(root, \"Presentation\", [], this, {});\n    let stack = [rootSlip];\n\n    // Stack Management:\n    this.push = function (n) {\n\tthis.getToC().querySelectorAll(\".toc-slip .active-slip\").forEach(elem => elem.classList.remove(\"active-slip\"));\n\tif(n.tocElem)\n\t    n.tocElem.classList.add(\"active-slip\");\n\tstack.push(n);\n\treturn ;\n    };\n    this.pop = function () {\n\tthis.getToC().querySelectorAll(\".toc-slip .active-slip\").forEach(elem => elem.classList.remove(\"active-slip\"));\n\tlet n = stack.pop();\n\tif(stack.length == 0)\n\t    stack.push(n);\n\tif(stack[stack.length -1].tocElem)\n\t    stack[stack.length -1].tocElem.classList.add(\"active-slip\");\n\treturn n;\n    };\n    this.getCurrentSlip = function () {\n\treturn stack[stack.length -1];\n    };\n    this.getSlipTree = function (slip) {\n\tslip = slip || rootSlip;\n\tif(slip instanceof Slip) \n\t    return {name: slip.name, slip: slip, subslips: slip.getActionList().map((e) => this.getSlipTree(e))};\n\treturn {function: true};\n    };\n\n    this.goToState = function(state) {\n\tlet iter = (state) => {\n\t    if(state.length == 0)\n\t\treturn;\n\t    iter(state[0]);\n\t    while(state[1].getActionIndex()<state[2])\n\t\tthis.next();\n\t};\n\tstack = [rootSlip];\n\trootSlip.refreshAll();\n\titer(state);\n\tthis.gotoSlip(state[1]);\n    };\n    let toc;\n    this.getToC = function() {\n\tif (toc)\n\t    return toc;\n\ttoc = document.querySelector(\".toc-slip\");\n\treturn toc;\n    };\n    this.showToC = function () {\n\tconsole.log(\"debug showtoc\");\n\tlet toc = document.querySelector(\".toc-slip\");\n\t// let innerHTML = \"\";\n\tlet globalElem = document.createElement(\"div\");\n\tlet tree = this.getSlipTree();\n\t// let before = true;\n\tlet displayTree = (tree, stackWithNumbers) => {\n\t    console.log(\"debug treee\", tree);\n\t    let containerElement = document.createElement(\"div\");\n\t    let nameElement = document.createElement(\"div\");\n\t    // if(before)\n\t    // \tnameElement.style.color = \"blue\";\n\t    // else\n\t    // \tnameElement.style.color = \"yellow\";\n\t    // if(tree.slip == this.getCurrentSlip()) {\n\t    // \tnameElement.style.color = \"red\";\n\t    // \tbefore = false;\n\t    // }\n\t\t\n\t    nameElement.innerText = tree.slip.fullName; //? tree.slip.fullName : tree.slip.name ; //+ \" (\" + (tree.slip.getActionIndex()+1) + \"/\" + (tree.slip.getMaxNext()+1) + \")\";\n\t    containerElement.appendChild(nameElement);\n\t    // innerHTML += \"<div>\"+tree.name+\"</div>\";\n\t    if(tree.subslips.length > 0) {\n\t\tlet ulElement = document.createElement(\"ul\");\n\t\t// innerHTML += \"<ul>\";\n\t\ttree.subslips.forEach((subtree, index) => {\n\t\t    let newStackWithNumbers = [stackWithNumbers, tree.slip, index];\n\t\t    let liElement = document.createElement(\"li\");\n\t\t    // innerHTML += \"<li>\";\n\t\t    if(subtree.function) {\n\t\t\tlet toCounter = (c) => {\n\t\t\t    if(c.length == 0)\n\t\t\t\treturn [];\n\t\t\t    return toCounter(c[0]).concat([c[2]]);\n\t\t\t};\n\t\t\tliElement.innerText = this.countersToString(toCounter(newStackWithNumbers));\n\t\t\t//\t\t\tliElement.innerText = \"\"+(index+1);\n\t\t\tliElement.classList.add(\"toc-function\");\n\t\t    } else\n\t\t\tliElement.appendChild(displayTree(subtree, newStackWithNumbers));\n\t\t    liElement.addEventListener(\"click\", (ev) => {\n\t\t    \tif(ev.target == liElement) {\n\t\t    \t    this.goToState(newStackWithNumbers);\n\t\t    \t    console.log(\"newstack\", newStackWithNumbers);\n\t\t    \t}\n\t\t    });\n\t\t    ulElement.appendChild(liElement);\n\t\t    \n\t\t    // innerHTML += \"</li>\";\n\t\t});\n\t\tcontainerElement.appendChild(ulElement);\n\t\ttree.slip.setTocElem(containerElement);\n\t\t// innerHTML += \"</ul>\";\n\t    }\n\t    console.log(\"debug tree, will return\", containerElement);\n\t    // containerElement.addEventListener(\"click\", () => { console.log(stackWithNumbers);});\n\t    return containerElement;\n\t};\n\ttoc.innerHTML = \"\";\n\t// toc.innerHTML = innerHTML;\n\ttoc.appendChild(displayTree(tree, []));\n    };\n    \n    // this.getRootSlip = () => rootSlip;\n    this.setRootSlip = (root) => {\n\trootSlip = root;\n\tstack = [rootSlip];\n    };\n    this.getRootSlip = () => rootSlip;\n    this.start = () => {\n\tstack = [rootSlip];\n\tthis.next();\n\treturn this;\n    };\n    this.restart = () => {\n\tstack = [rootSlip];\n\trootSlip.refreshAll();\n\tthis.next();\n    };\n    let controller = new Controller(this);\n    this.getController = () => controller;\n};\n","import './modules/slip-figure'\n\nimport IEngine from './modules/engine'\nimport IController from './modules/controller.mjs'\nimport ISlip from './modules/slip'\nimport * as IUtil from './modules/util'\n\n// import \"./css/slip.css\";\n// import \"./css/theorem.css\";\n\n/**\n * Allows slip-js to be used as a module\n */\nexport const Engine = IEngine;\nexport const Controller = IController;\nexport const Slip = ISlip;\nexport const Util = IUtil;\n\nexport let startSlipshow = () => {\n    let engine;\n    if(typeof MathJax != \"undefined\")\n\tMathJax.startup.promise.then(() => {\n\t    engine = new Engine(document.querySelector(\"slip-slipshow\")).start();\n\t});\n    else\n\tengine = new Engine(document.querySelector(\"slip-slipshow\")).start();\n    return engine;\n};\n\n/**\n * Allows slip-js to be used as simple CDN-included file\n */\n// window.Engine = IEngine;\n// window.Controller = IController;\n// window.Slip = ISlip;\n// window.Util = IUtil;\n"],"names":["SlipFigure","HTMLImageElement","observedAttributes","constructor","internalStep","img","maxStep","figureName","getAttribute","promise","preloadImages","then","updateSRC","preloadImage","i","Promise","resolve","reject","Image","onload","onerror","src","getURL","catch","connectedCallback","figureStep","step","attributeChangedCallback","name","oldValue","newValue","nextFigure","figuresStep","customElements","define","extends","myQueryAll","root","selector","avoid","id","Math","random","toString","substr","allElem","Array","from","querySelectorAll","separatedSelector","split","map","selec","join","other","filter","value","includes","window","cloneNoSubslip","elem","newElem","cloneNode","childNodes","forEach","child","tagName","placeholder","document","createElement","classList","add","appendChild","replaceSubslips","clone","subslips","placeholders","subslip","index","replaceWith","ng","engine","getEngine","setEngine","activated","activate","deactivate","left_keys","right_keys","up_keys","down_keys","rotate_keys","unrotate_keys","zoom_keys","unzoom_keys","show_toc_keys","show_toc2_keys","next_keys","previous_keys","refresh_keys","change_speed_keys","up_slip_keys","background_canvas_keys","speedMove","addEventListener","ev","key","getCurrentSlip","refresh","slip","style","zIndex","canvas","openWindowHeight","getOpenWindowHeight","openWindowWidth","getOpenWindowWidth","moveWindowRelative","showToC","querySelector","display","console","log","shiftKey","nextSlip","next","previousSlip","previous","pop","Slip","fullName","actionL","options","generateActionList","newActionList","queryAll","addSubSlips","setNthAction","actionList","setAction","getActionList","ret","getMaxNext","pauseSlipList","n","action","getCurrentSubSlip","getActionIndex","nextStageNeedGoto","getSubSlipList","actionIndex","setActionIndex","actionI","maxNext","maxTemp","length","attr","strMax","max","abs","parseInt","sumArray","hasAttribute","reduce","a","b","quer","element","query","findSubslipByID","goodSubslip","find","findSlipCoordinate","coord","getCoordinateInUniverse","scale","y","x","centerX","updatePauseAncestors","remove","pause","parentElement","unpause","makeStatic","strID","makeUnStatic","moveDownTo","moveUpTo","moveCenterTo","executeScript","reveal","hide","figureID","focus","unfocus","incrPause","setAttribute","d","removeAttribute","doAttributes","hiddenAt","str","opacity","visibleAt","emphAt","unemphAt","visibAt","staticAt","goDownTo","goTo","toExec","toFigureNext","incrIndex","updateToC","savedActionIndex","savedDelay","currentDelay","setDoNotMove","doRefresh","toReturn","getDoNotMove","setTimeout","gotoSlip","delay","setTocElem","tocElem","ToCList","firstVisit","init","refreshAll","subSlipList","clonedElement","currentX","currentY","position","visibility","moveToElement","Function","innerHTML","offset","offsetTop","moveWindow","rotate","offsetHeight","restoreWindow","revealAll","hideAll","MathJax","startup","getCloned","setCloned","c","parseFloat","isNaN","generatePauseFlowSlipList","slipList","bla","s","prepareRoot","rootElem","container","slipElem","scaleContainer","slipContainer","fChild","firstChild","width","height","layerX","layerY","body","cursor","timeOutIds","clearTimeout","push","openWindow","universe","slips","browserHeight","browserWidth","winX","winY","currentScale","currentRotate","getCoord","doNotMove","m","transitionDuration","left","top","transform","dx","dy","dscale","drotate","placeSlip","slipScaleContainer","offsetWidth","placeSlips","depth","rootDepth","placeOpenWindow","innerHeight","innerWidth","floor","right","bottom","transformOrigin","counterToString","num","result","decimal","roman","countersToString","counterList","res","updateCounter","counters","stack","currentSlide","newCurrentSlip","currentSlip","newCurrentSlide","getCoordInParen","offsetLeft","globalScale","parseScale","getCoordIter","cInParent","offsetParent","centerY","contains","cParent","getComputedStyle","actualSize","rootSlip","getToC","getSlipTree","e","function","goToState","state","iter","toc","globalElem","tree","displayTree","stackWithNumbers","containerElement","nameElement","innerText","ulElement","subtree","newStackWithNumbers","liElement","toCounter","concat","target","setRootSlip","getRootSlip","start","restart","controller","Controller","getController","Engine","IEngine","IController","ISlip","Util","IUtil","startSlipshow"],"mappings":"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"}