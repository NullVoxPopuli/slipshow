{"version":3,"file":"slipshow.cdn.js","sources":["../src/modules/slip-figure.mjs","../src/modules/util.mjs","../src/modules/controller.mjs","../node_modules/atrament/src/mouse.js","../node_modules/atrament/src/constants.js","../node_modules/atrament/src/events.js","../node_modules/atrament/src/pixels.js","../node_modules/atrament/src/atrament.js","../src/modules/slip.mjs","../src/modules/engine.mjs","../src/slip-lib.js"],"sourcesContent":["class SlipFigure extends HTMLImageElement {\n    // Pour spécifier les attributs qui, changés, appellent \"attributeChangedCallback\"\n    static get observedAttributes() {return ['figure-name']; };\n\n    constructor() {\n\t// Toujours appeler \"super\" d'abord dans le constructeur\n\tsuper();\n\tif (typeof(this.internalStep) == \"undefined\") {\n \t    this.internalStep = 0;   \n\t}\n\tthis.img = [];\n\tthis.maxStep = 0;\n\tthis.figureName = this.getAttribute(\"figure-name\");\n\tthis.promise = this.preloadImages(0).then(() => {\n\t    this.updateSRC();\n\t});\n    }\n    preloadImage(i) {\n\treturn new Promise((resolve, reject) => {\n\t    this.img[i] = new Image();\n\t    this.img[i].onload = () => resolve();\n\t    this.img[i].onerror = reject;\n\t    this.img[i].src = this.getURL(i);\n\t});\n    }\n    preloadImages(i) {\n\treturn new Promise((resolve, reject) => {\n\t    this.preloadImage(i).then(()=> {\n\t\tthis.preloadImages(i+1).then(() => { resolve(); });\n\t    }).catch(() => {\n\t\tthis.maxStep = i-1;\n\t\tresolve();\n\t    });\t    \n\t});\n    }\n    connectedCallback() {\n    }\n\n    getURL(i) {\n\treturn \"figures/\"+this.figureName+\"/\"+this.figureName+\"_\"+i+\".svg\";\n    }\n    updateSRC() {\n\tthis.src = this.getURL(this.figureStep);\n    }\n    \n    set figureStep(step) {\n\tthis.promise = this.promise.then(() => {\n\t    if(step > this.maxStep)\n\t\tthis.internalStep = this.maxStep;\n\t    else if (step < 0)\n\t\tthis.internalStep = 0;\n\t    else\n\t\tthis.internalStep=step;\n\t    this.updateSRC();\n\t});\n    }\n    get figureStep() {\n\treturn this.internalStep;\n    }\n    \n    attributeChangedCallback(name, oldValue, newValue) {\n\tif(name == \"figure-name\") {\n\t    this.figureName = newValue;\n\t    this.promise = this.promise.then(() => {\n\t\tthis.preloadImages(0).then(() => {\n\t\t    this.updateSRC();\n\t\t});\n\t    });\n\t}\n    }\n    nextFigure() {\n\tthis.figuresStep++;\n    }\n}\n\ncustomElements.define('slip-figure', SlipFigure, { extends: \"img\" });\n","export let myQueryAll = (root, selector, avoid) => {\n    avoid = avoid || \"slip-slip\";\n    if (!root.id)\n\troot.id = '_' + Math.random().toString(36).substr(2, 15);;\n    let allElem = Array.from(root.querySelectorAll(selector));\n    let separatedSelector = selector.split(\",\").map(selec => \"#\"+root.id+\" \" + avoid + \" \" + selec).join();\n    let other = Array.from(root.querySelectorAll(separatedSelector));\n    // let other = Array.from(root.querySelectorAll(\"#\"+root.id+\" \" + avoid + \" \" + separatedSelector));\n    return allElem.filter(value => !other.includes(value));\n};\nwindow.myQueryAll = myQueryAll;\n\nexport function cloneNoSubslip (elem) {\n    let newElem = elem.cloneNode(false);\n    elem.childNodes.forEach((child) => {\n\tif(child.tagName && child.tagName == \"SLIP-SLIP\"){\n\t    let placeholder = document.createElement(child.tagName);\n\t    let importantAttributes =[\"pause\",\"step\", \"auto-enter\", \"immediate-enter\"];\n\t    importantAttributes.forEach((attr) => {\n\t\tif(child.hasAttribute(attr))\n\t\t    placeholder.setAttribute(attr, child.getAttribute(attr));\n\t    });\n\t    placeholder.classList.add(\"toReplace\");\n\t    newElem.appendChild(placeholder);\n\t}\n\telse if(child.tagName && child.tagName == \"CANVAS\" && child.classList.contains(\"sketchpad\")){\n\t    let placeholder = document.createElement(child.tagName);\n\t    placeholder.classList.add(\"toReplaceSketchpad\");\n\t    newElem.appendChild(placeholder);\n\t}\n\telse\n\t    newElem.appendChild(cloneNoSubslip(child));\n    });\n    return newElem;\n}\nexport function replaceSubslips(clone, subslips, sketchpad, sketchpadHighlight, element) {\n    let placeholders = myQueryAll(clone, \".toReplace\");\n    subslips.forEach((subslip, index) => {\n\tlet importantAttributes =[\"pause\",\"step\", \"auto-enter\", \"immediate-enter\"];\n\timportantAttributes.forEach((attr) => {\n\t    if(placeholders[index].hasAttribute(attr))\n\t\tsubslip.setAttribute(attr, placeholders[index].getAttribute(attr));\n\t});\n\tplaceholders[index].replaceWith(subslip);\n    });\n    element.replaceWith(clone);\n    let sketchPlaceholder = myQueryAll(clone, \".toReplaceSketchpad\");\n    if(sketchPlaceholder[0])\n\tsketchPlaceholder[0].replaceWith(sketchpad);\n    if(sketchPlaceholder[1])\n\tsketchPlaceholder[1].replaceWith(sketchpadHighlight);\n}\n","// import Hammer from 'hammerjs';\n\nexport default function (ng) {\n    let engine = ng;\n    this.getEngine = () => this.engine;\n    this.setEngine = (ng) => this.engine = ng;\n\n    let activated = true;\n    this.activate = () => {\n\tactivated = true;\n    };\n    this.deactivate = () => {\n\tactivated = false;\n    };\n    \n    let left_keys = [\"k\"],\n\tright_keys = [\"m\"],\n\tup_keys = [\"o\"],\n\tdown_keys = [\"l\"],\n\trotate_keys = [\"i\"],\n\tunrotate_keys = [\"p\"],\n\tzoom_keys = [\"z\"],\n\tunzoom_keys = [\"Z\"],\n\tshow_toc_keys = [\"T\"],\n\tshow_toc2_keys = [\"t\"],\n\tnext_keys = [\"ArrowRight\", \"ArrowDown\", \" \"],\n\tprevious_keys = [\"ArrowLeft\", \"ArrowUp\"],\n\trefresh_keys = [\"r\"],\n\tchange_speed_keys = [\"f\"],\n\tup_slip_keys = [],\n\tdraw_on_slip_keys = [\"w\"],\n\terase_on_slip_keys = [\"W\"],\n\thighlight_on_slip_keys = [\"h\"],\n\terase_highlight_on_slip_keys = [\"H\"],\n\tstop_writing_on_slip_keys = [\"x\"],\n\tclear_annotations_keys = [\"X\"],\n\treload_canvas_keys = [\"C\"],\n\tbackground_canvas_keys = [\"#\"];\n\n    // let mainSlip = mainS;\n    // this.getMainSlip = () => mainSlip;\n    // this.setMainSlip = (slip) => mainSlip = slip;\n\n    // let mc = new Hammer(document.body);\n    // mc.on(\"swipe\", (ev) => {\n    // \tif (ev.direction == 2) {\n    // \t    engine.next();\n    // \t}\n    // \tif (ev.direction == 4) {\n    // \t    engine.previous();\n    // \t}\n    // });\n    let speedMove=1;\n    document.addEventListener(\"keypress\", (ev) => {\n\tif(change_speed_keys.includes(ev.key) && activated) { speedMove = (speedMove + 4)%30+1; }    \n\tif(refresh_keys.includes(ev.key) && activated) { engine.getCurrentSlip().refresh(); }    \n\tif(draw_on_slip_keys.includes(ev.key) && activated) { engine.setTool(\"drawing\"); }    \n\tif(erase_on_slip_keys.includes(ev.key) && activated) { engine.setTool(\"drawing-erase\"); }    \n\tif(highlight_on_slip_keys.includes(ev.key) && activated) { engine.setTool(\"highlighting\"); }    \n\tif(erase_highlight_on_slip_keys.includes(ev.key) && activated) { engine.setTool(\"highlighting-erase\"); }\n\tif(stop_writing_on_slip_keys.includes(ev.key) && activated) { engine.setTool(\"no-tool\"); }    \n\tif(clear_annotations_keys.includes(ev.key) && activated) { engine.setTool(\"clear-all\"); }    \n\tif(reload_canvas_keys.includes(ev.key) && activated) { engine.reloadCanvas(); }    \n\tif(background_canvas_keys.includes(ev.key) && activated) {\n\t    document.querySelectorAll(\"slip-slip\").forEach((slip) => {slip.style.zIndex = \"-1\";});\n\t    document.querySelectorAll(\".background-canvas\").forEach((canvas) => {canvas.style.zIndex = \"1\";});\n\t}    \n    });\n    document.addEventListener(\"keydown\", (ev) => {\n\tlet openWindowHeight = engine.getOpenWindowHeight();\n\tlet openWindowWidth = engine.getOpenWindowWidth();\n\tif(down_keys.includes(ev.key) && activated) { engine.moveWindowRelative( 0                          ,  (speedMove)/openWindowHeight, 0, 0, 0.1); }   // Bas\n\tif(up_keys.includes(ev.key) && activated) { engine.moveWindowRelative( 0                          , -(speedMove)/openWindowHeight, 0, 0, 0.1); }  // Haut\n\tif(left_keys.includes(ev.key) && activated) { engine.moveWindowRelative(-(speedMove)/openWindowWidth,  0                           , 0, 0, 0.1); }   // Gauche\n\tif(right_keys.includes(ev.key) && activated) { engine.moveWindowRelative( (speedMove)/openWindowWidth,  0                           , 0, 0, 0.1); }   // Droite\n\tif(rotate_keys.includes(ev.key) && activated) { engine.moveWindowRelative(0, 0,  0   ,  1, 0.1); }                             // Rotate \n\tif(unrotate_keys.includes(ev.key) && activated) { engine.moveWindowRelative(0, 0,  0   , -1, 0.1); }                             // Unrotate\n\tif(zoom_keys.includes(ev.key) && activated) { engine.moveWindowRelative(0, 0,  0.01,  0, 0.1); }                          // Zoom\n\tif(unzoom_keys.includes(ev.key) && activated) { engine.moveWindowRelative(0, 0, -0.01,  0, 0.1); }                          // Unzoom\n\tif(show_toc_keys.includes(ev.key) && activated) {\n\t    engine.showToC();\n\t    // document.querySelector(\".toc-slip\").style.display = document.querySelector(\".toc-slip\").style.display == \"none\" ? \"block\" : \"none\"; \n\t}   \n\tif(show_toc2_keys.includes(ev.key) && activated) {\n\t    // engine.showToC();\n\t    document.querySelector(\".toc-slip\").style.display = document.querySelector(\".toc-slip\").style.display == \"none\" ? \"block\" : \"none\"; \n\t}   \n\tif(next_keys.includes(ev.key) && activated) {\n\t    // console.log(ev);\n\t    if(ev.shiftKey)\n\t\tengine.nextSlip();\n\t    else    \n\t\tengine.next();\n\t}\n\telse if (previous_keys.includes(ev.key) && activated) {\n\t    if(ev.shiftKey)\n\t\tengine.previousSlip();\n\t    else    \n\t\tengine.previous();\n\t}\n\telse if (up_slip_keys.includes(ev.key) && activated) {\n\t    engine.pop();\n\t}\n    });    \n};\n","/* eslint-disable max-classes-per-file */\n// make a class for Point\nexport class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  set(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\n// make a class for the mouse data\nexport class Mouse extends Point {\n  constructor() {\n    super(0, 0);\n    this.down = false;\n    this.previous = new Point(0, 0);\n  }\n}\n","export const floodFillInterval = 100;\nexport const maxLineThickness = 50;\nexport const minLineThickness = 1;\nexport const lineThicknessRange = maxLineThickness - minLineThickness;\nexport const thicknessIncrement = 0.5;\nexport const minSmoothingFactor = 0.87;\nexport const initialSmoothingFactor = 0.85;\nexport const weightSpread = 10;\nexport const initialThickness = 2;\n","export default class AtramentEventTarget {\n  constructor() {\n    this.eventListeners = new Map();\n  }\n\n  addEventListener(eventName, handler) {\n    const handlers = this.eventListeners.get(eventName) || new Set();\n    handlers.add(handler);\n    this.eventListeners.set(eventName, handlers);\n  }\n\n  removeEventListener(eventName, handler) {\n    const handlers = this.eventListeners.get(eventName);\n    if (!handlers) return;\n    handlers.delete(handler);\n  }\n\n  dispatchEvent(eventName, data) {\n    const handlers = this.eventListeners.get(eventName);\n    if (!handlers) return;\n    [...handlers].forEach((handler) => handler(data));\n  }\n}\n","export const lineDistance = (x1, y1, x2, y2) => {\n  // calculate euclidean distance between (x1, y1) and (x2, y2)\n  const xs = (x2 - x1) ** 2;\n  const ys = (y2 - y1) ** 2;\n  return Math.sqrt(xs + ys);\n};\n\nexport const hexToRgb = (hexColor) => {\n  // Since input type color provides hex and ImageData accepts RGB need to transform\n  const m = hexColor.match(/^#?([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/i);\n  return [\n    parseInt(m[1], 16),\n    parseInt(m[2], 16),\n    parseInt(m[3], 16),\n  ];\n};\n\nexport const matchColor = (data, compR, compG, compB, compA) => (pixelPos) => {\n  // Pixel color equals comp color?\n  const r = data[pixelPos];\n  const g = data[pixelPos + 1];\n  const b = data[pixelPos + 2];\n  const a = data[pixelPos + 3];\n\n  return (r === compR && g === compG && b === compB && a === compA);\n};\n\n/* eslint-disable no-param-reassign */\nexport const colorPixel = (data, fillR, fillG, fillB, startColor, alpha) => {\n  const matcher = matchColor(data, ...startColor);\n\n  return (pixelPos) => {\n    // Update fill color in matrix\n    data[pixelPos] = fillR;\n    data[pixelPos + 1] = fillG;\n    data[pixelPos + 2] = fillB;\n    data[pixelPos + 3] = alpha;\n\n    if (!matcher(pixelPos + 4)) {\n      data[pixelPos + 4] = data[pixelPos + 4] * 0.01 + fillR * 0.99;\n      data[pixelPos + 4 + 1] = data[pixelPos + 4 + 1] * 0.01 + fillG * 0.99;\n      data[pixelPos + 4 + 2] = data[pixelPos + 4 + 2] * 0.01 + fillB * 0.99;\n      data[pixelPos + 4 + 3] = data[pixelPos + 4 + 3] * 0.01 + alpha * 0.99;\n    }\n\n    if (!matcher(pixelPos - 4)) {\n      data[pixelPos - 4] = data[pixelPos - 4] * 0.01 + fillR * 0.99;\n      data[pixelPos - 4 + 1] = data[pixelPos - 4 + 1] * 0.01 + fillG * 0.99;\n      data[pixelPos - 4 + 2] = data[pixelPos - 4 + 2] * 0.01 + fillB * 0.99;\n      data[pixelPos - 4 + 3] = data[pixelPos - 4 + 3] * 0.01 + alpha * 0.99;\n    }\n  };\n};\n/* eslint-enable no-param-reassign */\n","import { Mouse, Point } from './mouse.js';\nimport * as Constants from './constants.js';\nimport AtramentEventTarget from './events.js';\nimport * as Pixels from './pixels.js';\n\nconst DrawingMode = {\n  DRAW: 'draw',\n  ERASE: 'erase',\n  FILL: 'fill',\n  DISABLED: 'disabled',\n};\n\nconst PathDrawingModes = [DrawingMode.DRAW, DrawingMode.ERASE];\n\nexport default class Atrament extends AtramentEventTarget {\n  constructor(selector, config = {}) {\n    if (typeof window === 'undefined') {\n      throw new Error('Looks like we\\'re not running in a browser');\n    }\n\n    super();\n\n    // get canvas element\n    if (selector instanceof window.Node && selector.tagName === 'CANVAS') this.canvas = selector;\n    else if (typeof selector === 'string') this.canvas = document.querySelector(selector);\n    else throw new Error(`can't look for canvas based on '${selector}'`);\n    if (!this.canvas) throw new Error('canvas not found');\n\n    // set external canvas params\n    this.canvas.width = config.width || this.canvas.width;\n    this.canvas.height = config.height || this.canvas.height;\n\n    // create a mouse object\n    this.mouse = new Mouse();\n\n    // mousemove handler\n    const mouseMove = (event) => {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n\n      const rect = this.canvas.getBoundingClientRect();\n      const position = (event.changedTouches && event.changedTouches[0]) || event;\n      let x = position.offsetX;\n      let y = position.offsetY;\n\n      if (typeof x === 'undefined') {\n        x = position.clientX - rect.left;\n      }\n      if (typeof y === 'undefined') {\n        y = position.clientY - rect.top;\n      }\n\n      const { mouse } = this;\n      // draw if we should draw\n      if (mouse.down && PathDrawingModes.includes(this.modeInternal)) {\n        const { x: newX, y: newY } = this.draw(x, y, mouse.previous.x, mouse.previous.y);\n\n        if (!this.dirty\n          && this.modeInternal === DrawingMode.DRAW && (x !== mouse.x || y !== mouse.y)) {\n          this.dirty = true;\n          this.fireDirty();\n        }\n\n        mouse.set(x, y);\n        mouse.previous.set(newX, newY);\n      } else {\n        mouse.set(x, y);\n      }\n    };\n\n    // mousedown handler\n    const mouseDown = (event) => {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n      // update position just in case\n      mouseMove(event);\n\n      // if we are filling - fill and return\n      if (this.mode === DrawingMode.FILL) {\n        this.fill();\n        return;\n      }\n      // remember it\n      const { mouse } = this;\n      mouse.previous.set(mouse.x, mouse.y);\n      mouse.down = true;\n\n      this.beginStroke(mouse.previous.x, mouse.previous.y);\n    };\n\n    const mouseUp = (e) => {\n      if (this.mode === DrawingMode.FILL) {\n        return;\n      }\n\n      const { mouse } = this;\n\n      if (!mouse.down) {\n        return;\n      }\n\n      const position = (e.changedTouches && e.changedTouches[0]) || e;\n      const x = position.offsetX;\n      const y = position.offsetY;\n      mouse.down = false;\n\n      if (mouse.x === x && mouse.y === y && PathDrawingModes.includes(this.mode)) {\n        const { x: nx, y: ny } = this.draw(mouse.x, mouse.y, mouse.previous.x, mouse.previous.y);\n        mouse.previous.set(nx, ny);\n      }\n\n      this.endStroke(mouse.x, mouse.y);\n    };\n\n    // attach listeners\n    this.canvas.addEventListener('mousemove', mouseMove);\n    this.canvas.addEventListener('mousedown', mouseDown);\n    document.addEventListener('mouseup', mouseUp);\n    this.canvas.addEventListener('touchstart', mouseDown);\n    this.canvas.addEventListener('touchend', mouseUp);\n    this.canvas.addEventListener('touchmove', mouseMove);\n\n    // helper for destroying Atrament (removing event listeners)\n    this.destroy = () => {\n      this.clear();\n      this.canvas.removeEventListener('mousemove', mouseMove);\n      this.canvas.removeEventListener('mousedown', mouseDown);\n      document.removeEventListener('mouseup', mouseUp);\n      this.canvas.removeEventListener('touchstart', mouseDown);\n      this.canvas.removeEventListener('touchend', mouseUp);\n      this.canvas.removeEventListener('touchmove', mouseMove);\n    };\n\n    // set internal canvas params\n    this.context = this.canvas.getContext('2d');\n    this.context.globalCompositeOperation = 'source-over';\n    this.context.globalAlpha = 1;\n    this.context.strokeStyle = config.color || 'rgba(0,0,0,1)';\n    this.context.lineCap = 'round';\n    this.context.lineJoin = 'round';\n    this.context.translate(0.5, 0.5);\n\n    this.filling = false;\n    this.fillStack = [];\n\n    // set drawing params\n    this.recordStrokes = false;\n    this.strokeMemory = [];\n\n    this.smoothing = Constants.initialSmoothingFactor;\n    this.thickness = Constants.initialThickness;\n    this.targetThickness = this.thickness;\n    this.weightInternal = this.thickness;\n    this.maxWeight = this.thickness + Constants.weightSpread;\n\n    this.modeInternal = DrawingMode.DRAW;\n    this.adaptiveStroke = true;\n\n    // update from config object\n    ['weight', 'smoothing', 'adaptiveStroke', 'mode']\n      .forEach((key) => {\n        if (config[key] !== undefined) {\n          this[key] = config[key];\n        }\n      });\n  }\n\n  /**\n   * Begins a stroke at a given position\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  beginStroke(x, y) {\n    this.context.beginPath();\n    this.context.moveTo(x, y);\n\n    if (this.recordStrokes) {\n      this.strokeTimestamp = performance.now();\n      this.strokeMemory.push({\n        point: new Point(x, y),\n        time: performance.now() - this.strokeTimestamp,\n      });\n    }\n    this.dispatchEvent('strokestart', { x, y });\n  }\n\n  /**\n   * Ends a stroke at a given position\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  endStroke(x, y) {\n    this.context.closePath();\n\n    if (this.recordStrokes) {\n      this.strokeMemory.push({\n        point: new Point(x, y),\n        time: performance.now() - this.strokeTimestamp,\n      });\n    }\n    this.dispatchEvent('strokeend', { x, y });\n\n    if (this.recordStrokes) {\n      this.dispatchEvent('strokerecorded', { stroke: this.currentStroke });\n    }\n    this.strokeMemory = [];\n    delete (this.strokeTimestamp);\n  }\n\n  /**\n   * Draws a smooth quadratic curve with adaptive stroke thickness\n   * between two points\n   *\n   * @param {number} x current X coordinate\n   * @param {number} y current Y coordinate\n   * @param {number} prevX previous X coordinate\n   * @param {number} prevY previous Y coordinate\n   */\n  draw(x, y, prevX, prevY) {\n    if (this.recordStrokes) {\n      this.strokeMemory.push({\n        point: new Point(x, y),\n        time: performance.now() - this.strokeTimestamp,\n      });\n\n      this.dispatchEvent('pointdrawn', { stroke: this.currentStroke });\n    }\n\n    const { context } = this;\n    // calculate distance from previous point\n    const rawDist = Pixels.lineDistance(x, y, prevX, prevY);\n\n    // now, here we scale the initial smoothing factor by the raw distance\n    // this means that when the mouse moves fast, there is more smoothing\n    // and when we're drawing small detailed stuff, we have more control\n    // also we hard clip at 1\n    const smoothingFactor = Math.min(\n      Constants.minSmoothingFactor,\n      this.smoothing + (rawDist - 60) / 3000,\n    );\n\n    // calculate processed coordinates\n    const procX = x - (x - prevX) * smoothingFactor;\n    const procY = y - (y - prevY) * smoothingFactor;\n\n    // recalculate distance from previous point, this time relative to the smoothed coords\n    const dist = Pixels.lineDistance(procX, procY, prevX, prevY);\n\n    if (this.adaptiveStroke) {\n      // calculate target thickness based on the new distance\n      this.targetThickness = ((dist - Constants.minLineThickness) / Constants.lineThicknessRange)\n        * (this.maxWeight - this.weightInternal) + this.weightInternal;\n      // approach the target gradually\n      if (this.thickness > this.targetThickness) {\n        this.thickness -= Constants.thicknessIncrement;\n      } else if (this.thickness < this.targetThickness) {\n        this.thickness += Constants.thicknessIncrement;\n      }\n      // set line width\n      context.lineWidth = this.thickness;\n    } else {\n      // line width is equal to default weight\n      context.lineWidth = this.weightInternal;\n    }\n\n    // draw using quad interpolation\n    context.quadraticCurveTo(prevX, prevY, procX, procY);\n    context.stroke();\n\n    return { x: procX, y: procY };\n  }\n\n  get color() {\n    return this.context.strokeStyle;\n  }\n\n  set color(c) {\n    if (typeof c !== 'string') throw new Error('wrong argument type');\n    this.context.strokeStyle = c;\n  }\n\n  get weight() {\n    return this.weightInternal;\n  }\n\n  set weight(w) {\n    if (typeof w !== 'number') throw new Error('wrong argument type');\n    this.weightInternal = w;\n    this.thickness = w;\n    this.targetThickness = w;\n    this.maxWeight = w + Constants.weightSpread;\n  }\n\n  get mode() {\n    return this.modeInternal;\n  }\n\n  set mode(m) {\n    if (typeof m !== 'string') throw new Error('wrong argument type');\n    switch (m) {\n      case DrawingMode.ERASE:\n        this.modeInternal = DrawingMode.ERASE;\n        this.context.globalCompositeOperation = 'destination-out';\n        break;\n      case DrawingMode.FILL:\n        this.modeInternal = DrawingMode.FILL;\n        this.context.globalCompositeOperation = 'source-over';\n        break;\n      case DrawingMode.DISABLED:\n        this.modeInternal = DrawingMode.DISABLED;\n        break;\n      default:\n        this.modeInternal = DrawingMode.DRAW;\n        this.context.globalCompositeOperation = 'source-over';\n        break;\n    }\n  }\n\n  get currentStroke() {\n    return {\n      points: this.strokeMemory.slice(),\n      mode: this.mode,\n      weight: this.weight,\n      smoothing: this.smoothing,\n      color: this.color,\n      adaptiveStroke: this.adaptiveStroke,\n    };\n  }\n\n  isDirty() {\n    return !!this.dirty;\n  }\n\n  fireDirty() {\n    this.dispatchEvent('dirty');\n  }\n\n  clear() {\n    if (!this.isDirty) {\n      return;\n    }\n\n    this.dirty = false;\n    this.dispatchEvent('clean');\n\n    // make sure we're in the right compositing mode, and erase everything\n    if (this.modeInternal === DrawingMode.ERASE) {\n      this.modeInternal = DrawingMode.DRAW;\n      this.context.clearRect(-10, -10, this.canvas.width + 20, this.canvas.height + 20);\n      this.modeInternal = DrawingMode.ERASE;\n    } else {\n      this.context.clearRect(-10, -10, this.canvas.width + 20, this.canvas.height + 20);\n    }\n  }\n\n  toImage() {\n    return this.canvas.toDataURL();\n  }\n\n  fill() {\n    const { mouse } = this;\n    const { context } = this;\n    // converting to Array because Safari 9\n    const startColor = Array.from(context.getImageData(mouse.x, mouse.y, 1, 1).data);\n\n    if (!this.filling) {\n      const { x, y } = mouse;\n      this.dispatchEvent('fillstart', { x, y });\n      this.filling = true;\n      setTimeout(() => {\n        this.floodFill(mouse.x, mouse.y, startColor);\n      }, Constants.floodFillInterval);\n    } else {\n      this.fillStack.push([\n        mouse.x,\n        mouse.y,\n        startColor,\n      ]);\n    }\n  }\n\n  floodFill(_startX, _startY, startColor) {\n    const { context } = this;\n    const startX = Math.floor(_startX);\n    const startY = Math.floor(_startY);\n    const canvasWidth = context.canvas.width;\n    const canvasHeight = context.canvas.height;\n    const pixelStack = [[startX, startY]];\n    // hex needs to be trasformed to rgb since colorLayer accepts RGB\n    const fillColor = Pixels.hexToRgb(this.color);\n    // Need to save current context with colors, we will update it\n    const colorLayer = context.getImageData(0, 0, context.canvas.width, context.canvas.height);\n    const alpha = Math.min(context.globalAlpha * 10 * 255, 255);\n    const colorPixel = Pixels.colorPixel(colorLayer.data, ...fillColor, startColor, alpha);\n    const matchColor = Pixels.matchColor(colorLayer.data, ...startColor);\n    const matchFillColor = Pixels.matchColor(colorLayer.data, ...[...fillColor, 255]);\n\n    // check if we're trying to fill with the same colour, if so, stop\n    if (matchFillColor((startY * context.canvas.width + startX) * 4)) {\n      this.filling = false;\n      this.dispatchEvent('fillend', {});\n      return;\n    }\n\n    while (pixelStack.length) {\n      const newPos = pixelStack.pop();\n      const x = newPos[0];\n      let y = newPos[1];\n\n      let pixelPos = (y * canvasWidth + x) * 4;\n\n      while (y-- >= 0 && matchColor(pixelPos)) {\n        pixelPos -= canvasWidth * 4;\n      }\n      pixelPos += canvasWidth * 4;\n\n      ++y;\n\n      let reachLeft = false;\n      let reachRight = false;\n\n      while (y++ < canvasHeight - 1 && matchColor(pixelPos)) {\n        colorPixel(pixelPos);\n\n        if (x > 0) {\n          if (matchColor(pixelPos - 4)) {\n            if (!reachLeft) {\n              pixelStack.push([x - 1, y]);\n              reachLeft = true;\n            }\n          } else if (reachLeft) {\n            reachLeft = false;\n          }\n        }\n\n        if (x < canvasWidth - 1) {\n          if (matchColor(pixelPos + 4)) {\n            if (!reachRight) {\n              pixelStack.push([x + 1, y]);\n              reachRight = true;\n            }\n          } else if (reachRight) {\n            reachRight = false;\n          }\n        }\n\n        pixelPos += canvasWidth * 4;\n      }\n    }\n\n    // Update context with filled bucket!\n    context.putImageData(colorLayer, 0, 0);\n\n    if (this.fillStack.length) {\n      this.floodFill(...this.fillStack.shift());\n    } else {\n      this.filling = false;\n      this.dispatchEvent('fillend', {});\n    }\n  }\n}\n","import { cloneNoSubslip, myQueryAll, replaceSubslips } from './util';\nimport { Atrament } from 'atrament';\nexport default function Slip(name, fullName, actionL, ng, options) {\n\n    // ******************************\n    // Action List\n    // ******************************\n\n    this.generateActionList = function() {\n\tlet newActionList = [];\n\tthis.queryAll(\"slip-slip[enter-at]\").forEach((slip) => {\n\t    newActionList[slip.getAttribute(\"enter-at\")] = new Slip(slip, \"\", [], ng, {});\n\t});\n\treturn newActionList;\n    };\n    this.addSubSlips = function() {\n\tlet newActionList = [];\n\tthis.queryAll(\"slip-slip[enter-at]\").forEach((slip) => {\n\t    this.setNthAction(slip.getAttribute(\"enter-at\"), new Slip(slip, \"\", [], ng, {}));\n\t});\n\treturn newActionList;\n    };\n    let actionList = actionL;// || this.generateActionList();\n    this.setAction = (actionL) => {actionList = actionL;};\n    this.getActionList = () => {\n\tlet ret = [];\n\tfor(let i = 0;i <= this.getMaxNext(); i++) {\n\t    if(this.pauseSlipList[i] instanceof Slip)\n\t\tret[i] = this.pauseSlipList[i];\n\t    else if(typeof actionList[i] == \"function\" || actionList[i] instanceof Slip)\n\t\tret[i] = actionList[i];\n\t    else\n\t\tret[i] = () => {};\n\t}\n\treturn ret;\n    };\n    this.setNthAction = (n,action) => {actionList[n] = action;};\n    this.getCurrentSubSlip = () => {\n\tif(actionList[this.getActionIndex()] instanceof Slip)\n\t    return actionList[this.getActionIndex()];\n\tif(this.pauseSlipList[this.getActionIndex()] instanceof Slip)\n\t    return this.pauseSlipList[this.getActionIndex()];\n\treturn false;\n    };\n    this.nextStageNeedGoto = () => {\n\tif(actionList[this.getActionIndex()+1] instanceof Slip)\n\t    return false;\n\tif(this.pauseSlipList[this.getActionIndex()+1] instanceof Slip)\n\t    return false;\n\tif(this.getActionIndex() >= this.getMaxNext())\n\t    return false;\n\treturn true;\n    };\n    this.getSubSlipList = function () {\n\treturn this.getActionList().filter((action) => action instanceof Slip);\n    };\n\n    // ******************************\n    // Action Index\n    // ******************************\n    let actionIndex = -1;\n    this.setActionIndex = (actionI) => actionIndex = actionI;\n    this.getActionIndex = () => actionIndex;\n    this.getMaxNext = () => {\n\tif(this.maxNext)\n\t    return this.maxNext;\n\tlet maxTemp = actionList.length;\n\t[\"mk-visible-at\",\n\t \"mk-hidden-at\",\n\t \"mk-emphasize-at\",\n\t \"mk-unemphasize-at\",\n\t \"emphasize-at\",\n\t \"chg-visib-at\",\n\t \"up-at\",\n\t \"down-at\",\n\t \"center-at\",\n\t \"static-at\",\n\t \"exec-at\",\n\t \"enter-at\",\n\t \"focus-at\",\n\t \"unfocus-at\",\n\t \"figure-next-at\",\n\t \"figure-previous-at\",\n\t].forEach((attr) => {\n\t    this.queryAll(\"*[\"+attr+\"]\").forEach((elem) => {\n\t\telem.getAttribute(attr).split(\" \").forEach((strMax) => {\n\t\t    maxTemp = Math.max(Math.abs(parseInt(strMax)),maxTemp);\n\t\t});\n\t    });\n\t});\n\tlet sumArray = this.queryAll(\"[pause], [step], [auto-enter], [immediate-enter]\").map((elem) => {\n\t    if(elem.hasAttribute(\"pause\") && elem.getAttribute(\"pause\") != \"\")\n\t\treturn parseInt(elem.getAttribute(\"pause\"));\n\t    if(elem.hasAttribute(\"step\") && elem.getAttribute(\"step\") != \"\")\n\t\treturn parseInt(elem.getAttribute(\"step\"));\n\t    return 1; });\n\tmaxTemp = Math.max(maxTemp, sumArray.reduce((a,b) => a+b, 0));\n\tthis.maxNext = maxTemp;\n\treturn maxTemp;\t\n    };\n    \n    // ******************************\n    // Queries\n    // ******************************\n    this.queryAll = (quer) => {\n\treturn myQueryAll(this.element, quer);\n\t// let allElem = Array.from(this.element.querySelectorAll(quer));\n\t// let other = Array.from(this.element.querySelectorAll(\"#\"+this.name+\" slip \"+quer));\n\t// return allElem.filter(value => !other.includes(value));\n    };\n    this.query = (quer) => {\n\tif(typeof quer != \"string\") return quer;\n\treturn this.queryAll(quer)[0];\n    };\n    this.findSubslipByID = (id) => {\n\tlet goodSubslip = this.getSubSlipList().find((subslip) => {\n\t    if(subslip.name == id)\n\t\treturn 1;\n\t    return subslip.findSubslipByID(id);\n\t});\n\tif(!goodSubslip)\n\t    return false;\n\tif (goodSubslip.name == id) \n\t    return goodSubslip;\n\treturn goodSubslip.findSubslipByID(id);\n    };\n    \n    // ******************************\n    // Coordinates\n    // ******************************\n    this.findSlipCoordinate = () => { // rename to getCoordInUniverse\n\tlet coord = engine.getCoordinateInUniverse(this.element);\n\tcoord.scale *= this.scale;\n\tcoord.y = coord.y + 0.5*coord.scale;\n\tcoord.x = coord.centerX;\n\treturn coord;\n    };\n\n\n    // ******************************\n    // Pause functions\n    // ******************************\n    this.updatePauseAncestors = () => {\n\tthis.queryAll(\".pauseAncestor\").forEach((elem) => {elem.classList.remove(\"pauseAncestor\");});\n\tlet pause = this.query(\"[pause]\");\n\twhile(pause && pause.tagName != \"SLIP-SLIP\") {\n\t    pause.classList.add(\"pauseAncestor\");\n\t    pause = pause.parentElement;\n\t};\n    };\n    this.unpause = (pause) => {\n\tif(pause.hasAttribute(\"static-at-unpause\")) {\n\t    if(pause.getAttribute(\"static-at-unpause\") == \"\")\n\t\tthis.makeStatic(pause);\n\t    else\n\t\tpause.getAttribute(\"static-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.makeStatic(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"unstatic-at-unpause\")) {\n\t    if(pause.getAttribute(\"unstatic-at-unpause\") == \"\")\n\t\tthis.makeUnStatic(pause);\n\t    else\n\t\tpause.getAttribute(\"unstatic-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.makeUnStatic(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"down-at-unpause\")) {\n\t    if(pause.getAttribute(\"down-at-unpause\") == \"\")\n\t\tthis.moveDownTo(pause, 1);\n\t    else\n\t\tthis.moveDownTo(\"#\"+pause.getAttribute(\"down-at-unpause\"), 1);\t\t\t\n\t}\n\tif(pause.hasAttribute(\"up-at-unpause\")) {\n\t    if(pause.getAttribute(\"up-at-unpause\") == \"\")\n\t\tthis.moveUpTo(pause, 1);\n\t    else\n\t\tthis.moveUpTo(\"#\"+pause.getAttribute(\"up-at-unpause\"), 1);\n\t}\n\tif(pause.hasAttribute(\"center-at-unpause\")) {\n\t    if(pause.getAttribute(\"center-at-unpause\") == \"\")\n\t\tthis.moveCenterTo(pause, 1);\n\t    else\n\t\tthis.moveCenterTo(\"#\"+pause.getAttribute(\"center-at-unpause\"), 1);\n\t}\n\tif(pause.hasAttribute(\"exec-at-unpause\")) {\n\t    if(pause.getAttribute(\"exec-at-unpause\") == \"\")\n\t\tthis.executeScript(pause);\n\t    else\n\t\tpause.getAttribute(\"exec-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.executeScript(\"#\"+strID);\t\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"reveal-at-unpause\")) {\n\t    if(pause.getAttribute(\"reveal-at-unpause\") == \"\")\n\t\tthis.reveal(pause);\n\t    else\n\t\tpause.getAttribute(\"reveal-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.reveal(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"hide-at-unpause\")) {\n\t    if(pause.getAttribute(\"hide-at-unpause\") == \"\")\n\t\tthis.hide(pause);\n\t    else\n\t\tpause.getAttribute(\"hide-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.hide(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"figure-set-at-unpause\")) {\n\t    let [figureID, figureStep] = pause.getAttribute(\"figure-set-at-unpause\").split(\" \");\n\t    this.query(\"#\"+figureID).figureStep = figureStep;\n\t}\n\tif(pause.hasAttribute(\"figure-next-at-unpause\")) {\n\t    pause.getAttribute(\"figure-next-at-unpause\").split(\" \").map((figureID) => {\n\t\tthis.query(\"#\"+figureID).figureStep++;\n\t    });\n\t}\n\tif(pause.hasAttribute(\"figure-previous-at-unpause\")) {\n\t    pause.getAttribute(\"figure-previous-at-unpause\").split(\" \").map((figureID) => {\n\t\tthis.query(\"#\"+figureID).figureStep--;\n\t    });\n\t}\n\tif(pause.hasAttribute(\"focus-at-unpause\")) {\n\t    if(pause.getAttribute(\"focus-at-unpause\") == \"\")\n\t\tthis.focus(pause);\n\t    else\n\t\tthis.focus(\"#\"+pause.getAttribute(\"focus-at-unpause\"));\n\t}\n\tif(pause.hasAttribute(\"emph-at-unpause\")) {\n\t    if(pause.getAttribute(\"emph-at-unpause\") == \"\")\n\t\tthis.makeEmph(pause);\n\t    else\n\t\tpause.getAttribute(\"emph-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.makeEmph(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"unemph-at-unpause\")) {\n\t    if(pause.getAttribute(\"unemph-at-unpause\") == \"\")\n\t\tthis.makeUnEmph(pause);\n\t    else\n\t\tpause.getAttribute(\"unemph-at-unpause\").split(\" \").map((strID) => {\n\t\t    this.makeUnEmph(\"#\"+strID);\n\t\t});\n\t}\n\tif(pause.hasAttribute(\"unfocus-at-unpause\")){\n\t    if(pause.getAttribute(\"unfocus-at-unpause\") == \"\")\n\t\tthis.unfocus(pause);\n\t    else\n\t\tthis.unfocus(\"#\"+pause.getAttribute(\"unfocus-at-unpause\"));\n\t}\n    };\n    this.incrPause = () => {\n\tlet pause = this.query(\"[pause], [auto-enter]:not([auto-enter=\\\"0\\\"]), [immediate-enter]:not([immediate-enter=\\\"0\\\"]), [step]\");\n\t// let pause = this.query(\"[pause]\");\n\tif(pause) {\n\t    if(pause.hasAttribute(\"step\")) {\n\t\tif(!pause.getAttribute(\"step\")) \n\t\t    pause.setAttribute(\"step\", 1);\n\t\tlet d = pause.getAttribute(\"step\");\n\t\tif (d <= 1){\n\t\t    pause.removeAttribute(\"step\");\n\t\t    this.unpause(pause);\n\t\t} else\n\t\t    pause.setAttribute(\"step\", d-1);\n\t    }\n\t    if(pause.hasAttribute(\"auto-enter\")) {\n\t\tpause.setAttribute(\"auto-enter\", 0);\n\t\tthis.unpause(pause);\n\t    }\n\t    if(pause.hasAttribute(\"immediate-enter\")) {\n\t\tpause.setAttribute(\"immediate-enter\", 0);\n\t\tthis.unpause(pause);\n\t    }\n\t    if(pause.hasAttribute(\"pause\")) {\n\t\tif(!pause.getAttribute(\"pause\")) \n\t\t    pause.setAttribute(\"pause\", 1);\n\t\tlet d = pause.getAttribute(\"pause\");\n\t\tif (d <= 1){\n\t\t    pause.removeAttribute(\"pause\");\n\t\t    this.unpause(pause);\n\t\t} else\n\t\t    pause.setAttribute(\"pause\", d-1);\n\t\tthis.updatePauseAncestors();\n\t    }\n\t}\n    };\n\n    // ******************************\n    // Next functions\n    // ******************************\n    this.doAttributes = () => {\n\tthis.queryAll(\"*[mk-hidden-at]\").forEach((elem) => {\n\t    let hiddenAt = elem.getAttribute(\"mk-hidden-at\").split(\" \").map((str) => parseInt(str));\n\t    if(hiddenAt.includes(actionIndex))\n\t\telem.style.opacity = \"0\";});\t\n\tthis.queryAll(\"*[mk-visible-at]\").forEach((elem) => {\n\t    let visibleAt = elem.getAttribute(\"mk-visible-at\").split(\" \").map((str) => parseInt(str));\n\t    if(visibleAt.includes(actionIndex))\n\t\telem.style.opacity = \"1\";});\t\n\tthis.queryAll(\"*[mk-emphasize-at]\").forEach((elem) => {\n\t    let emphAt = elem.getAttribute(\"mk-emphasize-at\").split(\" \").map((str) => parseInt(str));\n\t    if(emphAt.includes(actionIndex))\n\t\telem.classList.add(\"emphasize\");});\t\n\tthis.queryAll(\"*[mk-unemphasize-at]\").forEach((elem) => {\n\t    let unemphAt = elem.getAttribute(\"mk-unemphasize-at\").split(\" \").map((str) => parseInt(str));\n\t    if(unemphAt.includes(actionIndex))\n\t\telem.classList.remove(\"emphasize\");});\t\n\tthis.queryAll(\"*[emphasize-at]\").forEach((elem) => {\n\t    let emphAt = elem.getAttribute(\"emphasize-at\").split(\" \").map((str) => parseInt(str));\n\t    if(emphAt.includes(actionIndex))\n\t\telem.classList.add(\"emphasize\");\n\t    else\n\t\telem.classList.remove(\"emphasize\");\n\t});\t\n\tthis.queryAll(\"*[chg-visib-at]\").forEach((elem) => {\n\t    let visibAt = elem.getAttribute(\"chg-visib-at\").split(\" \").map((str) => parseInt(str));\n\t    if(visibAt.includes(actionIndex))\n\t\telem.style.opacity = \"1\";\n\t    if(visibAt.includes(-actionIndex))\n\t\telem.style.opacity = \"0\";\n\t});\t\n\tthis.queryAll(\"*[static-at]\").forEach((elem) => {\n\t    let staticAt = elem.getAttribute(\"static-at\").split(\" \").map((str) => parseInt(str));\n\t    if(actionIndex < 0) return;\n\t    if(staticAt.includes(-actionIndex)){\n\t\tthis.makeUnStatic(elem);\n\t\t// elem.style.position = \"absolute\";\n\t\t// elem.style.visibility = \"hidden\";\n\t    }\n\t    else if(staticAt.includes(actionIndex)) {\n\t\tthis.makeStatic(elem);\n\t\t// elem.style.position = \"static\";\n\t\t// elem.style.visibility = \"visible\";\n\t    }\n\t});\t    \n\tthis.queryAll(\"*[down-at]\").forEach((elem) => {\n\t    let goDownTo = elem.getAttribute(\"down-at\").split(\" \").map((str) => parseInt(str));\n\t    if(goDownTo.includes(actionIndex))\n\t\tthis.moveDownTo(elem, 1);\n\t});\n\tthis.queryAll(\"*[up-at]\").forEach((elem) => {\n\t    let goTo = elem.getAttribute(\"up-at\").split(\" \").map((str) => parseInt(str));\n\t    if(goTo.includes(actionIndex))\n\t\tthis.moveUpTo(elem, 1);});\n\tthis.queryAll(\"*[center-at]\").forEach((elem) => {\n\t    let goDownTo = elem.getAttribute(\"center-at\").split(\" \").map((str) => parseInt(str));\n\t    if(goDownTo.includes(actionIndex))\n\t\tthis.moveCenterTo(elem, 1);});\t\n\tthis.queryAll(\"*[focus-at]\").forEach((elem) => {\n\t    let focus = elem.getAttribute(\"focus-at\").split(\" \").map((str) => parseInt(str));\n\t    if(focus.includes(actionIndex))\n\t\tthis.focus(elem, 1);});\t\n\tthis.queryAll(\"*[unfocus-at]\").forEach((elem) => {\n\t    let focus = elem.getAttribute(\"unfocus-at\").split(\" \").map((str) => parseInt(str));\n\t    if(focus.includes(actionIndex))\n\t\tthis.unfocus(elem, 1);});\t\n\tthis.queryAll(\"*[exec-at]\").forEach((elem) => {\n\t    let toExec = elem.getAttribute(\"exec-at\").split(\" \").map((str) => parseInt(str));\n\t    if(toExec.includes(actionIndex))\n\t\tthis.executeScript(elem);});\t\n\tthis.queryAll(\"*[figure-next-at]\").forEach((elem) => {\n\t    let toFigureNext = elem.getAttribute(\"figure-next-at\").split(\" \").map((str) => parseInt(str));\n\t    if(toFigureNext.includes(actionIndex))\n\t\telem.figureStep++;});\t\n\tthis.queryAll(\"*[figure-previous-at]\").forEach((elem) => {\n\t    let toFigureNext = elem.getAttribute(\"figure-previous-at\").split(\" \").map((str) => parseInt(str));\n\t    if(toFigureNext.includes(actionIndex))\n\t\telem.figureStep--;});\t\n    };\n    this.incrIndex = () => {\n\tactionIndex = actionIndex+1;\n\tthis.doAttributes();\n\tif(actionIndex>0)\n\t    this.incrPause();\n\tthis.updateToC();\n    };\n    this.next = function () {\n\tif(actionIndex >= this.getMaxNext())\n\t    return false;\n\tthis.incrIndex();\n\tif(typeof actionList[actionIndex] == \"function\") {\n\t    actionList[actionIndex](this);\n\t}\n\tif(actionList[actionIndex] instanceof Slip){\n\t    return actionList[actionIndex];\n\t}\n\tif(this.pauseSlipList[actionIndex] instanceof Slip)\n\t    return this.pauseSlipList[actionIndex];\n\t// let nextSlip = this.query(\"[pause], [auto-enter]\");\n\t// if(nextSlip.hasAttribute(\"auto-enter\"))\n\t//     return \n\treturn true;\n    };\n    this.previous = () => {\n\tlet savedActionIndex = this.getActionIndex();\n\tlet savedDelay = this.currentDelay;\n\tthis.getEngine().setDoNotMove(true);\n\tlet savedClass = this.element.className;\n\tlet r = this.doRefresh();\n\tthis.element.className = savedClass;\n\tif(savedActionIndex == -1)\n\t    return false;\n \tlet toReturn;\n\twhile(this.getActionIndex()<savedActionIndex-1){\n\t    toReturn = this.next();\n\t}\n\t// if(!this.nextStageNeedGoto())\n\t//     this.getEngine().setDoNotMove(false);\n\t// while(this.getActionIndex()<savedActionIndex-1)\n\t//     toReturn = this.next();\n\tsetTimeout(() => {\n\t    this.getEngine().setDoNotMove(false);\n\t    // this.getEngine().gotoSlip(this, {delay:savedDelay});\n\t},0);\n\t// this.getEngine().gotoSlip(this, {delay:savedDelay});\n\treturn toReturn;\n\n\t// return this.next;\n    };\n\n    // ******************************\n    // ToC functions\n    // ******************************\n    this.setTocElem = (tocElem) => {this.tocElem = tocElem;};\n    this.updateToC = () => {\n\tif(!this.tocElem)\n\t    return;\n\tif(!this.ToCList)\n\t    this.ToCList = myQueryAll(this.tocElem, \"li\", \"li\");\n\tlet i;\n\tfor(i=0;i<this.getActionIndex(); i++) {\n\t    this.ToCList[i].classList.remove(\"before\", \"after\", \"current\");\n\t    this.ToCList[i].classList.add(\"before\");\t    \n\t}\n\tif(i<=this.getActionIndex()) {\n\t    this.ToCList[i].classList.remove(\"before\", \"after\", \"current\");\n\t    this.ToCList[i].classList.add(\"current\");\n\t    i++;\n\t}\n\tfor(i;i<=this.getMaxNext(); i++) {\n\t    this.ToCList[i].classList.remove(\"before\", \"after\", \"current\");\n\t    this.ToCList[i].classList.add(\"after\");\n\t}\t\n    };\n    this.firstVisit = () => {\n\tthis.updateToC();\n\tif(options.firstVisit)\n\t    options.firstVisit(this);\n    };\n    this.init = () => {\n\tthis.queryAll(\"*[chg-visib-at]\").forEach((elem) => {\n\t    elem.style.opacity = \"0\";\n\t});\t\n\t// this.queryAll(\"*[static-at]\").forEach((elem) => {\n\t//     elem.style.position = \"absolute\";\n\t//     elem.style.visibility = \"hidden\";\n\t// });\t\n//\tthis.doAttributes();\n\tthis.updatePauseAncestors();\n\tif(options.init)\n\t    options.init(this);\n    };\n\n    // ******************************\n    // Refreshes\n    // ******************************\n    this.refresh = () => {\n\tif(actionList[actionIndex] instanceof Slip)\n\t    actionList[actionIndex].refresh();\n\telse\n\t    this.doRefresh();\n    };\n    this.refreshAll = () => {\n\tactionList.filter((elem) => elem instanceof Slip).forEach((subslip) => { subslip.refreshAll();});\n\tthis.pauseSlipList.filter((elem) => elem instanceof Slip).forEach((subslip) => { subslip.refreshAll();});\n\tthis.doRefresh();\n    };\n    this.doRefresh = () => {\n\tthis.setActionIndex(-1);\n\tlet subSlipList = myQueryAll(this.element, \"slip-slip\");\n\tlet clone = clonedElement.cloneNode(true);\n\treplaceSubslips(clone, subSlipList, this.sketchpadCanvas, this.sketchpadCanvasHighlight, this.element);\n        // let old_element = this.element;\n\tthis.element = clone;\n\t// old_element.replaceWith(this.element);\n//\tsetTimeout(() => {\n//\t},0);\n//         console.log(\"GO\", this.element, clone)\n// \tsetTimeout(() => {\n// \tthis.element.parentElement.insertBefore(clone, this.element);\n// //\tthis.element = clone;\n// \t},10);\n\tthis.init();\n\tthis.firstVisit();\n\tdelete(this.currentX);\n\tdelete(this.currentY);\n\tdelete(this.currentDelay);\n\tthis.getEngine().gotoSlip(this);\n\tsetTimeout(() => {\n\t    this.reObserve();\n\t},0);\n    };\n\n    this.reObserve = () => {\n        return;\n\tlet slipScaleContainer = this.element.firstChild;\n\tif(slipScaleContainer && slipScaleContainer.classList && slipScaleContainer.classList.contains(\"slip-scale-container\"))\n\t    this.resizeObserver.observe(slipScaleContainer);\n\tthis.getSubSlipList().forEach((slip) => {\n\t    slip.reObserve();\n\t});\n    };\n\n    // ******************************\n    // Movement, execution and hide/show\n    // ******************************\n    this.makeUnStatic = (selector, delay, opacity) => {\n\tlet elem = this.query(selector);\n\t// setTimeout(() => {\n\t//     elem.style.overflow = \"hidden\"; \n\t//     setTimeout(() => {\n\t// \telem.style.transition = \"height \"+ (typeof(delay) == \"undefined\" ? \"1s\" : (delay+\"s\"));\n\t// \tif(opacity)\n\t// \t    elem.style.transition += \", opacity \"+ (typeof(delay) == \"undefined\" ? \"1s\" : (delay+\"s\"));\n\t// \telem.style.height = (elem.offsetHeight+\"px\");\n\t// \tif(opacity)\n\t// \t    elem.style.opacity = \"1\";\n\t// \tsetTimeout(() => {\n\t// \t    if(opacity)\n\t// \t    \telem.style.opacity = \"0\"; \n\t// \t    elem.style.height = (\"0px\");}, 10);\n\t//     }, 0);\n\t// },0);\n\telem.style.position = \"absolute\";\n\telem.style.visibility = \"hidden\";\n    };\n    this.makeStatic = (selector) => {\n\tlet elem = this.query(selector);\n\telem.style.position = \"static\";\n\telem.style.visibility = \"visible\";\n    };\n    this.makeEmph = (selector) => {\n\tlet elem = this.query(selector);\n\telem.classList.add(\"emphasize\");\n    };\n    this.makeUnEmph = (selector) => {\n\tlet elem = this.query(selector);\n\telem.classList.remove(\"emphasize\");\n    };\n    this.unfocus = (selector) => {\n\tthis.getEngine().gotoSlip(this, { delay: 1});\n    };\n    this.focus = (selector) => {\n\tlet elem = this.query(selector);\n\tthis.getEngine().moveToElement(elem, {});\n    };\n\n    this.executeScript = (selector) => {\n\tlet elem;\n\tif(typeof selector == \"string\") elem = this.query(selector);\n\telse elem = selector;\n\t(new Function(\"slip\",elem.innerHTML))(this);\n    };\n    this.moveUpTo = (selector, delay,  offset) => {\n\tsetTimeout(() => {\n\t    let elem;\n\t    if(typeof selector == \"string\") elem = this.query(selector);\n\t    else elem = selector;\n\t    if (typeof offset == \"undefined\") offset = 0.0125;\n\t    let coord = this.findSlipCoordinate();\n\t    let d = ((elem.offsetTop)/1080-offset)*coord.scale;\n\t    this.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t    // this.currentX = coord.x;\n\t    // this.currentY = coord.y+d;\n\t    // this.currentDelay = delay;\n\t    // engine.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t},0);\n    };\n    this.moveDownTo = (selector, delay, offset) => {\n\tsetTimeout(() => {\n\t    let elem;\n\t    if(typeof selector == \"string\") elem = this.query(selector);\n\t    else elem = selector;\n\t    if (typeof offset == \"undefined\") offset = 0.0125;\n\t    let coord = this.findSlipCoordinate();\n\t    let d = ((elem.offsetTop+elem.offsetHeight)/1080 - 1 + offset)*coord.scale;\n\t    this.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t    // this.currentX = coord.x;\n\t    // this.currentY = coord.y+d;\n\t    // this.currentDelay = delay;\n\t    // engine.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t},0);\n    };\n    this.moveCenterTo = (selector, delay, offset) => {\n\tsetTimeout(() => {\n\t    let elem;\n\t    if(typeof selector == \"string\") elem = this.query(selector);\n\t    else elem = selector;\n\t    if (typeof offset == \"undefined\") offset = 0;\n\t    let coord = this.findSlipCoordinate();\n\t    let d = ((elem.offsetTop+elem.offsetHeight/2)/1080-1/2+offset)*coord.scale;\n\t    this.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t    // this.currentX = coord.x;\n\t    // this.currentY = coord.y+d;\n\t    // this.currentDelay = delay;\n\t    // engine.moveWindow(coord.x, coord.y+d, coord.scale, this.rotate, delay);\n\t},0);\n    };\n    this.restoreWindow = () => {\n\tthis.getEngine\n    };\n    this.moveWindow = (x,y,scale,rotate, delay) => {\n\tthis.currentX = x;\n\tthis.currentY = y;\n\tthis.currentScale = scale;\n\tthis.currentDelay = delay;\n//\tsetTimeout(() => {\n\t    this.getEngine().moveWindow(x, y, scale, rotate, delay);\n//\t}, 0);\n    };\n    this.reveal = (selector) => {\n\tlet elem;\n\tif(typeof selector == \"string\") elem = this.query(selector);\n\telse elem = selector;\n\telem.style.opacity = \"1\";\n    };\n    this.revealAll = (selector) => {\n\tthis.queryAll(selector).forEach((elem) => { elem.style.opacity = \"1\";});\n    };\n    this.hide = (selector) => {\n\tthis.query(selector).style.opacity = \"0\";\n    };\n    this.hideAll = (selector) => {\n\tthis.queryAll(selector).forEach((elem) => { elem.style.opacity = \"0\";});\n    };\n\n    // ******************************\n    // Function for writing and highlighting\n    // ******************************\n    this.tool = \"no-tool\";\n    this.getTool = (tool) => {return this.tool;};\n    this.setTool = (tool) => {\n\tif(tool == \"clear-all\") {\n\t    this.sketchpad.clear();\n\t    this.sketchpadHighlight.clear();\n\t    return;\n\t}\n\tthis.tool = tool;\n\tthis.element.classList.remove(\"drawing\", \"highlighting\");\n\tif(tool == \"highlighting\") {\n\t    this.element.classList.add(\"highlighting\");\n\t    this.sketchpadHighlight.mode = \"draw\";\n\t} else if(tool == \"highlighting-erase\") {\n\t    this.element.classList.add(\"highlighting\");\n\t    this.sketchpadHighlight.mode = \"erase\";\n\t} else if(tool == \"drawing\") {\n\t    this.element.classList.add(\"drawing\");\n\t    this.sketchpad.mode = \"draw\";\n\t    this.sketchpad.weight = 1;\n\t} else if(tool == \"drawing-erase\") {\n\t    this.element.classList.add(\"drawing\");\n\t    this.sketchpad.weight = 20;\n\t    this.sketchpad.mode = \"erase\";\n\t} else if(tool == \"clear-all\") {\n\t}\n    };\n    this.color = \"blue\";\n    this.colorHighlight = \"yellow\";\n    this.getColor = () => {\n\tif([\"highlighting\",\"highlighting-erase\"].includes(this.getTool())) {\n\t    return this.colorHighlight;\n\t}\n\telse if([\"drawing\",\"drawing-erase\"].includes(this.getTool())) {\n\t    return this.color;\n\t}\n\treturn \"no-color\";\n    };\n    this.setColor = (color) => {\n\tswitch(this.getTool()) {\n\tcase(\"highlighting\"):\n\tcase(\"highlighting-erase\"):\n\t    this.colorHighlight = color;\n\t    this.sketchpadHighlight.color = color;\t    \n\t    break;\n\tcase(\"drawing\"):\n\tcase(\"drawing-erase\"):\n\t    this.color = color;\n\t    this.sketchpad.color = color;\t    \n\t    break;\n\t}\n    };\n    this.lineWidth = \"medium\";\n    this.lineWidthErase = \"medium\";\n    this.lineWidthHighlight = \"medium\";\n    this.getLineWidth = () => {\n\tif([\"highlighting\",\"highlighting-erase\"].includes(this.getTool())) \n\t    return this.lineWidthHighlight;\n\telse if([\"drawing\"].includes(this.getTool())) \n\t    return this.lineWidth;\n\telse if([\"drawing-erase\"].includes(this.getTool()))\n\t    return this.lineWidthErase;\n\treturn \"no-line-width\";\n    };\n    this.setLineWidth = (lineWidth) => {\n\tif([\"highlighting\",\"highlighting-erase\"].includes(this.getTool())) {\n\t    this.lineWidthHighlight = lineWidth;\n\t    switch(lineWidth) {\n\t    case(\"small\"):\n\t\tthis.sketchpadHighlight.weight = 10;\t    \n\t\tbreak;\n\t    case(\"medium\"):\n\t\tthis.sketchpadHighlight.weight = 30;\t    \n\t\tbreak;\n\t    case(\"large\"):\n\t\tthis.sketchpadHighlight.weight = 90;\t    \n\t\tbreak;\n\t\t\n\t    }\n\t}\n\telse if([\"drawing\"].includes(this.getTool())) {\n\t    this.lineWidth = lineWidth;\n\t    switch(lineWidth) {\n\t    case(\"small\"):\n\t\tthis.sketchpad.weight = 0.25;\t    \n\t\tbreak;\n\t    case(\"medium\"):\n\t\tthis.sketchpad.weight = 1;\t    \n\t\tbreak;\n\t    case(\"large\"):\n\t\tthis.sketchpad.weight = 5;\t    \n\t\tbreak;\n\t    }\n\t}\n\telse if([\"drawing-erase\"].includes(this.getTool())) {\n\t    this.lineWidthErase = lineWidth;\n\t    switch(lineWidth) {\n\t    case(\"small\"):\n\t\tthis.sketchpad.weight = 5;\t    \n\t\tbreak;\n\t    case(\"medium\"):\n\t\tthis.sketchpad.weight = 20;\t    \n\t\tbreak;\n\t    case(\"large\"):\n\t\tthis.sketchpad.weight = 80;\t    \n\t\tbreak;\n\t    }\n\t}\n    };\n\n    // ******************************\n    // Initialisation of the object\n    // ******************************\n    // engine\n    let engine = ng;\n    this.getEngine = () => engine;\n    this.setEngine = (ng) => engine = ng;\n    // element\n    this.element =\n\ttypeof name == \"string\" ?\n\tdocument.querySelector(name[0]==\"#\" ? name : (\"#\"+name)):\n\tname;\n    // scale, rotate, delay\n    this.scale = parseFloat(this.element.getAttribute(\"scale\"));\n    if(typeof this.scale == \"undefined\" || isNaN(this.scale)) this.scale = 1;\n    this.rotate = parseFloat(this.element.getAttribute(\"rotate\")) || 0;\n    this.delay = isNaN(parseFloat(this.element.getAttribute(\"delay\"))) ? 0 : (parseFloat(this.element.getAttribute(\"delay\")));\n    // canvas for drawing\n    var that = this;\n    let element = this.element;\n    this.reloadCanvas = () => {\n\tvar that = this;\n\tlet element = this.element;\n\tsetTimeout(function() {\n\t    let slipScaleContainer = element.firstChild;\n\t    let canvas = document.createElement('canvas');\n\n\t    canvas.classList.add(\"sketchpad\", \"drawing\");\n\t    canvas.style.opacity = \"1\";\n\t    that.sketchpadCanvas = canvas;\n\t    let q = that.queryAll(\".sketchpad\");\n            console.log(\"replacing\", q[0], \"with\", canvas);\n\t    q[0].replaceWith(canvas);\n\t    //     if(element && element.firstChild && element.firstChild.firstChild)\n\t    //     element.firstChild.firstChild.appendChild(canvas);\n\t    // else\n\t    //     element.appendChild(canvas);\n            \n\t    let sketchpad;\n            if (that.sketchpad ) {\n                sketchpad = that.sketchpad;\n            } else {\n                console.log(\"new sketchpad\")\n                sketchpad = new Atrament(canvas);\n            }\n\t    sketchpad.smoothing = 0.2;\n\t    sketchpad.color = \"blue\";\n\t    that.sketchpad = sketchpad;\n\t    // }, 0);\n\t    // canvas for highlighting \n\t    // setTimeout(function() {\n\t    let canvas2 = document.createElement('canvas');\n\t    canvas2.classList.add(\"sketchpad\", \"sketchpad-highlighting\");\n\t    canvas2.style.opacity = \"0.5\";\n\t    that.sketchpadCanvasHighlight = canvas2;\n\t    q[1].replaceWith(canvas2);\n\t    // if(element && element.firstChild && element.firstChild.firstChild)\n\t    //     element.firstChild.firstChild.appendChild(canvas2);\n\t    // else\n\t    //     element.appendChild(canvas);\n\t    that.sketchpadHighlight = new Atrament(canvas2);\n\t    that.sketchpadHighlight.color = \"yellow\";\n\t    that.sketchpadHighlight.weight = 30;\n\t    that.sketchpadHighlight.smoothing = 0.2;\n\t    that.resizeObserver = new ResizeObserver(entries => {\n                if(that.element.firstChild.offsetHeight > 0 && that.element.firstChild.offsetWidth > 0) {\n\t\t    canvas.height = that.element.firstChild.offsetHeight/that.scale;\n\t\t    canvas.width = that.element.firstChild.offsetWidth/that.scale;\n\t\tcanvas2.height = that.element.firstChild.offsetHeight/that.scale;\n\t\tcanvas2.width = that.element.firstChild.offsetWidth/that.scale;\n\t\tthat.sketchpad.smoothing = 0.2;\n\t\tthat.sketchpad.color = \"blue\";\n\t\tthat.sketchpadHighlight.color = \"yellow\";\n\t\tthat.sketchpadHighlight.weight = 30;\n\t\t    that.sketchpadHighlight.smoothing = 0.2;}\n\t    });\n\t\t    canvas.height = that.element.firstChild.offsetHeight/that.scale;\n\t\t    canvas.width = that.element.firstChild.offsetWidth/that.scale;\n\t\tcanvas2.height = that.element.firstChild.offsetHeight/that.scale;\n\t\tcanvas2.width = that.element.firstChild.offsetWidth/that.scale;\n\t\tthat.sketchpad.color = \"blue\";\n\t    if(slipScaleContainer && slipScaleContainer.classList && slipScaleContainer.classList.contains(\"slip-scale-container\"))\n                console.log()\n\t\t//that.resizeObserver.observe(slipScaleContainer);\n\t}, 0);\n\n    };\n    setTimeout(function() {\n\tlet canvas = document.createElement('canvas');\n\tcanvas.classList.add(\"sketchpad\", \"drawing\");\n\tthat.sketchpadCanvas = canvas;\n\tif(element && element.firstChild && element.firstChild.firstChild)\n\t    element.firstChild.firstChild.appendChild(canvas);\n\telse\n\t    element.appendChild(canvas);\n    // }, 0);\n    // canvas for highlighting \n    // setTimeout(function() {\n\tlet canvas2 = document.createElement('canvas');\n\tcanvas2.classList.add(\"sketchpad\", \"sketchpad-highlighting\");\n\tthat.sketchpadCanvasHighlight = canvas2;\n\tif(element && element.firstChild && element.firstChild.firstChild)\n\t    element.firstChild.firstChild.appendChild(canvas2);\n\telse\n\t    element.appendChild(canvas2);\n\tsetTimeout(function() {\n\t    that.reloadCanvas();\n\t}, 0);\n    }, 0);\n    // names\n    this.name =\n\ttypeof name == \"string\" ?\n\tname:\n\tname.id;\n    if(typeof(fullName) == \"string\")\n\tthis.fullName = fullName ;\n    else if (this.element.hasAttribute(\"toc-title\"))\n\tthis.fullName = this.element.getAttribute(\"toc-title\");\n    else\n\tthis.fullName = this.name;\n    // clonedElement\n    let clonedElement;\n    if(typeof MathJax != \"undefined\")\n\tMathJax.startup.promise.then(() => {\n\t    setTimeout(() => {clonedElement = cloneNoSubslip(this.element);},0);\n\t});\n    else\n\tsetTimeout(() => {clonedElement = cloneNoSubslip(this.element);},0);\n\n    this.getCloned = () => clonedElement;\n    this.setCloned = (c) => clonedElement = c;\n    // coord\n    let coord = this.findSlipCoordinate();\n    this.x = coord.x;\n    this.y = coord.y;\n    // Preparing the slip\n    this.init(this, engine);\n    // Adding \"enter-at\" subslips\n    this.addSubSlips();\n    // Adding \"paused-flow\" subslips\n    this.generatePauseFlowSlipList = function () {\n\tlet slipList = [];\n\tlet bla = this.queryAll(\"[pause], [step], [auto-enter], [immediate-enter]\");\n\tlet step = 1;\n\tbla.forEach((elem) => {\n\t    if(elem.hasAttribute(\"auto-enter\")){\n\t\tslipList[step] = new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\tstep++;\n\t    }\n\t    if(elem.hasAttribute(\"immediate-enter\")){\n\t\t// the slip is entered before the pause\n\t\tslipList[step-1] = new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\tstep++;\n\t    }\n\t    if(elem.hasAttribute(\"step\")){\n\t\tif(elem.hasAttribute(\"enter-at-unpause\")) {\n\t\t    if(elem.getAttribute(\"enter-at-unpause\") != \"\") {\n\t\t\tlet s = this.query(\"#\"+elem.getAttribute(\"enter-at-unpause\"));\n\t\t\tslipList[step] = new Slip(s, s.getAttribute(\"toc-title\") || \"\", [], ng, {});\n//\t\t\tslipList[step + (parseInt(elem.getAttribute(\"step\")) || 1) - 1] = new Slip(s, s.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\t    }\n\t\t    else\n\t\t\tslipList[step + (parseInt(elem.getAttribute(\"step\")) || 1) - 1] = new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\t}\n\t\tstep += parseInt(elem.getAttribute(\"step\")) || 1 ;\n\t    }\n\t    if(elem.hasAttribute(\"pause\")){\n\t\tif(elem.hasAttribute(\"enter-at-unpause\")) {\n\t\t    if(elem.getAttribute(\"enter-at-unpause\") != \"\") {\n\t\t\tlet s = this.query(elem.getAttribute(\"enter-at-unpause\"));\n\t\t\tslipList[step + (parseInt(elem.getAttribute(\"step\")) || 1) - 1] = new Slip(s, s.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\t    }\n\t\t    else\n\t\t\tslipList[step + (parseInt(elem.getAttribute(\"step\")) || 1) - 1] = new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n\t\t}\n\t\tstep += parseInt(elem.getAttribute(\"pause\")) || 1 ;\n\t    }\n\t});\n\treturn slipList;\n    };\n    this.pauseSlipList = this.generatePauseFlowSlipList();\n    // this.pauseSlipList = this.queryAll(\"[pause], [step], [auto-enter]\").map((elem) => {\n    // \tif(elem.hasAttribute(\"auto-enter\"))\n    // \t    return new Slip(elem, elem.getAttribute(\"toc-title\") || \"\", [], ng, {});\n    // \treturn null;\n    // });\n}\n","import { myQueryAll } from './util';\nimport Controller from './controller';\nimport Slip from './slip';\n\nexport default function (root) {\n    function prepareRoot (rootElem) {\n\tlet container = document.createElement(\"div\");\n\tcontainer.innerHTML = \n\t    `\t\n\t<div class=\"toc-slip\" style=\"display:none;\"></div>\n        <div id=\"open-window\">\n\t  <div class=\"cpt-slip\">0</div>\n\t  <div class=\"slip-writing-toolbar\">\n              <div class=\"slip-toolbar-tool no-tool\">\n                  <div class=\"slip-toolbar-pen\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"20\" height=\"20\" style=\"-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 36 36\"><path class=\"clr-i-outline clr-i-outline-path-1\" d=\"M33.87 8.32L28 2.42a2.07 2.07 0 0 0-2.92 0L4.27 23.2l-1.9 8.2a2.06 2.06 0 0 0 2 2.5a2.14 2.14 0 0 0 .43 0l8.29-1.9l20.78-20.76a2.07 2.07 0 0 0 0-2.92zM12.09 30.2l-7.77 1.63l1.77-7.62L21.66 8.7l6 6zM29 13.25l-6-6l3.48-3.46l5.9 6z\" fill=\"#000000\"/><rect x=\"0\" y=\"0\" width=\"36\" height=\"36\" fill=\"rgba(0, 0, 0, 0)\" /></svg>\n                  </div>\n                  <div class=\"slip-toolbar-highlighter\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"25\" height=\"25\" style=\"-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 36 36\"><path d=\"M15.82 26.06a1 1 0 0 1-.71-.29l-6.44-6.44a1 1 0 0 1-.29-.71a1 1 0 0 1 .29-.71L23 3.54a5.55 5.55 0 1 1 7.85 7.86L16.53 25.77a1 1 0 0 1-.71.29zm-5-7.44l5 5L29.48 10a3.54 3.54 0 0 0 0-5a3.63 3.63 0 0 0-5 0z\" class=\"clr-i-outline clr-i-outline-path-1\" fill=\"#000000\"/><path d=\"M10.38 28.28a1 1 0 0 1-.71-.28l-3.22-3.23a1 1 0 0 1-.22-1.09l2.22-5.44a1 1 0 0 1 1.63-.33l6.45 6.44A1 1 0 0 1 16.2 26l-5.44 2.22a1.33 1.33 0 0 1-.38.06zm-2.05-4.46l2.29 2.28l3.43-1.4l-4.31-4.31z\" class=\"clr-i-outline clr-i-outline-path-2\" fill=\"#000000\"/><path d=\"M8.94 30h-5a1 1 0 0 1-.84-1.55l3.22-4.94a1 1 0 0 1 1.55-.16l3.21 3.22a1 1 0 0 1 .06 1.35L9.7 29.64a1 1 0 0 1-.76.36zm-3.16-2h2.69l.53-.66l-1.7-1.7z\" class=\"clr-i-outline clr-i-outline-path-3\" fill=\"#000000\"/><rect x=\"0\" y=\"0\" width=\"36\" height=\"36\" fill=\"rgba(0, 0, 0, 0)\" /></svg>\n</div>\n                  <div class=\"slip-toolbar-eraser\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"20\" height=\"20\" style=\"-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 36 36\"><path d=\"M35.62 12a2.82 2.82 0 0 0-.84-2l-7.29-7.35a2.9 2.9 0 0 0-4 0L2.83 23.28a2.84 2.84 0 0 0 0 4L7.53 32H3a1 1 0 0 0 0 2h25a1 1 0 0 0 0-2H16.74l18-18a2.82 2.82 0 0 0 .88-2zM13.91 32h-3.55l-6.11-6.11a.84.84 0 0 1 0-1.19l5.51-5.52l8.49 8.48zm19.46-19.46L19.66 26.25l-8.48-8.49l13.7-13.7a.86.86 0 0 1 1.19 0l7.3 7.29a.86.86 0 0 1 .25.6a.82.82 0 0 1-.25.59z\" class=\"clr-i-outline clr-i-outline-path-1\" fill=\"#000000\"/><rect x=\"0\" y=\"0\" width=\"36\" height=\"36\" fill=\"rgba(0, 0, 0, 0)\" /></svg>\n</div>\n                  <div class=\"slip-toolbar-cursor\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"20\" height=\"20\" style=\"-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 36 36\"><path class=\"clr-i-outline clr-i-outline-path-1\" d=\"M14.58 32.31a1 1 0 0 1-.94-.65L4 5.65a1 1 0 0 1 1.25-1.28l26 9.68a1 1 0 0 1-.05 1.89l-8.36 2.57l8.3 8.3a1 1 0 0 1 0 1.41l-3.26 3.26a1 1 0 0 1-.71.29a1 1 0 0 1-.71-.29l-8.33-8.33l-2.6 8.45a1 1 0 0 1-.93.71zm3.09-12a1 1 0 0 1 .71.29l8.79 8.79L29 27.51l-8.76-8.76a1 1 0 0 1 .41-1.66l7.13-2.2L6.6 7l7.89 21.2l2.22-7.2a1 1 0 0 1 .71-.68z\" fill=\"#000000\"/><rect x=\"0\" y=\"0\" width=\"36\" height=\"36\" fill=\"rgba(0, 0, 0, 0)\" /></svg>\n</div>\n              </div>\n              <div class=\"slip-toolbar-color\">\n                  <div class=\"slip-toolbar-black\"></div>\n                  <div class=\"slip-toolbar-blue\"></div>\n                  <div class=\"slip-toolbar-red\"></div>\n                  <div class=\"slip-toolbar-green\"></div>\n                  <div class=\"slip-toolbar-yellow\"></div>\n              </div>\n\n              <div class=\"slip-toolbar-width\">\n                  <div class=\"slip-toolbar-small\"><div></div></div>\n                  <div class=\"slip-toolbar-medium\"><div></div></div>\n                  <div class=\"slip-toolbar-large\"><div></div></div>\n              </div>\n              <div class=\"slip-toolbar-control\">\n                  <!-- <div class=\"slip-toolbar-stop\">✓</div> -->\n                  <div class=\"slip-toolbar-clear\">✗</div>\n              </div>\n          </div>\n\t  <div class=\"format-container\">\n\t    <div class=\"rotate-container\">\n\t\t<div class=\"scale-container\">\n\t\t    <div class=\"universe movable\" id=\"universe\">\n\t\t\t<div width=\"10000\" height=\"10000\" class=\"fog\"></div>\n                        <div class=\"placeHolder\"></div>\n\t\t    </div>\n\t\t</div>\n              </div>\n\t    </div>\n\t</div>`;\n\trootElem.replaceWith(container);\n\tcontainer.querySelector(\".placeHolder\").replaceWith(rootElem);\n\trootElem.querySelectorAll(\"slip-slip\").forEach((slipElem) => {\n\t    setTimeout(() => {\n\t\tvar scaleContainer = document.createElement('div');\n\t\tvar slipContainer = document.createElement('div');\n\t\tscaleContainer.classList.add(\"slip-scale-container\");\n\t\tslipContainer.classList.add(\"slip-container\");\n\t\tlet fChild;\n\t\twhile((fChild = slipElem.firstChild)) {\n\t\t    slipContainer.appendChild(fChild);\n\t\t}\n\t\tscaleContainer.appendChild(slipContainer);\n\t\tslipElem.appendChild(scaleContainer);\n\t\tsetTimeout(() => {\n\t\t    // let canvas = document.createElement('canvas');\n\t\t    // canvas.height = slipContainer.offsetHeight;\n\t\t    // canvas.width = slipContainer.offsetWidth;\n\t\t    // canvas.classList.add(\"sketchpad\");\n\t\t    // canvas.style.opacity = \"1\";\n\t\t    // slipContainer.appendChild(canvas);\n\t\t    // let sketchpad = new Atrament(canvas);\n\t\t    // sketchpad.smoothing = 0.2;\n\t\t},0);\n\t    },0);\n\t});\n\trootElem.style.width = \"unset\";\n\trootElem.style.height = \"unset\";\n\t// document.querySelectorAll(\".background-canvas\").forEach((elem)=> {elem.addEventListener(\"click\", (ev) => { console.log(\"vous avez cliquez aux coordonnées : \", ev.layerX, ev.layerY); });});\t\n    }\n    if (typeof(root) == \"string\") {\n\tif(root[0] != \"#\")\n\t    root = \"#\"+root;\n\troot = document.querySelector(root);\n    }\n    else if (typeof(root) == \"undefined\")\n\troot = document.querySelector(\"slip-slipshow\");\n    prepareRoot(root);\n\n    // Constants\n    document.body.style.cursor = \"auto\";\n    let timeOutIds = [];\n    document.body.addEventListener(\"mousemove\", (ev) => {\n\ttimeOutIds.forEach((id) => { clearTimeout(id); });\n\tdocument.body.style.cursor = \"auto\";\n\ttimeOutIds.push(setTimeout(() => { document.body.style.cursor = \"none\";}, 5000));\n    });\n    let openWindow = document.querySelector(\"#open-window\");\n    let universe = document.querySelector(\"#universe\");\n    let slips = universe.querySelectorAll(\"slip-slip:not(slip-slipshow)\");\n    let browserHeight, openWindowWidth;\n    let browserWidth, openWindowHeight;\n    this.getOpenWindowHeight = () => openWindowHeight;\n    this.getOpenWindowWidth = () => openWindowWidth;\n\n    let winX, winY;\n    let currentScale, currentRotate;\n    this.getCoord = () => { return {x: winX, y: winY, scale: currentScale};};\n    let doNotMove = false;\n    this.setDoNotMove = m => doNotMove = m;\n    this.getDoNotMove = m => doNotMove;\n    let alwaysMoveFast = false;\n    this.setAlwaysMoveFast = m => {setTimeout(() => {alwaysMoveFast = m}, 0)};\n    this.getAlwaysMoveFast = m => alwaysMoveFast;\n    this.moveWindow = function (x, y, scale, rotate, delay) {\n\tif(this.getDoNotMove()) {\n\t    return;\n\t}\n\tlet my_delay = delay;\n\tif(this.getAlwaysMoveFast()) {\n\t    my_delay = \"0\";\n\t}\n\tcurrentScale = scale;\n\tcurrentRotate = rotate;\n\twinX = x ;\n\twinY = y;\n\tsetTimeout(() => {\n\t    document.querySelector(\".scale-container\").style.transitionDuration = my_delay+\"s\";\n\t    document.querySelector(\".rotate-container\").style.transitionDuration = my_delay+\"s\";\n\t    universe.style.transitionDuration = my_delay+\"s, \"+my_delay+ \"s\"; \n\t    setTimeout(() => {\n\t\tuniverse.style.left = -(x*1440 - 1440/2)+\"px\";\n\t\tuniverse.style.top = -(y*1080 - 1080/2)+\"px\";\n\t\tdocument.querySelector(\".scale-container\").style.transform = \"scale(\"+(1/scale)+\")\";\n\t\tdocument.querySelector(\".rotate-container\").style.transform = \"rotate(\"+(rotate)+\"deg)\";\n\t    },0);\n\t},0);\n\treturn;\n    };\n    this.moveWindowRelative = function(dx, dy, dscale, drotate, delay) {\n\tthis.moveWindow(winX+dx, winY+dy, currentScale+dscale, currentRotate+drotate, delay);\n    };\n    this.placeSlip = function(slip) {\n\tlet scale = parseFloat(slip.getAttribute(\"scale\"));\n\tlet slipScaleContainer = slip.querySelector(\".slip-scale-container\");\n\tscale = isNaN(scale) ? 1 : scale ;\n\tslipScaleContainer.style.transform = \"scale(\"+scale+\")\";\n\tconst resizeObserver = new ResizeObserver(entries => {\n\t    slip.style.width = (Math.max(slipScaleContainer.offsetWidth, 1440))*scale+\"px\";\n\t    slip.style.height = (Math.max(slipScaleContainer.offsetHeight, 1080))*scale+\"px\";\n\t});\n\n\tresizeObserver.observe(slipScaleContainer);\n    };\n    this.placeSlips = function () {\n\tlet depth = function (elem) {\n\t    let subslips = myQueryAll(elem, \"slip-slip\");\n\t    return 1+subslips.map(depth).reduce((a,b) => Math.max(a,b),0);\n\t};\n\tlet rootDepth = depth(document.body);\n\tfor(let i= 0; i<rootDepth; i++)\n\t    slips.forEach(this.placeSlip);\t\n    };\n    setTimeout(() => {\n\tthis.placeSlips();\n    },0);\n    this.placeOpenWindow = function () {\n\tbrowserHeight = window.innerHeight;\n\tbrowserWidth = window.innerWidth;\n\tif(browserHeight/3 < browserWidth/4) {\n\t    openWindowWidth = Math.floor((browserHeight*4)/3);\n\t    openWindowHeight = browserHeight;\n\t    openWindow.style.left = ((window.innerWidth - openWindowWidth) /2)+\"px\";\n\t    openWindow.style.right = ((window.innerWidth - openWindowWidth) /2)+\"px\";\n\t    openWindow.style.width = (openWindowWidth)+\"px\";\n\t    openWindow.style.top = \"0\";\n\t    openWindow.style.bottom = \"0\";\n\t    openWindow.style.height = (openWindowHeight)+\"px\";\n\t}\n\telse {\n\t    openWindowHeight = Math.floor((browserWidth*3)/4);\n\t    openWindowWidth = browserWidth;\n\t    openWindow.style.top = ((window.innerHeight - openWindowHeight) /2)+\"px\";\n\t    openWindow.style.bottom = ((window.innerHeight - openWindowHeight) /2)+\"px\";\n\t    openWindow.style.height = (openWindowHeight)+\"px\";\n\t    openWindow.style.right = \"0\";\n\t    openWindow.style.left = \"0\";\n\t    openWindow.style.width = openWindowWidth+\"px\";\n\t}\n\tdocument.querySelector(\".scale-container\").style.transformOrigin = (1440/2)+\"px \"+(1080/2)+\"px\";\n\tdocument.querySelector(\".rotate-container\").style.transformOrigin = (1440/2)+\"px \"+(1080/2)+\"px\";\n\tdocument.querySelector(\".format-container\").style.transform = \"scale(\"+(openWindowWidth/1440)+\")\";\n\tdocument.querySelector(\".cpt-slip\").style.right =  (parseInt(openWindow.style.left)) + \"px\";\n\tdocument.querySelector(\".cpt-slip\").style.bottom =  \"0\";\n\tdocument.querySelector(\".cpt-slip\").style.zIndex =  \"10\";\n    };\n    this.placeOpenWindow();\n    window.addEventListener(\"resize\", (ev) => {\n\tthis.placeOpenWindow();\n\tthis.moveWindow(winX, winY, currentScale, currentRotate, 0);\n    });\n\n    // Taken from https://selftaughtjs.com/algorithm-sundays-converting-roman-numerals\n    // Use in showing roman numbers for slip number\n    function counterToString(num, depth) {\n\tif(depth == 1 || depth > 3)\n\t    return num.toString();\n\tlet result = '';\n\tlet decimal = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1];\n\tlet roman;\n\tif(depth == 0)\n\t    roman = [\"M\", \"CM\",\"D\",\"CD\",\"C\", \"XC\", \"L\", \"XL\", \"X\",\"IX\",\"V\",\"IV\",\"I\"];\n\telse\n\t    roman = [\"m\", \"cm\",\"d\",\"cd\",\"c\", \"xc\", \"l\", \"xl\", \"x\",\"ix\",\"v\",\"iv\",\"i\"];\n\tfor (var i = 0;i<=decimal.length;i++) {\n\t    while (num%decimal[i] < num) {     \n\t\tresult += roman[i];\n\t\tnum -= decimal[i];\n\t    }\n\t}\n\treturn result;\n    }\n    this.countersToString = (counterList) => {\n\tlet res = '';\n\tres += counterToString(counterList[0]+1, 0);\n\tfor(let i = 1; i < counterList.length; i++)\n\t    res += \".\" + counterToString(counterList[i]+1, i);\n\treturn res;\t\n    };\n    this.updateCounter = function () {\n\tlet counters = stack.map((slip) => slip.getActionIndex());\n\tlet hash = counters.join(',');\n\tif(window.parent !== window){\n\t    if (this.send_stage)\n\t\twindow.parent.postMessage({id: this.id, kind: \"state\" , data: hash}, \"*\");\n\t}\n\telse\n \t    window.history.replaceState(null, null, '#' + hash);\n\tdocument.querySelector(\".cpt-slip\").innerHTML = this.countersToString(counters);\t\n    };\n    this.enter = (n) => {\n\tthis.gotoSlip(n);\n\tthis.push(n);\n\tthis.next();\n    };\n    this.next = () => {\n\tif(document.querySelector(\".toc-slip\").innerHTML == \"\")\n\t    this.showToC();\n\t// return true if and only if the stack changed\n\tlet currentSlip = this.getCurrentSlip();\n\tlet n = currentSlip.next();\n\tthis.updateCounter();\n\tif(n instanceof Slip) {\n\t    this.enter(n);\n\t    // this.gotoSlip(n);\n\t    // this.push(n);\n\t    // this.next();\n\t    // this.showToC();\n\t    return true;\n\t}\n\telse if(!n) {\n\t    this.pop();\n\t    let newCurrentSlip = this.getCurrentSlip();\n\t    if(newCurrentSlip.nextStageNeedGoto())\n\t\tthis.gotoSlip(newCurrentSlip);\n\t    if(stack.length > 1 || newCurrentSlip.getActionIndex() < newCurrentSlip.getMaxNext())\n\t\tthis.next();\n\t    else\n\t\tthis.gotoSlip(newCurrentSlip);\n\t    return true;\n\t}\n        if (currentSlip.element.tagName == \"SLIP-SLIPSHOW\" && currentSlip.getActionIndex() >= currentSlip.getMaxNext()) {\n            this.previous();\n            return false\n        }\n\treturn false;\n    };\n    this.nextSlip = function () {\n\t// Do this.next() untill the stack change\n\twhile(!this.next()) {}\n    };\n    this.previous = (options) => {\n\tlet currentSlip = this.getCurrentSlip();\n\t// setDoNotMove(true);\n\t// let stage = currentSlip.previous2();\n\t// setDoNotMove(false);\n\tlet n = currentSlip.previous();\n\t// if(stage == \"\")\n\tif(n instanceof Slip) {\n\t    while(n.getCurrentSubSlip() instanceof Slip) {\n\t\tthis.push(n);\n\t\tn = n.getCurrentSubSlip();\n\t    }\n\t    this.push(n);\n\t    \n\t    this.gotoSlip(n, options);\n\t    // this.gotoSlip(n, {delay: currentSlip.delay});\n\t\t\n\t    // this.showToC();\n\t    this.updateCounter();\n\t    return true;\n\t}\n\telse if(!n) {\n\t    this.pop();\n\t    let newCurrentSlip = this.getCurrentSlip();\n\t    // newCurrentSlip.incrIndex();\n\t    \n\t    if(stack.length > 1 || newCurrentSlip.getActionIndex() > -1)\n\t\tthis.previous({delay: (currentSlip.currentDelay ? currentSlip.currentDelay : currentSlip.delay )});\n\t    else {\n\t\tthis.gotoSlip(newCurrentSlip, options);\n\t    }\n\t\t// this.gotoSlip(newCurrentSlip, {delay: currentSlip.delay});\n\t    // this.showToC();\n\t    this.updateCounter();\n            if (currentSlip.element.tagName == \"SLIP-SLIPSHOW\" && currentSlip.getActionIndex() <= 0) {\n                this.next();\n                return true\n            }\n\t    return true;\n\t} else if(options){\n\t    setTimeout(() => {\n\t\tthis.gotoSlip(currentSlip, options);\n\t    },0);\n\t}\n\t// this.showToC();\n\tsetTimeout(() => {\n\t    this.gotoSlip(currentSlip, options);\n\t},0);\n\tthis.updateCounter();\n\treturn false;\n    };\n    this.previousSlip = function () {\n\t// Do this.previous() untill the stack change\n\twhile(!this.previous()) {}\n    };\n\n    this.getCoordinateInUniverse = function (elem) {\n\tlet getCoordInParen = (elem) => {\n\t    return {x: elem.offsetLeft, y:elem.offsetTop};\t    \n\t};\n\tlet globalScale = 1;\n\tlet parseScale = function(transform) {\n\t    if (transform == \"none\")\n\t\treturn 1;\n\t    return parseFloat(transform.split(\"(\")[1].split(\",\")[0]);\n\t};\n\tlet getCoordIter = (elem) => {\n\t    let cInParent = getCoordInParen(elem);\n\t    if(!elem.offsetParent)\n\t\treturn { x: 0,\n\t\t\t y: 0,\n\t\t\t centerX: 0,\n\t\t\t centerY: 0,\n\t\t\t width: 0,\n\t\t\t height: 0,\n\t\t\t scale: 0 };\n\t    if(elem.offsetParent.classList.contains(\"universe\"))\n\t    {\n\t\treturn cInParent;\n\t    }\n\t    let cParent = getCoordIter(elem.offsetParent);\n\t    let style = window.getComputedStyle(elem.offsetParent);\n\t    let scale;\n\t    // if (style.transform == \"none\")\n\t    // \tscale = 1;\n\t    // else\n\t    // \tscale = parseFloat(style.transform.split(\"(\")[1].split(\",\")[0]);\n\t    scale = parseScale(style.transform);\n\t    globalScale *= scale;\n\t    // let scale = 1 ; // Has to parse/compute the scale, for now always 1\n\t    return {x:cParent.x+cInParent.x*globalScale, y:cParent.y+cInParent.y*globalScale };\n\t};\n\tlet c = getCoordIter(elem);\n\tlet style = window.getComputedStyle(elem);\n\tlet scale = parseScale(style.transform);\n\tglobalScale *= scale;\n\tlet ret = { x: c.x/1440,\n\t\t    y: c.y/1080,\n\t\t    centerX:c.x/1440+0.5*elem.offsetWidth/1440*globalScale,\n\t\t    centerY:c.y/1080+0.5*elem.offsetHeight/1080*globalScale,\n\t\t    width: elem.offsetWidth/1440*globalScale,\n\t\t    height: elem.offsetHeight/1080*globalScale,\n\t\t    scale: globalScale };\n\treturn ret;\n\t// return {x:c.x/1440+elem*globalScale*scale, y:c.y/1080+0.5*globalScale*scale, scale: globalScale*scale};\n\t// return {x: this.element.offsetLeft/1440+0.5, y:this.element.offsetTop/1080+0.5};\n    };\n    this.moveToElement = function(element, options) {\n\tlet coord = this.getCoordinateInUniverse(element);\n\tlet actualSize = {width: element.offsetWidth*coord.scale, height: element.offsetHeight*coord.scale};\n\tif(options)\n\t    this.moveWindow(coord.centerX, coord.centerY, Math.max(coord.width, coord.height)// coord.scale\n\t\t\t    , 0, options.delay ? options.delay : 1);\n    };\n    this.gotoSlip = function(slip, options) {\n\t// console.log(\"going to slip\", slip, slip.element);\n\toptions = options ? options : {};\n\tif(slip.element.tagName == \"SLIP-SLIP\")\n\t{\n\t     setTimeout(() => {\n\t\tlet coord = slip.findSlipCoordinate();\n\t\tif(typeof slip.currentX != \"undefined\" && typeof slip.currentY != \"undefined\" && typeof slip.currentScale != \"undefined\") {\n\t\t    this.moveWindow(slip.currentX, slip.currentY, slip.currentScale, slip.rotate, typeof(options.delay)!=\"undefined\" ? options.delay : (typeof(slip.currentDelay)!=\"undefined\" ? slip.currentDelay : slip.delay));\n\t\t} else {\n\t\t    slip.currentX = coord.x; slip.currentY = coord.y; slip.currentDelay = slip.delay;\n\t\t    this.moveWindow(coord.x, coord.y, coord.scale, slip.rotate, typeof(options.delay)!=\"undefined\" ? options.delay : (typeof(slip.currentDelay)!=\"undefined\" ? slip.currentDelay : slip.delay));\n\t\t}\n\t     },0);\n\t}\n\telse {\n\t     setTimeout(() => {\n\t\tlet coord = this.getCoordinateInUniverse(slip.element);\n\t\t this.moveWindow(coord.centerX, coord.centerY, Math.max(coord.width, coord.height), 0, typeof(options.delay)!=\"undefined\" ? options.delay : slip.delay);\n\t     },0);\n\t}\n    };\n    let rootSlip = new Slip(root, \"Presentation\", [], this, {});\n    let stack = [rootSlip];\n\n    // Stack Management:\n    this.push = function (n) {\n\tthis.getToC().querySelectorAll(\".toc-slip .active-slip\").forEach(elem => elem.classList.remove(\"active-slip\"));\n\tif(n.tocElem)\n\t    n.tocElem.classList.add(\"active-slip\");\n\tn.element.classList.add(\"active-true-slip\");\n\tif(stack.length>0)\n\t    stack[stack.length-1].element.classList.remove(\"active-true-slip\");\n\tstack.push(n);\n\treturn ;\n    };\n    this.pop = function () {\n\tthis.getToC().querySelectorAll(\".toc-slip .active-slip\").forEach(elem => elem.classList.remove(\"active-slip\"));\n\tlet n = stack.pop();\n\tn.element.classList.remove(\"active-true-slip\");\n\tif(stack.length == 0)\n\t    stack.push(n);\n\tstack[stack.length-1].element.classList.add(\"active-true-slip\");\n\tif(stack[stack.length -1].tocElem)\n\t    stack[stack.length -1].tocElem.classList.add(\"active-slip\");\n\treturn n;\n    };\n    this.getCurrentSlip = function () {\n\treturn stack[stack.length -1];\n    };\n    this.getSlipTree = function (slip) {\n\tslip = slip || rootSlip;\n\tif(slip instanceof Slip) \n\t    return {name: slip.name, slip: slip, subslips: slip.getActionList().map((e) => this.getSlipTree(e))};\n\treturn {function: true};\n    };\n\n    this.goToState = function(state) {\n\tlet iter = (state) => {\n\t    if(state.length == 0)\n\t\treturn;\n\t    iter(state[0]);\n\t    while(state[1].getActionIndex()<state[2])\n\t\tthis.next();\n\t};\n\tstack = [rootSlip];\n\trootSlip.refreshAll();\n\titer(state);\n\tthis.gotoSlip(state[1]);\n    };\n    let toc;\n    this.getToC = function() {\n\tif (toc)\n\t    return toc;\n\ttoc = document.querySelector(\".toc-slip\");\n\treturn toc;\n    };\n    this.showToC = function () {\n\tlet toc = document.querySelector(\".toc-slip\");\n\t// let innerHTML = \"\";\n\tlet globalElem = document.createElement(\"div\");\n\tlet tree = this.getSlipTree();\n\t// let before = true;\n\tlet displayTree = (tree, stackWithNumbers) => {\n\t    let containerElement = document.createElement(\"div\");\n\t    let nameElement = document.createElement(\"div\");\n\t    // if(before)\n\t    // \tnameElement.style.color = \"blue\";\n\t    // else\n\t    // \tnameElement.style.color = \"yellow\";\n\t    // if(tree.slip == this.getCurrentSlip()) {\n\t    // \tnameElement.style.color = \"red\";\n\t    // \tbefore = false;\n\t    // }\n\t\t\n\t    nameElement.innerText = tree.slip.fullName; //? tree.slip.fullName : tree.slip.name ; //+ \" (\" + (tree.slip.getActionIndex()+1) + \"/\" + (tree.slip.getMaxNext()+1) + \")\";\n\t    containerElement.appendChild(nameElement);\n\t    // innerHTML += \"<div>\"+tree.name+\"</div>\";\n\t    if(tree.subslips.length > 0) {\n\t\tlet ulElement = document.createElement(\"ul\");\n\t\t// innerHTML += \"<ul>\";\n\t\ttree.subslips.forEach((subtree, index) => {\n\t\t    let newStackWithNumbers = [stackWithNumbers, tree.slip, index];\n\t\t    let liElement = document.createElement(\"li\");\n\t\t    // innerHTML += \"<li>\";\n\t\t    if(subtree.function) {\n\t\t\tlet toCounter = (c) => {\n\t\t\t    if(c.length == 0)\n\t\t\t\treturn [];\n\t\t\t    return toCounter(c[0]).concat([c[2]]);\n\t\t\t};\n\t\t\tliElement.innerText = this.countersToString(toCounter(newStackWithNumbers));\n\t\t\t//\t\t\tliElement.innerText = \"\"+(index+1);\n\t\t\tliElement.classList.add(\"toc-function\");\n\t\t    } else\n\t\t\tliElement.appendChild(displayTree(subtree, newStackWithNumbers));\n\t\t    liElement.addEventListener(\"click\", (ev) => {\n\t\t    \tif(ev.target == liElement) {\n\t\t    \t    this.goToState(newStackWithNumbers);\n\t\t    \t}\n\t\t    });\n\t\t    ulElement.appendChild(liElement);\n\t\t    \n\t\t    // innerHTML += \"</li>\";\n\t\t});\n\t\tcontainerElement.appendChild(ulElement);\n\t\ttree.slip.setTocElem(containerElement);\n\t\t// innerHTML += \"</ul>\";\n\t    }\n\t    return containerElement;\n\t};\n\ttoc.innerHTML = \"\";\n\t// toc.innerHTML = innerHTML;\n\ttoc.appendChild(displayTree(tree, []));\n    };\n\n    // ******************************\n    // Function for writing and highlighting\n    // ******************************\n\n    this.getTool = () => {\n\treturn this.getCurrentSlip().getTool();\n    };\n    this.setTool = (tool) => {\n\tthis.getCurrentSlip().setTool(tool);\n\tthis.updateToolClasses();\n    };\n    this.getColor = () => {\n\treturn this.getCurrentSlip().getColor();\n    };\n    this.setColor = (color) => {\n\tthis.getCurrentSlip().setColor(color);\n\tthis.updateToolClasses();\n    };\n    this.setLineWidth = (lw) => {\n\tthis.getCurrentSlip().setLineWidth(lw);\n\tthis.updateToolClasses();\n    };\n    this.getLineWidth = () => {\n\treturn this.getCurrentSlip().getLineWidth();\n    };\n    this.reloadCanvas = () => {\n\tthis.getCurrentSlip().reloadCanvas();\n    };\n    let that = this;\n    function addToolEvents() {\n\tdocument.querySelector(\".slip-toolbar-pen\").addEventListener(\"click\", function(ev) {\n\t    that.setTool(\"drawing\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-cursor\").addEventListener(\"click\", function(ev) {\n\t    that.setTool(\"no-tool\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-eraser\").addEventListener(\"click\", function(ev) {\n\t    switch(that.getTool()) {\n\t    case \"drawing-erase\":\n\t\tthat.setTool(\"drawing\");\n\t\tbreak;\n\t    case \"highlighting\":\n\t\tthat.setTool(\"highlighting-erase\");\n\t\tbreak;\n\t    case \"highlighting-erase\":\n\t\tthat.setTool(\"highlighting\");\n\t\tbreak;\n\t    case \"no-tool\":\n\t\tthat.setTool(\"no-tool\");\n\t\tbreak;\n\t    case \"drawing\":\n\t\tthat.setTool(\"drawing-erase\");\n\t\tbreak;\n\t    }\n\t});\n\tdocument.querySelector(\".slip-toolbar-highlighter\").addEventListener(\"click\", function(ev) {\n\t    that.setTool(\"highlighting\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-black\").addEventListener(\"click\", function(ev) {\n\t    that.setColor(\"black\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-blue\").addEventListener(\"click\", function(ev) {\n\t    that.setColor(\"blue\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-red\").addEventListener(\"click\", function(ev) {\n\t    that.setColor(\"red\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-green\").addEventListener(\"click\", function(ev) {\n\t    that.setColor(\"green\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-yellow\").addEventListener(\"click\", function(ev) {\n\t    that.setColor(\"yellow\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-small\").addEventListener(\"click\", function(ev) {\n\t    that.setLineWidth(\"small\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-medium\").addEventListener(\"click\", function(ev) {\n\t    that.setLineWidth(\"medium\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-large\").addEventListener(\"click\", function(ev) {\n\t    that.setLineWidth(\"large\");\n\t});\n\tdocument.querySelector(\".slip-toolbar-clear\").addEventListener(\"click\", function(ev) {\n\t    that.setTool(\"clear-all\");\n\t});\n    }\n    this.updateToolClasses = () => {\n\tdocument.querySelector(\".slip-toolbar-tool\").classList.remove(\"drawing\",\"highlighting\", \"drawing-erase\", \"highlighting-erase\", \"no-tool\");\n\tif(this.getTool()==\"no-tool\" || this.getTool()==\"cursor\")\n\t    document.querySelector(\".slip-writing-toolbar\").classList.remove(\"active\");\n\telse\n\t    document.querySelector(\".slip-writing-toolbar\").classList.add(\"active\");\n\tdocument.querySelector(\".slip-toolbar-tool\").classList.add(this.getTool());\n\tdocument.querySelector(\".slip-toolbar-color\").classList.remove(\"black\",\"blue\", \"red\", \"green\", \"yellow\");\n\tdocument.querySelector(\".slip-toolbar-color\").classList.add(this.getColor());\n\tdocument.querySelector(\".slip-toolbar-width\").classList.remove(\"small\",\"medium\", \"large\");\n\tdocument.querySelector(\".slip-toolbar-width\").classList.add(this.getLineWidth());\n    };\n    setTimeout(addToolEvents, 0);\n\n    // ******************************\n    // \n    // ******************************\n\n\n    \n    // this.getRootSlip = () => rootSlip;\n    this.setRootSlip = (root) => {\n\trootSlip = root;\n\tstack = [rootSlip];\n    };\n    this.getRootSlip = () => rootSlip;\n    this.send_stage = false;\n    this.start = async (startingPoint, id) => {\n\tthis.id = id;\n\tstack = [rootSlip];\n\tif(window.location.hash || startingPoint) {\n\t    let target_stack;\n\t    if(window.location.hash) {\n\t\ttarget_stack = window.location.hash.slice(1).split(\",\").map(x => parseInt(x));\n\t    }\n\t    else {\n\t\ttarget_stack = startingPoint;\n\t    }\n\t    this.setAlwaysMoveFast(true);\n\t    console.log(\"alwaysMoveFast\", this.getAlwaysMoveFast())\n\t    let later = () => {\n\t\treturn new Promise(function(resolve) {\n\t\t    setTimeout(resolve, 0);\n\t\t});\n\t    };\n\t    let unfinished = -1;\n\t    let continue_please = 0;\n\t    let stop_now = 1;\n\t    let not_arrived = function () {\n\t\tlet counters = stack.map((slip) => slip.getActionIndex());\n\t\tlet return_value = unfinished;\n\t\ttarget_stack.forEach((target, i) => {\n\t\t    if (return_value != unfinished)\n\t\t\treturn;\n\t\t    if (target < counters[i])\n\t\t\treturn_value = stop_now;\n\t\t    if (target > counters[i])\n\t\t\treturn_value = continue_please;\n\t\t});\n\t\treturn return_value;\n\t    }\n\t    while(not_arrived() == continue_please){\n\t\tawait later();\n\t\tawait this.next()};\n\t    this.setAlwaysMoveFast(false);\n\t}\n\telse\n\t    this.next();\n\tthis.send_stage = true;\n\tif(window.parent !== window){\n\t    window.parent.postMessage({id: id, kind: \"ready\" , data: id}, \"*\");\n\t}\n\treturn this;\n    };\n    this.restart = () => {\n\tstack = [rootSlip];\n\trootSlip.refreshAll();\n\tthis.next();\n    };\n    let controller = new Controller(this);\n    this.getController = () => controller;\n    // if(window !== window.parent)\n    window.addEventListener(\"message\", (event) => {\n\tconsole.log(event);\n\tthis.restart();\n\tlet target_stack = event.data.split(\",\").map(x => parseInt(x));\n\tthis.setAlwaysMoveFast(true);\n\tconsole.log(\"alwaysMoveFast\", this.getAlwaysMoveFast())\n\tlet unfinished = -1;\n\tlet continue_please = 0;\n\tlet stop_now = 1;\n\tlet not_arrived = function () {\n\t    let counters = stack.map((slip) => slip.getActionIndex());\n\t    let return_value = unfinished;\n\t    target_stack.forEach((target, i) => {\n\t\tif (return_value != unfinished)\n\t\t    return;\n\t\tif (target < counters[i])\n\t\t    return_value = stop_now;\n\t\tif (target > counters[i])\n\t\t    return_value = continue_please;\n\t    });\n\t    return return_value;\n\t}\n\twhile(not_arrived() == continue_please)\n\t    this.next();\n\tthis.setAlwaysMoveFast(false);\n    });\n};\n","import './modules/slip-figure'\n\nimport IEngine from './modules/engine'\nimport IController from './modules/controller.mjs'\nimport ISlip from './modules/slip'\nimport * as IUtil from './modules/util'\n\n// import \"./css/slip.css\";\n// import \"./css/theorem.css\";\n\n/**\n * Allows slip-js to be used as a module\n */\nexport const Engine = IEngine;\nexport const Controller = IController;\nexport const Slip = ISlip;\nexport const Util = IUtil;\n\nexport let startSlipshow = async (startingPoint, id) => {\n    let engine;\n    if(typeof MathJax != \"undefined\")\n\treturn MathJax.startup.promise.then(() => {\n\t    engine = new Engine(document.querySelector(\"slip-slipshow\")).start(startingPoint, id);\n\t    return Promise.resolve(engine);\n\t});\n    else\n\tengine = new Engine(document.querySelector(\"slip-slipshow\")).start(startingPoint, id);\n    return Promise.resolve(engine);\n};\n\n/**\n * Allows slip-js to be used as simple CDN-included file\n */\n// window.Engine = IEngine;\n// window.Controller = IController;\n// window.Slip = ISlip;\n// window.Util = IUtil;\n"],"names":["SlipFigure","HTMLImageElement","observedAttributes","constructor","internalStep","img","maxStep","figureName","getAttribute","promise","preloadImages","then","updateSRC","preloadImage","i","Promise","resolve","reject","Image","onload","onerror","src","getURL","catch","connectedCallback","figureStep","step","attributeChangedCallback","name","oldValue","newValue","nextFigure","figuresStep","customElements","define","extends","myQueryAll","root","selector","avoid","id","Math","random","toString","substr","allElem","Array","from","querySelectorAll","separatedSelector","split","map","selec","join","other","filter","value","includes","window","cloneNoSubslip","elem","newElem","cloneNode","childNodes","forEach","child","tagName","placeholder","document","createElement","importantAttributes","attr","hasAttribute","setAttribute","classList","add","appendChild","contains","replaceSubslips","clone","subslips","sketchpad","sketchpadHighlight","element","placeholders","subslip","index","replaceWith","sketchPlaceholder","ng","engine","getEngine","setEngine","activated","activate","deactivate","left_keys","right_keys","up_keys","down_keys","rotate_keys","unrotate_keys","zoom_keys","unzoom_keys","show_toc_keys","show_toc2_keys","next_keys","previous_keys","refresh_keys","change_speed_keys","up_slip_keys","draw_on_slip_keys","erase_on_slip_keys","highlight_on_slip_keys","erase_highlight_on_slip_keys","stop_writing_on_slip_keys","clear_annotations_keys","reload_canvas_keys","background_canvas_keys","speedMove","addEventListener","ev","key","getCurrentSlip","refresh","setTool","reloadCanvas","slip","style","zIndex","canvas","openWindowHeight","getOpenWindowHeight","openWindowWidth","getOpenWindowWidth","moveWindowRelative","showToC","querySelector","display","shiftKey","nextSlip","next","previousSlip","previous","pop","Point","x","y","set","Mouse","down","floodFillInterval","maxLineThickness","minLineThickness","lineThicknessRange","thicknessIncrement","minSmoothingFactor","initialSmoothingFactor","weightSpread","initialThickness","AtramentEventTarget","eventListeners","Map","eventName","handler","handlers","get","Set","removeEventListener","delete","dispatchEvent","data","lineDistance","x1","y1","x2","y2","xs","ys","sqrt","hexToRgb","hexColor","m","match","parseInt","matchColor","compR","compG","compB","compA","pixelPos","r","g","b","a","colorPixel","fillR","fillG","fillB","startColor","alpha","matcher","DrawingMode","DRAW","ERASE","FILL","DISABLED","PathDrawingModes","Atrament","config","arguments","length","undefined","Error","Node","concat","width","height","mouse","mouseMove","event","cancelable","preventDefault","rect","getBoundingClientRect","position","changedTouches","offsetX","offsetY","clientX","left","clientY","top","modeInternal","newX","newY","draw","dirty","fireDirty","mouseDown","mode","fill","beginStroke","mouseUp","e","nx","ny","endStroke","destroy","clear","context","getContext","globalCompositeOperation","globalAlpha","strokeStyle","color","lineCap","lineJoin","translate","filling","fillStack","recordStrokes","strokeMemory","smoothing","Constants","thickness","targetThickness","weightInternal","maxWeight","adaptiveStroke","beginPath","moveTo","strokeTimestamp","performance","now","push","point","time","closePath","stroke","currentStroke","prevX","prevY","rawDist","Pixels","smoothingFactor","min","procX","procY","dist","lineWidth","quadraticCurveTo","c","weight","w","points","slice","isDirty","clearRect","toImage","toDataURL","getImageData","setTimeout","floodFill","_startX","_startY","startX","floor","startY","canvasWidth","canvasHeight","pixelStack","fillColor","colorLayer","matchFillColor","newPos","reachLeft","reachRight","putImageData","shift","Slip","fullName","actionL","options","generateActionList","newActionList","queryAll","addSubSlips","setNthAction","actionList","setAction","getActionList","ret","getMaxNext","pauseSlipList","n","action","getCurrentSubSlip","getActionIndex","nextStageNeedGoto","getSubSlipList","actionIndex","setActionIndex","actionI","maxNext","maxTemp","strMax","max","abs","sumArray","reduce","quer","query","findSubslipByID","goodSubslip","find","findSlipCoordinate","coord","getCoordinateInUniverse","scale","centerX","updatePauseAncestors","remove","pause","parentElement","unpause","makeStatic","strID","makeUnStatic","moveDownTo","moveUpTo","moveCenterTo","executeScript","reveal","hide","figureID","focus","makeEmph","makeUnEmph","unfocus","incrPause","d","removeAttribute","doAttributes","hiddenAt","str","opacity","visibleAt","emphAt","unemphAt","visibAt","staticAt","goDownTo","goTo","toExec","toFigureNext","incrIndex","updateToC","savedActionIndex","currentDelay","setDoNotMove","savedClass","className","doRefresh","toReturn","setTocElem","tocElem","ToCList","firstVisit","init","refreshAll","subSlipList","clonedElement","sketchpadCanvas","sketchpadCanvasHighlight","currentX","currentY","gotoSlip","reObserve","delay","visibility","moveToElement","Function","innerHTML","offset","offsetTop","moveWindow","rotate","offsetHeight","restoreWindow","currentScale","revealAll","hideAll","tool","getTool","colorHighlight","getColor","setColor","lineWidthErase","lineWidthHighlight","getLineWidth","setLineWidth","parseFloat","isNaN","that","slipScaleContainer","firstChild","q","console","log","canvas2","resizeObserver","ResizeObserver","entries","offsetWidth","MathJax","startup","getCloned","setCloned","generatePauseFlowSlipList","slipList","bla","s","prepareRoot","rootElem","container","slipElem","scaleContainer","slipContainer","fChild","body","cursor","timeOutIds","clearTimeout","openWindow","universe","slips","browserHeight","browserWidth","winX","winY","currentRotate","getCoord","doNotMove","getDoNotMove","alwaysMoveFast","setAlwaysMoveFast","getAlwaysMoveFast","my_delay","transitionDuration","transform","dx","dy","dscale","drotate","placeSlip","observe","placeSlips","depth","rootDepth","placeOpenWindow","innerHeight","innerWidth","right","bottom","transformOrigin","counterToString","num","result","decimal","roman","countersToString","counterList","res","updateCounter","counters","stack","hash","parent","send_stage","postMessage","kind","history","replaceState","enter","currentSlip","newCurrentSlip","getCoordInParen","offsetLeft","globalScale","parseScale","getCoordIter","cInParent","offsetParent","centerY","cParent","getComputedStyle","rootSlip","getToC","getSlipTree","function","goToState","state","iter","toc","tree","displayTree","stackWithNumbers","containerElement","nameElement","innerText","ulElement","subtree","newStackWithNumbers","liElement","toCounter","target","updateToolClasses","lw","addToolEvents","setRootSlip","getRootSlip","start","startingPoint","location","target_stack","later","unfinished","continue_please","stop_now","not_arrived","return_value","restart","controller","Controller","getController","Engine","IEngine","IController","ISlip","Util","IUtil","startSlipshow"],"mappings":"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","x_google_ignoreList":[3,4,5,6,7]}