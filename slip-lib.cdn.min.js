var SlipLib=function(e){"use strict";let t=(e,t,i)=>{i=i||".slip",e.id||(e.id="_"+Math.random().toString(36).substr(2,15));let s=Array.from(e.querySelectorAll(t)),o=t.split(",").map(t=>"#"+e.id+" "+i+" "+t).join(),n=Array.from(e.querySelectorAll(o));return s.filter(e=>!n.includes(e))};function i(e){let t=e.cloneNode(!1);return e.childNodes.forEach(e=>{if(e.classList&&e.classList.contains("slip")){let i=document.createElement(e.tagName);i.classList.add("toReplace"),t.appendChild(i)}else t.appendChild(i(e))}),t}function s(e,i){let s=t(e,".toReplace");i.forEach((e,t)=>{s[t].replaceWith(e)})}window.myQueryAll=t;var o=Object.freeze({__proto__:null,myQueryAll:t,cloneNoSubslip:i,replaceSubslips:s});function n(e){!function(e){let t=document.createElement("div");t.innerHTML='\t<div id="open-window">\t    <div class="format-container">\t    <div class="rotate-container">\t\t<div class="scale-container">\t\t    <div class="universe movable" id="universe">\t\t\t<div width="10000" height="10000" class="fog"></div>                        <div class="placeHolder"></div>\t\t    </div>\t\t</div>\t\t</div>\t    </div>\t</div>\t<div class="cpt-slip">0</div>\t<div class="toc-slip" style="display:none;"></div>',e.replaceWith(t),t.querySelector(".placeHolder").replaceWith(e),e.querySelectorAll(".slip").forEach(e=>{setTimeout(()=>{var t=document.createElement("div"),i=document.createElement("div");let s;for(t.classList.add("slip-scale-container"),i.classList.add("slip-container");s=e.firstChild;)i.appendChild(s);t.appendChild(i),e.appendChild(t)},0)}),e.style.width="unset",e.style.height="unset",document.querySelectorAll(".background-canvas").forEach(e=>{e.addEventListener("click",e=>{console.log("vous avez cliquez aux coordonnÃ©es : ",e.layerX,e.layerY)})})}(e),document.body.style.cursor="auto";let i=[];document.body.addEventListener("mousemove",e=>{i.forEach(e=>{clearTimeout(e)}),document.body.style.cursor="auto",i.push(setTimeout(()=>{document.body.style.cursor="none"},5e3))});let s,o,n,l,r,a,u,c,h=document.querySelector("#open-window"),p=document.querySelector("#universe"),d=p.querySelectorAll(".slip:not(.root)");this.getOpenWindowHeight=()=>l,this.getOpenWindowWidth=()=>o,this.getCoord=()=>({x:r,y:a,scale:u});let g=!1;function m(e,t){if(1==t||t>3)return e.toString();let i,s="",o=[1e3,900,500,400,100,90,50,40,10,9,5,4,1];i=0==t?["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]:["m","cm","d","cd","c","xc","l","xl","x","ix","v","iv","i"];for(var n=0;n<=o.length;n++)for(;e%o[n]<e;)s+=i[n],e-=o[n];return s}this.setDoNotMove=e=>g=e,this.getDoNotMove=e=>g,this.moveWindow=function(e,t,i,s,o){if(this.getDoNotMove())return console.log("we cannot move"),void console.log("previous is ca we cannot move !");console.log("previous is ca getDoNotMove !",e,t,i,s,o,this.getDoNotMove()),console.log("move to",e,t,"with scale, rotate, delay",i,s,o),u=i,c=s,r=e,a=t,console.log(e,t),setTimeout(()=>{document.querySelector(".scale-container").style.transitionDuration=o+"s",document.querySelector(".rotate-container").style.transitionDuration=o+"s",p.style.transitionDuration=o+"s, "+o+"s",setTimeout(()=>{p.style.left=-(1440*e-720)+"px",p.style.top=-(1080*t-540)+"px",document.querySelector(".scale-container").style.transform="scale("+1/i+")",document.querySelector(".rotate-container").style.transform="rotate("+s+"deg)"},0)},0)},this.moveWindowRelative=function(e,t,i,s,o){this.moveWindow(r+e,a+t,u+i,c+s,o)},this.placeSlip=function(e){let t=parseFloat(e.getAttribute("scale")),i=e.querySelector(".slip-scale-container");t=isNaN(t)?1:t,i.style.transform="scale("+t+")",e.style.width=Math.max(i.offsetWidth,1440)*t+"px",e.style.height=Math.max(i.offsetHeight,1080)*t+"px"},this.placeSlips=function(){let e=function e(i){console.log("debug depth (elem)",i);let s=t(i,".slip");return console.log("debug depth (subslips)",i),1+s.map(e).reduce((e,t)=>Math.max(e,t),0)}(document.body);console.log("debug",e);for(let t=0;t<e;t++)d.forEach(this.placeSlip)},setTimeout(()=>{this.placeSlips()},0),this.placeOpenWindow=function(){s=window.innerHeight,n=window.innerWidth,s/3<n/4?(o=Math.floor(4*s/3),l=s,h.style.left=(window.innerWidth-o)/2+"px",h.style.right=(window.innerWidth-o)/2+"px",h.style.width=o+"px",h.style.top="0",h.style.bottom="0",h.style.height=l+"px"):(l=Math.floor(3*n/4),o=n,h.style.top=(window.innerHeight-l)/2+"px",h.style.bottom=(window.innerHeight-l)/2+"px",h.style.height=l+"px",h.style.right="0",h.style.left="0",h.style.width=o+"px"),document.querySelector(".scale-container").style.transformOrigin="720px 540px",document.querySelector(".rotate-container").style.transformOrigin="720px 540px",document.querySelector(".format-container").style.transform="scale("+o/1440+")",document.querySelector(".cpt-slip").style.right=parseInt(h.style.left)+"px",document.querySelector(".cpt-slip").style.bottom="0",document.querySelector(".cpt-slip").style.zIndex="10"},this.placeOpenWindow(),window.addEventListener("resize",e=>{this.placeOpenWindow(),this.moveWindow(r,a,u,c,0)}),this.countersToString=e=>{let t="";t+=m(e[0]+1,0);for(let i=1;i<e.length;i++)t+="."+m(e[i]+1,i);return t},this.updateCounter=function(){let e=y.map(e=>e.getActionIndex());document.querySelector(".cpt-slip").innerHTML=this.countersToString(e)},this.next=()=>{""==document.querySelector(".toc-slip").innerHTML&&this.showToC();let e=this.getCurrentSlip().next();if(this.updateCounter(),e instanceof Slip)return this.gotoSlip(e),this.push(e),this.next(),!0;if(!e){this.pop();let e=this.getCurrentSlip();return e.nextStageNeedGoto()&&this.gotoSlip(e),y.length>1||e.getActionIndex()<e.getMaxNext()?this.next():this.gotoSlip(e),!0}return!1},this.nextSlip=function(){for(;!this.next(););},this.previous=e=>{console.log("previous is called with option",e);let t=this.getCurrentSlip(),i=t.previous();if(console.log("debug previous (currentSlip, n)",t,i),i instanceof Slip){for(;i.getCurrentSubSlip()instanceof Slip;)this.push(i),i=i.getCurrentSubSlip();return this.push(i),console.log("previous is ca GOTOSLIP FROM 1",e),this.gotoSlip(i,e),this.updateCounter(),!0}if(!i){this.pop();let i=this.getCurrentSlip();return console.log("previous is ca currentDelay, delay",t.currentDelay,t.delay),y.length>1||i.getActionIndex()>-1?this.previous({delay:t.currentDelay?t.currentDelay:t.delay}):(this.gotoSlip(i,e),console.log("previous is ca GOTOSLIP FROM 2",e)),this.updateCounter(),!0}return e&&setTimeout(()=>{this.gotoSlip(t,e)},0),this.updateCounter(),!1},this.previousSlip=function(){for(;!this.previous(););},this.getCoordinateInUniverse=function(e){console.log("debug getcoord elem",e);let t=1,i=function(e){return"none"==e?1:parseFloat(e.split("(")[1].split(",")[0])},s=e=>{console.log("debug getcoorditer elem",e);let o=(e=>({x:e.offsetLeft,y:e.offsetTop}))(e);if(!e.offsetParent)return{x:0,y:0,centerX:0,centerY:0,width:0,height:0,scale:0};if(e.offsetParent.classList.contains("universe"))return console.log("universe",o),o;let n,l=s(e.offsetParent),r=window.getComputedStyle(e.offsetParent);return n=i(r.transform),t*=n,{x:l.x+o.x*t,y:l.y+o.y*t}},o=s(e),n=window.getComputedStyle(e),l=i(n.transform);t*=l,console.log("getCoord",{x:o.x/1440+.5,y:o.y/1080+.5},"globalScale",t,n.transform,l);let r={x:o.x/1440,y:o.y/1080,centerX:o.x/1440+.5*e.offsetWidth/1440*t,centerY:o.y/1080+.5*e.offsetHeight/1080*t,width:e.offsetWidth/1440*t,height:e.offsetHeight/1080*t,scale:t};return console.log(r),r},this.moveToElement=function(e,t){let i=this.getCoordinateInUniverse(e);e.offsetWidth,i.scale,e.offsetHeight,i.scale;t&&this.moveWindow(i.centerX,i.centerY,Math.max(i.width,i.height),0,t.delay?t.delay:1)},this.gotoSlip=function(e,t){console.log("previous is ca goto slip",t,e.element,this.getDoNotMove()),console.log("we goto slip",e.element,this.getDoNotMove()),t=t||{},console.log("options is ",t),e.element.classList.contains("slip")?setTimeout(()=>{let i=e.findSlipCoordinate();void 0!==e.currentX&&void 0!==e.currentY?(console.log("previous is ca ORIGIN 1",e.currentX,e.currentY,this.getDoNotMove(),t),this.moveWindow(e.currentX,e.currentY,i.scale,e.rotate,void 0!==t.delay?t.delay:void 0!==e.currentDelay?e.currentDelay:e.delay)):(e.currentX=i.x,e.currentY=i.y,e.currentDelay=e.delay,console.log("previous is ca ORIGIN 2",i.x,i.y,this.getDoNotMove()),this.moveWindow(i.x,i.y,i.scale,e.rotate,void 0!==t.delay?t.delay:void 0!==e.currentDelay?e.currentDelay:e.delay))},0):setTimeout(()=>{console.log("debug slip element",e.element);let i=this.getCoordinateInUniverse(e.element);this.moveWindow(i.centerX,i.centerY,Math.max(i.width,i.height),0,void 0!==t.delay?t.delay:e.delay)},0)};let f=new Slip(e.id,"Presentation",[],this,{}),y=[f];this.push=function(e){y.push(e)},this.pop=function(){let e=y.pop();return 0==y.length&&y.push(e),e},this.getCurrentSlip=function(){return y[y.length-1]},this.getSlipTree=function(e){return(e=e||f)instanceof Slip?{name:e.name,slip:e,subslips:e.getActionList().map(e=>this.getSlipTree(e))}:{function:!0}},this.goToState=function(e){let t=e=>{if(0!=e.length)for(t(e[0]);e[1].getActionIndex()<e[2];)this.next()};y=[f],f.refreshAll(),t(e),this.gotoSlip(e[1])},this.showToC=function(){console.log("debug showtoc");let e=document.querySelector(".toc-slip"),t=(document.createElement("div"),this.getSlipTree()),i=(e,t)=>{console.log("debug treee",e);let s=document.createElement("div"),o=document.createElement("div");if(o.innerText=e.slip.fullName?e.slip.fullName:e.slip.name,s.appendChild(o),e.subslips.length>0){let o=document.createElement("ul");e.subslips.forEach((s,n)=>{let l=[t,e.slip,n],r=document.createElement("li");if(s.function){let e=t=>0==t.length?[]:e(t[0]).concat([t[2]]);r.innerText=this.countersToString(e(l)),r.classList.add("toc-function")}else r.appendChild(i(s,l));r.addEventListener("click",e=>{e.target==r&&(this.goToState(l),console.log("newstack",l))}),o.appendChild(r)}),s.appendChild(o),e.slip.setTocElem(s)}return console.log("debug tree, will return",s),s};e.innerHTML="",e.appendChild(i(t,[]))},this.setRootSlip=e=>{f=e,y=[f]},this.getRootSlip=()=>f,this.start=()=>{y=[f],this.next()},this.restart=()=>{y=[f],f.refreshAll(),this.next()}}function l(e){let t=e;this.getEngine=()=>this.engine,this.setEngine=e=>this.engine=e;let i=1;document.addEventListener("keypress",e=>{"f"==e.key&&(i=(i+4)%30+1),"r"==e.key&&t.getCurrentSlip().refresh(),"#"==e.key&&(document.querySelectorAll(".slip").forEach(e=>{e.style.zIndex="-1"}),document.querySelectorAll(".background-canvas").forEach(e=>{e.style.zIndex="1"}))}),document.addEventListener("keydown",e=>{let s=t.getOpenWindowHeight(),o=t.getOpenWindowWidth();"l"==e.key&&t.moveWindowRelative(0,i/s,0,0,.1),"o"==e.key&&t.moveWindowRelative(0,-i/s,0,0,.1),"k"==e.key&&t.moveWindowRelative(-i/o,0,0,0,.1),"m"==e.key&&t.moveWindowRelative(i/o,0,0,0,.1),"i"==e.key&&t.moveWindowRelative(0,0,0,1,.1),"p"==e.key&&t.moveWindowRelative(0,0,0,-1,.1),"z"==e.key&&t.moveWindowRelative(0,0,.01,0,.1),"Z"==e.key&&t.moveWindowRelative(0,0,-.01,0,.1),"T"==e.key&&t.showToC(),"t"==e.key&&(document.querySelector(".toc-slip").style.display="none"==document.querySelector(".toc-slip").style.display?"block":"none"),"ArrowRight"==e.key?(console.log(e),e.shiftKey?t.nextSlip():t.next()):"ArrowLeft"==e.key?e.shiftKey?t.previousSlip():t.previous():"ArrowUp"==e.key&&t.pop()})}function r(e,o,n,l,a){this.generateActionList=function(){console.log("debug generateactionlist",this.name);let e=[];return this.queryAll(".slip[enter-at]").forEach(t=>{console.log("new slip with ",t,null,null,l,{}),e[t.getAttribute("enter-at")]=new r(t,"",[],l,{})}),e},this.addSubSlips=function(){console.log("debug generateactionlist",this.name);return this.queryAll(".slip[enter-at]").forEach(e=>{console.log("new slip with ",e,null,null,l,{}),this.setNthAction(e.getAttribute("enter-at"),new r(e,"",[],l,{}))}),[]};let u=n;this.setAction=e=>{u=e},this.getActionList=()=>{let e=[];for(let t=0;t<=this.getMaxNext();t++)this.pauseSlipList[t]instanceof r?e[t]=this.pauseSlipList[t]:"function"==typeof u[t]||u[t]instanceof r?e[t]=u[t]:e[t]=()=>{};return e},this.setNthAction=(e,t)=>{u[e]=t},this.getCurrentSubSlip=()=>u[this.getActionIndex()]instanceof r?u[this.getActionIndex()]:this.pauseSlipList[this.getActionIndex()]instanceof r&&this.pauseSlipList[this.getActionIndex()],this.nextStageNeedGoto=()=>!(u[this.getActionIndex()+1]instanceof r)&&(!(this.pauseSlipList[this.getActionIndex()+1]instanceof r)&&!(this.getActionIndex()>=this.getMaxNext())),this.getSubSlipList=function(){return u.filter(e=>e instanceof r)};let c=-1;this.setActionIndex=e=>c=e,this.getActionIndex=()=>c,this.getMaxNext=()=>{if(this.maxNext)return this.maxNext;let e=u.length;["mk-visible-at","mk-hidden-at","mk-emphasize-at","mk-unemphasize-at","emphasize-at","chg-visib-at","up-at","down-at","center-at","static-at","exec-at","enter-at"].forEach(t=>{this.queryAll("*["+t+"]").forEach(i=>{i.getAttribute(t).split(" ").forEach(t=>{e=Math.max(Math.abs(parseInt(t)),e)})})});let t=this.queryAll("[pause], [step], [auto-enter], [immediate-enter]").map(e=>e.hasAttribute("pause")&&""!=e.getAttribute("pause")?parseInt(e.getAttribute("pause")):e.hasAttribute("step")&&""!=e.getAttribute("step")?parseInt(e.getAttribute("step")):1);return e=Math.max(e,t.reduce((e,t)=>e+t,0)),this.maxNext=e,e},this.queryAll=e=>t(this.element,e),this.query=e=>this.queryAll(e)[0],this.findSubslipByID=e=>{let t=this.getSubSlipList().find(t=>t.name==e?1:t.findSubslipByID(e));return!!t&&(t.name==e?t:t.findSubslipByID(e))},this.findSlipCoordinate=()=>{let e=p.getCoordinateInUniverse(this.element);return console.log("debug findslipcoordinate",e),e.scale*=this.scale,e.y=e.y+.5*e.scale,e.x=e.centerX,console.log("debug findslipcoordinate",e),e},this.updatePauseAncestors=()=>{this.queryAll(".pauseAncestor").forEach(e=>{e.classList.remove("pauseAncestor")});let e=this.query("[pause]");for(;e&&!e.classList.contains("slip");)e.classList.add("pauseAncestor"),e=e.parentElement},this.incrPause=()=>{let e=this.query('[pause], [auto-enter]:not([auto-enter="0"]), [immediate-enter]:not([immediate-enter="0"]), [step]');if(e){if(console.log("pause is",this.name,e),e.hasAttribute("step")){e.getAttribute("step")||e.setAttribute("step",1);let t=e.getAttribute("step");t<=1?e.removeAttribute("step"):e.setAttribute("step",t-1)}if(e.hasAttribute("auto-enter")&&e.setAttribute("auto-enter",0),e.hasAttribute("immediate-enter")&&e.setAttribute("immediate-enter",0),e.hasAttribute("pause")){e.getAttribute("pause")||e.setAttribute("pause",1);let t=e.getAttribute("pause");t<=1?(e.removeAttribute("pause"),e.hasAttribute("down-at-unpause")&&(""==e.getAttribute("down-at-unpause")?this.moveDownTo(e,1):this.moveDownTo("#"+e.getAttribute("down-at-unpause"),1)),e.hasAttribute("up-at-unpause")&&(""==e.getAttribute("up-at-unpause")?this.moveUpTo(e,1):this.moveUpTo("#"+e.getAttribute("up-at-unpause"),1)),e.hasAttribute("center-at-unpause")&&(""==e.getAttribute("center-at-unpause")?this.moveCenterTo(e,1):this.moveCenterTo("#"+e.getAttribute("center-at-unpause"),1))):e.setAttribute("pause",t-1),this.updatePauseAncestors()}}},this.doAttributes=()=>{this.queryAll("*[mk-hidden-at]").forEach(e=>{e.getAttribute("mk-hidden-at").split(" ").map(e=>parseInt(e)).includes(c)&&(e.style.opacity="0")}),this.queryAll("*[mk-visible-at]").forEach(e=>{e.getAttribute("mk-visible-at").split(" ").map(e=>parseInt(e)).includes(c)&&(e.style.opacity="1")}),this.queryAll("*[mk-emphasize-at]").forEach(e=>{e.getAttribute("mk-emphasize-at").split(" ").map(e=>parseInt(e)).includes(c)&&e.classList.add("emphasize")}),this.queryAll("*[mk-unemphasize-at]").forEach(e=>{e.getAttribute("mk-unemphasize-at").split(" ").map(e=>parseInt(e)).includes(c)&&e.classList.remove("emphasize")}),this.queryAll("*[emphasize-at]").forEach(e=>{e.getAttribute("emphasize-at").split(" ").map(e=>parseInt(e)).includes(c)?e.classList.add("emphasize"):e.classList.remove("emphasize")}),this.queryAll("*[chg-visib-at]").forEach(e=>{let t=e.getAttribute("chg-visib-at").split(" ").map(e=>parseInt(e));t.includes(c)&&(e.style.opacity="1"),t.includes(-c)&&(e.style.opacity="0")}),this.queryAll("*[static-at]").forEach(e=>{let t=e.getAttribute("static-at").split(" ").map(e=>parseInt(e));t.includes(-c)&&(e.style.position="absolute",e.style.visibility="hidden"),t.includes(c)&&(e.style.position="static",e.style.visibility="visible")}),this.queryAll("*[down-at]").forEach(e=>{e.getAttribute("down-at").split(" ").map(e=>parseInt(e)).includes(c)&&this.moveDownTo(e,1)}),this.queryAll("*[up-at]").forEach(e=>{e.getAttribute("up-at").split(" ").map(e=>parseInt(e)).includes(c)&&this.moveUpTo(e,1)}),this.queryAll("*[center-at]").forEach(e=>{e.getAttribute("center-at").split(" ").map(e=>parseInt(e)).includes(c)&&this.moveCenterTo(e,1)}),this.queryAll("*[exec-at]").forEach(e=>{e.getAttribute("exec-at").split(" ").map(e=>parseInt(e)).includes(c)&&new Function("slip",e.innerHTML)(this)})},this.incrIndex=()=>{console.log("incrIndex",this.name),c+=1,this.doAttributes(),c>0&&this.incrPause(),this.updateToC()},this.next=function(){return!(c>=this.getMaxNext())&&(this.incrIndex(),"function"==typeof u[c]&&u[c](this),u[c]instanceof r?u[c]:!(this.pauseSlipList[c]instanceof r)||this.pauseSlipList[c])},this.previous=()=>{let e,t=this.getActionIndex(),i=this.currentDelay;if(this.getEngine().setDoNotMove(!0),console.log("gotoslip: we call doRefresh",this.doRefresh()),-1==t)return!1;for(;this.getActionIndex()<t-1;)console.log("previous is ca we do next",this.getEngine().getDoNotMove()),e=this.next();return setTimeout(()=>{this.getEngine().setDoNotMove(!1)},0),this.getEngine().gotoSlip(this,{delay:i}),e},this.setTocElem=e=>{this.tocElem=e},this.updateToC=()=>{if(!this.tocElem)return;let e;for(this.ToCList||(this.ToCList=t(this.tocElem,"li","li")),e=0;e<this.getActionIndex();e++)this.ToCList[e].classList.remove("before","after","current"),this.ToCList[e].classList.add("before");for(e<=this.getActionIndex()&&(this.ToCList[e].classList.remove("before","after","current"),this.ToCList[e].classList.add("current"),e++);e<=this.getMaxNext();e++)this.ToCList[e].classList.remove("before","after","current"),this.ToCList[e].classList.add("after")},this.firstVisit=()=>{this.updateToC(),a.firstVisit&&a.firstVisit(this)},this.init=()=>{this.queryAll("*[chg-visib-at]").forEach(e=>{e.style.opacity="0"}),this.queryAll("*[static-at]").forEach(e=>{e.style.position="absolute",e.style.visibility="hidden"}),this.doAttributes(),this.updatePauseAncestors(),a.init&&a.init(this)},this.refresh=()=>{u[c]instanceof r?u[c].refresh():this.doRefresh()},this.refreshAll=()=>{u.filter(e=>e instanceof r).forEach(e=>{e.refreshAll()}),this.pauseSlipList.filter(e=>e instanceof r).forEach(e=>{e.refreshAll()}),this.doRefresh()},this.doRefresh=()=>{console.log("gotoslip: doRefresh has been called"),this.setActionIndex(-1);let e=t(this.element,".slip");console.log("mmdebug",h);let i=h.cloneNode(!0);s(i,e),this.element.replaceWith(i),this.element=i,this.init(),this.firstVisit(),delete this.currentX,delete this.currentY,delete this.currentDelay,console.log("previous is ca GOTOSLIP FROM 3",a,this.getEngine().getDoNotMove()),this.getEngine().gotoSlip(this)},this.moveUpTo=(e,t,i)=>{setTimeout(()=>{let s;s="string"==typeof e?this.query(e):e,void 0===i&&(i=.0125);let o=this.findSlipCoordinate(),n=(s.offsetTop/1080-i)*o.scale;this.moveWindow(o.x,o.y+n,o.scale,this.rotate,t)},0)},this.moveDownTo=(e,t,i)=>{setTimeout(()=>{let s;s="string"==typeof e?this.query(e):e,void 0===i&&(i=.0125);let o=this.findSlipCoordinate(),n=((s.offsetTop+s.offsetHeight)/1080-1+i)*o.scale;this.moveWindow(o.x,o.y+n,o.scale,this.rotate,t)},0)},this.moveCenterTo=(e,t,i)=>{setTimeout(()=>{let s;s="string"==typeof e?this.query(e):e,void 0===i&&(i=0);let o=this.findSlipCoordinate(),n=((s.offsetTop+s.offsetHeight/2)/1080-.5+i)*o.scale;this.moveWindow(o.x,o.y+n,o.scale,this.rotate,t)},0)},this.moveWindow=(e,t,i,s,o)=>{this.currentX=e,this.currentY=t,this.currentDelay=o,console.log("previous is ca we try to move win",this.getEngine().getDoNotMove()),console.log("previous is ca ORIGIN 3",e,t,this.getEngine().getDoNotMove()),this.getEngine().moveWindow(e,t,i,s,o)},this.reveal=e=>{this.query(e).style.opacity="1"},this.revealAll=e=>{this.queryAll(e).forEach(e=>{e.style.opacity="1"})},this.hide=e=>{this.query(e).style.opacity="0"},this.hideAll=e=>{this.queryAll(e).forEach(e=>{e.style.opacity="0"})},this.fullName=o,this.name="string"==typeof e?e:e.id,console.log("this name is ",this.name);let h,p=l;this.getEngine=()=>p,this.setEngine=e=>p=e,this.element="string"==typeof e?document.querySelector("#"+e):e,"undefined"!=typeof MathJax?MathJax.startup.promise.then(()=>{setTimeout(()=>{h=i(this.element)},0)}):setTimeout(()=>{h=i(this.element)},0),this.getCloned=()=>h,this.setCloned=e=>h=e,this.scale=parseFloat(this.element.getAttribute("scale")),(void 0===this.scale||isNaN(this.scale))&&(this.scale=1),this.rotate=parseFloat(this.element.getAttribute("rotate"))||0,this.delay=isNaN(parseFloat(this.element.getAttribute("delay")))?0:parseFloat(this.element.getAttribute("delay"));let d=this.findSlipCoordinate();console.log(d),this.x=d.x,this.y=d.y,this.init(this,p),this.addSubSlips(),this.generatePauseFlowSlipList=function(){let e=[],t=this.queryAll("[pause], [step], [auto-enter], [immediate-enter]"),i=1;return t.forEach(t=>{console.log("debug generatePauseFlowsliplist",t,i),t.hasAttribute("auto-enter")&&(e[i]=new r(t,t.getAttribute("toc-title")||"",[],l,{}),i++),t.hasAttribute("immediate-enter")&&(e[i-1]=new r(t,t.getAttribute("toc-title")||"",[],l,{}),i++),t.hasAttribute("step")&&(console.log("debug generatePauseFlowsliplist1",t,i),i+=parseInt(t.getAttribute("step"))||1,console.log("debug generatePauseFlowsliplist2",t,i)),t.hasAttribute("pause")&&(console.log("debug generatePauseFlowsliplist1",t,i),i+=parseInt(t.getAttribute("pause"))||1,console.log("debug generatePauseFlowsliplist1",t,i))}),e},this.pauseSlipList=this.generatePauseFlowSlipList()}const a=n,u=l,c=r,h=o;return window.Engine=n,window.Controller=l,window.Slip=r,window.Util=o,e.Controller=u,e.Engine=a,e.Slip=c,e.Util=h,e}({});
//# sourceMappingURL=slip-lib.cdn.min.js.map
